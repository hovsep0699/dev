{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useSelector,useDispatch}from'react-redux';import{Button}from'@distate/components';import'./style.css';import{DestinationType,RelationStatus}from'../../../helpers/contractors.typings';import{selectSearch}from'../../../store/selectors';import{createLocalCompanyInvitation,getFoundLocalCompany}from'../../../store/actions';import{Pagination}from'../../../../../common/pagination';/** Таблица для вывода результата поиска компании - Локальный */export var LocalCompanySearchTable=function LocalCompanySearchTable(){var _selectSearchState$co,_selectSearchState$co3;var dispatch=useDispatch();var selectSearchState=useSelector(selectSearch);var searchContractors=(selectSearchState===null||selectSearchState===void 0?void 0:(_selectSearchState$co=selectSearchState.company)===null||_selectSearchState$co===void 0?void 0:_selectSearchState$co.rows)||[];var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),offset=_React$useState2[0],setOffset=_React$useState2[1];/** запись в стор значения пагинации*/React.useEffect(function(){var _selectSearchState$co2;offset&&dispatch(getFoundLocalCompany(_objectSpread(_objectSpread({},selectSearchState===null||selectSearchState===void 0?void 0:(_selectSearchState$co2=selectSearchState.company)===null||_selectSearchState$co2===void 0?void 0:_selectSearchState$co2.searchParams),{},{offset:offset})));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dispatch,offset]);var _onClick=function onClick(args){dispatch(createLocalCompanyInvitation(args));};return/*#__PURE__*/React.createElement(\"table\",{className:\"table user-search-table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0418\\u041D\\u041D\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,searchContractors.map(function(item){return/*#__PURE__*/React.createElement(\"tr\",{key:item.inn},/*#__PURE__*/React.createElement(\"td\",null,item.name),/*#__PURE__*/React.createElement(\"td\",null,item.inn),/*#__PURE__*/React.createElement(\"td\",null,item.relationStatus!==RelationStatus.Active?/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _onClick({companyID:+item.id,type:DestinationType.Local});}},\"\\u041F\\u0440\\u0438\\u0433\\u043B\\u0430\\u0441\\u0438\\u0442\\u044C\"):'уже является контрагентом'));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:3},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{listLength:(_selectSearchState$co3=selectSearchState.company)===null||_selectSearchState$co3===void 0?void 0:_selectSearchState$co3.recordsTotal,setOffset:setOffset}))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/invite-contractor/tables/LocalCompanySearchTable.tsx"],"names":["React","useSelector","useDispatch","Button","DestinationType","RelationStatus","selectSearch","createLocalCompanyInvitation","getFoundLocalCompany","Pagination","LocalCompanySearchTable","dispatch","selectSearchState","searchContractors","company","rows","useState","offset","setOffset","useEffect","searchParams","onClick","args","map","item","inn","name","relationStatus","Active","companyID","id","type","Local","recordsTotal"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,MAAO,aAAP,CACA,OAASC,eAAT,CAA0BC,cAA1B,KAAgD,sCAAhD,CACA,OAASC,YAAT,KAA6B,0BAA7B,CACA,OAASC,4BAAT,CAAuCC,oBAAvC,KAAmE,wBAAnE,CACA,OAASC,UAAT,KAA2B,kCAA3B,CAEA,gEACA,MAAO,IAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,EAAM,kDAC3C,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,CAAAA,iBAAiB,CAAGX,WAAW,CAACK,YAAD,CAArC,CACA,GAAMO,CAAAA,iBAAiB,CAAG,CAAAD,iBAAiB,OAAjB,EAAAA,iBAAiB,SAAjB,+BAAAA,iBAAiB,CAAEE,OAAnB,sEAA4BC,IAA5B,GAAoC,EAA9D,CAH2C,oBAIff,KAAK,CAACgB,QAAN,EAJe,oDAIpCC,MAJoC,qBAI5BC,SAJ4B,qBAM3C,sCACAlB,KAAK,CAACmB,SAAN,CAAgB,UAAM,4BACpBF,MAAM,EACJN,QAAQ,CAACH,oBAAoB,gCAAMI,iBAAN,SAAMA,iBAAN,yCAAMA,iBAAiB,CAAEE,OAAzB,iDAAM,uBAA4BM,YAAlC,MAAgDH,MAAM,CAANA,MAAhD,GAArB,CADV,CAEA;AACD,CAJD,CAIG,CAACN,QAAD,CAAWM,MAAX,CAJH,EAWA,GAAMI,CAAAA,QAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,CAA+B,CAC7CX,QAAQ,CAACJ,4BAA4B,CAACe,IAAD,CAA7B,CAAR,CACD,CAFD,CAIA,mBACE,6BAAO,SAAS,CAAC,yBAAjB,eACE,6BAAO,SAAS,CAAC,mBAAjB,eACE,2CACE,yGADF,cAEE,mDAFF,cAGE,8BAHF,CADF,CADF,cAQE,iCACGT,iBAAiB,CAACU,GAAlB,CAAsB,SAAAC,IAAI,qBACzB,0BAAI,GAAG,CAAEA,IAAI,CAACC,GAAd,eACE,8BAAKD,IAAI,CAACE,IAAV,CADF,cAEE,8BAAKF,IAAI,CAACC,GAAV,CAFF,cAGE,8BACGD,IAAI,CAACG,cAAL,GAAwBtB,cAAc,CAACuB,MAAvC,cACC,oBAAC,MAAD,EACE,OAAO,CAAE,yBACPP,CAAAA,QAAO,CAAC,CACNQ,SAAS,CAAE,CAACL,IAAI,CAACM,EADX,CAENC,IAAI,CAAE3B,eAAe,CAAC4B,KAFhB,CAAD,CADA,EADX,iEADD,CAYC,2BAbJ,CAHF,CADyB,EAA1B,CADH,CARF,cAgCE,8CACE,2CACE,0BAAI,OAAO,CAAE,CAAb,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,oBAAC,UAAD,EACE,UAAU,yBAAEpB,iBAAiB,CAACE,OAApB,iDAAE,uBAA2BmB,YADzC,CAEE,SAAS,CAAEf,SAFb,EADF,CADF,CADF,CADF,CAhCF,CADF,CA+CD,CArEM","sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Button } from '@distate/components';\r\nimport './style.css';\r\nimport { DestinationType, RelationStatus } from '../../../helpers/contractors.typings';\r\nimport { selectSearch } from '../../../store/selectors';\r\nimport { createLocalCompanyInvitation, getFoundLocalCompany } from '../../../store/actions';\r\nimport { Pagination } from '../../../../../common/pagination';\r\n\r\n/** Таблица для вывода результата поиска компании - Локальный */\r\nexport const LocalCompanySearchTable = () => {\r\n  const dispatch = useDispatch();\r\n  const selectSearchState = useSelector(selectSearch);\r\n  const searchContractors = selectSearchState?.company?.rows || [];\r\n  const [offset, setOffset] = React.useState();\r\n\r\n  /** запись в стор значения пагинации*/\r\n  React.useEffect(() => {\r\n    offset &&\r\n      dispatch(getFoundLocalCompany({ ...selectSearchState?.company?.searchParams, offset }));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, offset]);\r\n\r\n  type LocalCompanyPayload = {\r\n    type: DestinationType;\r\n    companyID: number;\r\n  };\r\n\r\n  const onClick = (args: LocalCompanyPayload) => {\r\n    dispatch(createLocalCompanyInvitation(args));\r\n  };\r\n\r\n  return (\r\n    <table className=\"table user-search-table\">\r\n      <thead className=\"common-table-head\">\r\n        <tr>\r\n          <td>Наименование</td>\r\n          <td>ИНН</td>\r\n          <td></td>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {searchContractors.map(item => (\r\n          <tr key={item.inn}>\r\n            <td>{item.name}</td>\r\n            <td>{item.inn}</td>\r\n            <td>\r\n              {item.relationStatus !== RelationStatus.Active ? (\r\n                <Button\r\n                  onClick={() =>\r\n                    onClick({\r\n                      companyID: +item.id,\r\n                      type: DestinationType.Local\r\n                    })\r\n                  }\r\n                >\r\n                  Пригласить\r\n                </Button>\r\n              ) : (\r\n                'уже является контрагентом'\r\n              )}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colSpan={3}>\r\n            <div className=\"pagination-right\">\r\n              <Pagination\r\n                listLength={selectSearchState.company?.recordsTotal}\r\n                setOffset={setOffset}\r\n              />\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}