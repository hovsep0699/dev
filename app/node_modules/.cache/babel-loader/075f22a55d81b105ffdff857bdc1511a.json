{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(companyStaffEffect),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(getStaffWorker),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(getStaffDeactivatedWorker),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(getStaffWaitingWorker),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeWorker),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeRolesWorker),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeNoRolesWorker),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(deleteRoleToEmployeeWorker),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(addRoleToEmployeeWorker),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeCertificateWorker),_marked11=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeDivisionsWorker),_marked12=/*#__PURE__*/_regeneratorRuntime.mark(changeEmployeeDefaultDivisionWorker),_marked13=/*#__PURE__*/_regeneratorRuntime.mark(changeCertificateActivationWorker),_marked14=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeContractorGroupsWorker),_marked15=/*#__PURE__*/_regeneratorRuntime.mark(getEmployeeNoContractorGroupsWorker),_marked16=/*#__PURE__*/_regeneratorRuntime.mark(deleteEmployeeContractorGroupsWorker),_marked17=/*#__PURE__*/_regeneratorRuntime.mark(addEmployeeContractorGroupsWorker),_marked18=/*#__PURE__*/_regeneratorRuntime.mark(changeEmployeeResponsibleWorker),_marked19=/*#__PURE__*/_regeneratorRuntime.mark(resetEmployeePasswordWorker),_marked20=/*#__PURE__*/_regeneratorRuntime.mark(rejectEmployeeWorker),_marked21=/*#__PURE__*/_regeneratorRuntime.mark(activeEmployeeWorker),_marked22=/*#__PURE__*/_regeneratorRuntime.mark(deactivateEmployeeWorker);import{takeLatest,put}from'redux-saga/effects';import{Flash}from'../../../../common/flash/Flash';import{getStaff,setStaff,getStaffDeactivated,setStaffDeactivated,getStaffWaiting,setStaffWaiting,getEmployee,setEmployee,getEmployeeRoles,setEmployeeRoles,getEmployeeNoRoles,setEmployeeNoRoles,deleteRoleToEmployee,addRoleToEmployee,getEmployeeCertificate,setEmployeeCertificate,getEmployeeDivisions,setEmployeeDivisions,changeEmployeeDefaultDivision,changeCertificateActivation,getEmployeeContractorGroups,setEmployeeContractorGroups,getEmployeeNoContractorGroups,setEmployeeNoContractorGroups,deleteEmployeeContractorGroups,addEmployeeContractorGroups,changeEmployeeResponsible,resetEmployeePassword,rejectEmployee,activeEmployee,deactivateEmployee,setStaffFilter}from'../actions';import AuthGateway from'@distate/core/dist/application/auth/AuthGateway';import CompanyGateway from'@distate/core/dist/application/company/CompanyGateway';import{expandCertificateList}from'@distate/core/dist/application/certificate/CertificateHelper';/** Сотрудники компании */export function companyStaffEffect(){return _regeneratorRuntime.wrap(function companyStaffEffect$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(getStaff,getStaffWorker);case 2:_context.next=4;return takeLatest(getEmployee,getEmployeeWorker);case 4:_context.next=6;return takeLatest(getEmployeeRoles,getEmployeeRolesWorker);case 6:_context.next=8;return takeLatest(getEmployeeNoRoles,getEmployeeNoRolesWorker);case 8:_context.next=10;return takeLatest(deleteRoleToEmployee,deleteRoleToEmployeeWorker);case 10:_context.next=12;return takeLatest(addRoleToEmployee,addRoleToEmployeeWorker);case 12:_context.next=14;return takeLatest(getEmployeeCertificate,getEmployeeCertificateWorker);case 14:_context.next=16;return takeLatest(getEmployeeDivisions,getEmployeeDivisionsWorker);case 16:_context.next=18;return takeLatest(changeEmployeeDefaultDivision,changeEmployeeDefaultDivisionWorker);case 18:_context.next=20;return takeLatest(changeCertificateActivation,changeCertificateActivationWorker);case 20:_context.next=22;return takeLatest(getEmployeeContractorGroups,getEmployeeContractorGroupsWorker);case 22:_context.next=24;return takeLatest(getEmployeeNoContractorGroups,getEmployeeNoContractorGroupsWorker);case 24:_context.next=26;return takeLatest(deleteEmployeeContractorGroups,deleteEmployeeContractorGroupsWorker);case 26:_context.next=28;return takeLatest(addEmployeeContractorGroups,addEmployeeContractorGroupsWorker);case 28:_context.next=30;return takeLatest(changeEmployeeResponsible,changeEmployeeResponsibleWorker);case 30:_context.next=32;return takeLatest(resetEmployeePassword,resetEmployeePasswordWorker);case 32:_context.next=34;return takeLatest(rejectEmployee,rejectEmployeeWorker);case 34:_context.next=36;return takeLatest(activeEmployee,activeEmployeeWorker);case 36:_context.next=38;return takeLatest(deactivateEmployee,deactivateEmployeeWorker);case 38:_context.next=40;return takeLatest(getStaffDeactivated,getStaffDeactivatedWorker);case 40:_context.next=42;return takeLatest(getStaffWaiting,getStaffWaitingWorker);case 42:case\"end\":return _context.stop();}}},_marked);}/** получить список сотрудников */function getStaffWorker(_ref){var payload,id,params,authGateway,response;return _regeneratorRuntime.wrap(function getStaffWorker$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref.payload;_context2.prev=1;id=payload.id,params=payload.params;_context2.next=5;return put(setStaffFilter(params));case 5:authGateway=new AuthGateway();_context2.next=8;return authGateway.companyEmployees(id,params);case 8:response=_context2.sent;_context2.next=11;return put(setStaff(response));case 11:_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);_context2.next=17;return Flash.error('Возникла ошибка');case 17:case\"end\":return _context2.stop();}}},_marked2,null,[[1,13]]);}/** получить список отключенных сотрудников */function getStaffDeactivatedWorker(_ref2){var payload,id,params,authGateway,response;return _regeneratorRuntime.wrap(function getStaffDeactivatedWorker$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref2.payload;_context3.prev=1;id=payload.id,params=payload.params;authGateway=new AuthGateway();_context3.next=6;return authGateway.companyEmployees(id,params);case 6:response=_context3.sent;_context3.next=9;return put(setStaffDeactivated(response));case 9:_context3.next=15;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);_context3.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context3.stop();}}},_marked3,null,[[1,11]]);}/** получить список сотрудников в заявках на активацию */function getStaffWaitingWorker(_ref3){var payload,id,params,authGateway,response;return _regeneratorRuntime.wrap(function getStaffWaitingWorker$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref3.payload;_context4.prev=1;id=payload.id,params=payload.params;authGateway=new AuthGateway();_context4.next=6;return authGateway.companyEmployees(id,params);case 6:response=_context4.sent;_context4.next=9;return put(setStaffWaiting(response));case 9:_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);_context4.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context4.stop();}}},_marked4,null,[[1,11]]);}/** получение информации о сотруднике */function getEmployeeWorker(_ref4){var payload,companyGateway,response;return _regeneratorRuntime.wrap(function getEmployeeWorker$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:payload=_ref4.payload;_context5.prev=1;companyGateway=new CompanyGateway();_context5.next=5;return companyGateway.getEmployee(payload);case 5:response=_context5.sent;_context5.next=8;return put(setEmployee(response));case 8:_context5.next=14;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](1);_context5.next=14;return Flash.error('Возникла ошибка');case 14:case\"end\":return _context5.stop();}}},_marked5,null,[[1,10]]);}/** получение информации о ролях пользователя */function getEmployeeRolesWorker(_ref5){var payload,id,props,companyGateway,response;return _regeneratorRuntime.wrap(function getEmployeeRolesWorker$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:payload=_ref5.payload;_context6.prev=1;id=payload.id,props=payload.props;companyGateway=new CompanyGateway();_context6.next=6;return companyGateway.getEmployeeGroup(id,props);case 6:response=_context6.sent;_context6.next=9;return put(setEmployeeRoles(response));case 9:_context6.next=15;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);_context6.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context6.stop();}}},_marked6,null,[[1,11]]);}/** получение информации о ролях, которые можно добвить сотруднику */function getEmployeeNoRolesWorker(_ref6){var payload,id,props,companyGateway,response;return _regeneratorRuntime.wrap(function getEmployeeNoRolesWorker$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:payload=_ref6.payload;_context7.prev=1;id=payload.id,props=payload.props;companyGateway=new CompanyGateway();_context7.next=6;return companyGateway.getEmployeeNoGroup(id,props);case 6:response=_context7.sent;_context7.next=9;return put(setEmployeeNoRoles(response));case 9:_context7.next=15;break;case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](1);_context7.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context7.stop();}}},_marked7,null,[[1,11]]);}/** удаление роли у сотрудника */function deleteRoleToEmployeeWorker(_ref7){var payload,_response$data,groupId,employeeId,companyGateway,response,_response$data2,_response,message;return _regeneratorRuntime.wrap(function deleteRoleToEmployeeWorker$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:payload=_ref7.payload;_context8.prev=1;groupId=payload.groupId,employeeId=payload.employeeId;companyGateway=new CompanyGateway();_context8.next=6;return companyGateway.deleteRoleToEmployee(groupId,employeeId);case 6:response=_context8.sent;_context8.next=9;return put(getEmployeeNoRoles({id:employeeId}));case 9:_context8.next=11;return put(getEmployeeRoles({id:employeeId}));case 11:_context8.next=13;return(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message)&&Flash.success(response.data.message);case 13:_context8.next=21;break;case 15:_context8.prev=15;_context8.t0=_context8[\"catch\"](1);_response=_context8.t0.response;message=_response===null||_response===void 0?void 0:(_response$data2=_response.data)===null||_response$data2===void 0?void 0:_response$data2.messages[0];_context8.next=21;return Flash.error(message||'Возникла ошибка');case 21:case\"end\":return _context8.stop();}}},_marked8,null,[[1,15]]);}/** добавление роли сотруднику */function addRoleToEmployeeWorker(_ref9){var payload,groupId,employeeId,companyGateway;return _regeneratorRuntime.wrap(function addRoleToEmployeeWorker$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:payload=_ref9.payload;_context9.prev=1;groupId=payload.groupId,employeeId=payload.employeeId;companyGateway=new CompanyGateway();_context9.next=6;return companyGateway.addRoleToEmployee(groupId,employeeId);case 6:_context9.next=8;return put(getEmployeeNoRoles({id:employeeId}));case 8:_context9.next=10;return put(getEmployeeRoles({id:employeeId}));case 10:_context9.next=16;break;case 12:_context9.prev=12;_context9.t0=_context9[\"catch\"](1);_context9.next=16;return Flash.error('Возникла ошибка');case 16:case\"end\":return _context9.stop();}}},_marked9,null,[[1,12]]);}/** получение сертификатов сотрудника */function getEmployeeCertificateWorker(_ref10){var payload,id,_payload$props,props,companyGateway,certificates,_certificates$rows,rows,extendedRows;return _regeneratorRuntime.wrap(function getEmployeeCertificateWorker$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:payload=_ref10.payload;_context10.prev=1;id=payload.id,_payload$props=payload.props,props=_payload$props===void 0?{}:_payload$props;companyGateway=new CompanyGateway();_context10.next=6;return companyGateway.getEmployeeCertificate(id,props);case 6:certificates=_context10.sent;_certificates$rows=certificates.rows,rows=_certificates$rows===void 0?[]:_certificates$rows;/** добавление должности в параметры */_context10.next=10;return expandCertificateList(rows);case 10:extendedRows=_context10.sent;_context10.next=13;return put(setEmployeeCertificate(_objectSpread(_objectSpread({},certificates),{},{rows:extendedRows})));case 13:_context10.next=19;break;case 15:_context10.prev=15;_context10.t0=_context10[\"catch\"](1);_context10.next=19;return Flash.error('Возникла ошибка');case 19:case\"end\":return _context10.stop();}}},_marked10,null,[[1,15]]);}/** получение списка подразделений */function getEmployeeDivisionsWorker(_ref11){var payload,id,_payload$props2,props,companyGateway,response;return _regeneratorRuntime.wrap(function getEmployeeDivisionsWorker$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:payload=_ref11.payload;_context11.prev=1;id=payload.id,_payload$props2=payload.props,props=_payload$props2===void 0?{}:_payload$props2;companyGateway=new CompanyGateway();_context11.next=6;return companyGateway.getEmployeeDivision(id,props);case 6:response=_context11.sent;_context11.next=9;return put(setEmployeeDivisions(response));case 9:_context11.next=15;break;case 11:_context11.prev=11;_context11.t0=_context11[\"catch\"](1);_context11.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context11.stop();}}},_marked11,null,[[1,11]]);}/** изменение подразделения по умолчанию для сотрудника */function changeEmployeeDefaultDivisionWorker(_ref12){var payload,employeeId,divisionId,companyGateway;return _regeneratorRuntime.wrap(function changeEmployeeDefaultDivisionWorker$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:payload=_ref12.payload;_context12.prev=1;employeeId=payload.employeeId,divisionId=payload.divisionId;companyGateway=new CompanyGateway();_context12.next=6;return companyGateway.changeEmployeeDefaultDivision(employeeId,divisionId);case 6:_context12.next=12;break;case 8:_context12.prev=8;_context12.t0=_context12[\"catch\"](1);_context12.next=12;return Flash.error('Возникла ошибка');case 12:case\"end\":return _context12.stop();}}},_marked12,null,[[1,8]]);}/** изменение активации сертификата */function changeCertificateActivationWorker(_ref13){var payload,id,isActive,employeeId,props,companyGateway;return _regeneratorRuntime.wrap(function changeCertificateActivationWorker$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:payload=_ref13.payload;_context13.prev=1;id=payload.id,isActive=payload.isActive,employeeId=payload.employeeId,props=payload.props;companyGateway=new CompanyGateway();if(!isActive){_context13.next=9;break;}_context13.next=7;return companyGateway.deactivateCertivicate(id);case 7:_context13.next=11;break;case 9:_context13.next=11;return companyGateway.activateCertificate(id);case 11:_context13.next=13;return put(getEmployeeCertificate({id:employeeId,props:props}));case 13:_context13.next=19;break;case 15:_context13.prev=15;_context13.t0=_context13[\"catch\"](1);_context13.next=19;return Flash.error('Возникла ошибка');case 19:case\"end\":return _context13.stop();}}},_marked13,null,[[1,15]]);}/** получение групп контрагентов пользователя */function getEmployeeContractorGroupsWorker(_ref14){var payload,id,props,companyGateway,response;return _regeneratorRuntime.wrap(function getEmployeeContractorGroupsWorker$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:payload=_ref14.payload;_context14.prev=1;id=payload.id,props=payload.props;companyGateway=new CompanyGateway();_context14.next=6;return companyGateway.getEmployeeContractorGroups(id,props);case 6:response=_context14.sent;_context14.next=9;return put(setEmployeeContractorGroups(response));case 9:_context14.next=15;break;case 11:_context14.prev=11;_context14.t0=_context14[\"catch\"](1);_context14.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context14.stop();}}},_marked14,null,[[1,11]]);}/** получение групп контрагентов пользователя доступных для добавления */function getEmployeeNoContractorGroupsWorker(_ref15){var payload,id,props,companyGateway,response;return _regeneratorRuntime.wrap(function getEmployeeNoContractorGroupsWorker$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:payload=_ref15.payload;_context15.prev=1;id=payload.id,props=payload.props;companyGateway=new CompanyGateway();_context15.next=6;return companyGateway.getEmployeeContractorGroups(id,_objectSpread(_objectSpread({},props),{},{inverseJoin:1}));case 6:response=_context15.sent;_context15.next=9;return put(setEmployeeNoContractorGroups(response));case 9:_context15.next=15;break;case 11:_context15.prev=11;_context15.t0=_context15[\"catch\"](1);_context15.next=15;return Flash.error('Возникла ошибка');case 15:case\"end\":return _context15.stop();}}},_marked15,null,[[1,11]]);}/** удаление группы контрагентов сотрудника */function deleteEmployeeContractorGroupsWorker(_ref16){var payload,groupId,employeeId,companyGateway;return _regeneratorRuntime.wrap(function deleteEmployeeContractorGroupsWorker$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:payload=_ref16.payload;_context16.prev=1;groupId=payload.groupId,employeeId=payload.employeeId;companyGateway=new CompanyGateway();_context16.next=6;return companyGateway.deleteEmployeeContractorGroup(groupId,employeeId);case 6:_context16.next=8;return put(getEmployeeContractorGroups({id:employeeId}));case 8:_context16.next=10;return put(getEmployeeNoContractorGroups({id:employeeId}));case 10:_context16.next=16;break;case 12:_context16.prev=12;_context16.t0=_context16[\"catch\"](1);_context16.next=16;return Flash.error('Возникла ошибка');case 16:case\"end\":return _context16.stop();}}},_marked16,null,[[1,12]]);}/** добавление группы контрагентов сотрудника */function addEmployeeContractorGroupsWorker(_ref17){var payload,groupId,employeeId,companyGateway;return _regeneratorRuntime.wrap(function addEmployeeContractorGroupsWorker$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:payload=_ref17.payload;_context17.prev=1;groupId=payload.groupId,employeeId=payload.employeeId;companyGateway=new CompanyGateway();_context17.next=6;return companyGateway.addEmployeeContractorGroup(groupId,employeeId);case 6:_context17.next=8;return put(getEmployeeContractorGroups({id:employeeId}));case 8:_context17.next=10;return put(getEmployeeNoContractorGroups({id:employeeId}));case 10:_context17.next=16;break;case 12:_context17.prev=12;_context17.t0=_context17[\"catch\"](1);_context17.next=16;return Flash.error('Возникла ошибка');case 16:case\"end\":return _context17.stop();}}},_marked17,null,[[1,12]]);}/** изменение ответственности сотрудника */function changeEmployeeResponsibleWorker(_ref18){var payload,_response2,_response2$data,employeeId,responsible,companyGateway,isResponsible,formData,response;return _regeneratorRuntime.wrap(function changeEmployeeResponsibleWorker$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:payload=_ref18.payload;_context18.prev=1;employeeId=payload.employeeId,responsible=payload.responsible;companyGateway=new CompanyGateway();isResponsible=responsible?'0':'1';formData=new FormData();formData.append('isResponsible',isResponsible);if(!responsible){_context18.next=13;break;}_context18.next=10;return companyGateway.changeEmployeeResponsible(employeeId,formData);case 10:response=_context18.sent;_context18.next=16;break;case 13:_context18.next=15;return companyGateway.changeEmployeeResponsible(employeeId,formData);case 15:response=_context18.sent;case 16:_context18.next=18;return Flash.success((_response2=response)===null||_response2===void 0?void 0:(_response2$data=_response2.data)===null||_response2$data===void 0?void 0:_response2$data.message);case 18:_context18.next=20;return put(getEmployee(employeeId));case 20:_context18.next=26;break;case 22:_context18.prev=22;_context18.t0=_context18[\"catch\"](1);_context18.next=26;return Flash.error('Возникла ошибка');case 26:case\"end\":return _context18.stop();}}},_marked18,null,[[1,22]]);}/** сбросить пароль сотрудника */function resetEmployeePasswordWorker(_ref19){var payload,employeeId,companyGateway;return _regeneratorRuntime.wrap(function resetEmployeePasswordWorker$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:payload=_ref19.payload;_context19.prev=1;employeeId=payload.employeeId;companyGateway=new CompanyGateway();companyGateway.resetEmployeePassword(employeeId);_context19.next=7;return Flash.success('На почтовый адрес сотрудника выслано письмо с инструкциями и кодом подтверждения');case 7:_context19.next=13;break;case 9:_context19.prev=9;_context19.t0=_context19[\"catch\"](1);_context19.next=13;return Flash.error('Возникла ошибка');case 13:case\"end\":return _context19.stop();}}},_marked19,null,[[1,9]]);}/** отклонить заявку на активацию сотрудника */function rejectEmployeeWorker(_ref20){var payload,employeeId,companyId,params,companyGateway;return _regeneratorRuntime.wrap(function rejectEmployeeWorker$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:payload=_ref20.payload;_context20.prev=1;employeeId=payload.employeeId,companyId=payload.companyId,params=payload.params;companyGateway=new CompanyGateway();_context20.next=6;return companyGateway.rejectEmployee(employeeId);case 6:_context20.next=8;return put(getStaff({id:companyId,params:params}));case 8:_context20.next=10;return put(getStaffWaiting({id:companyId,params:params}));case 10:_context20.next=16;break;case 12:_context20.prev=12;_context20.t0=_context20[\"catch\"](1);_context20.next=16;return Flash.error('Возникла ошибка');case 16:case\"end\":return _context20.stop();}}},_marked20,null,[[1,12]]);}/** принять заявку на активацию сотрудника */function activeEmployeeWorker(_ref21){var payload,employeeId,companyId,params,companyGateway;return _regeneratorRuntime.wrap(function activeEmployeeWorker$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:payload=_ref21.payload;_context21.prev=1;employeeId=payload.employeeId,companyId=payload.companyId,params=payload.params;companyGateway=new CompanyGateway();companyGateway.activeEmployee(employeeId);_context21.next=7;return put(getStaff({id:companyId,params:params}));case 7:_context21.next=9;return put(getStaffDeactivated({id:companyId,params:params}));case 9:_context21.next=11;return put(getStaffWaiting({id:companyId,params:params}));case 11:_context21.next=17;break;case 13:_context21.prev=13;_context21.t0=_context21[\"catch\"](1);_context21.next=17;return Flash.error('Возникла ошибка');case 17:case\"end\":return _context21.stop();}}},_marked21,null,[[1,13]]);}/** деактивировать сотрудника */function deactivateEmployeeWorker(_ref22){var payload,employeeId,companyId,params,companyGateway;return _regeneratorRuntime.wrap(function deactivateEmployeeWorker$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:payload=_ref22.payload;_context22.prev=1;employeeId=payload.employeeId,companyId=payload.companyId,params=payload.params;companyGateway=new CompanyGateway();companyGateway.deactivateEmployee(employeeId);_context22.next=7;return put(getStaff({id:companyId,params:params}));case 7:_context22.next=13;break;case 9:_context22.prev=9;_context22.t0=_context22[\"catch\"](1);_context22.next=13;return Flash.error('Возникла ошибка');case 13:case\"end\":return _context22.stop();}}},_marked22,null,[[1,9]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/company/store/sagas/companyStaff.effect.ts"],"names":["companyStaffEffect","getStaffWorker","getStaffDeactivatedWorker","getStaffWaitingWorker","getEmployeeWorker","getEmployeeRolesWorker","getEmployeeNoRolesWorker","deleteRoleToEmployeeWorker","addRoleToEmployeeWorker","getEmployeeCertificateWorker","getEmployeeDivisionsWorker","changeEmployeeDefaultDivisionWorker","changeCertificateActivationWorker","getEmployeeContractorGroupsWorker","getEmployeeNoContractorGroupsWorker","deleteEmployeeContractorGroupsWorker","addEmployeeContractorGroupsWorker","changeEmployeeResponsibleWorker","resetEmployeePasswordWorker","rejectEmployeeWorker","activeEmployeeWorker","deactivateEmployeeWorker","takeLatest","put","Flash","getStaff","setStaff","getStaffDeactivated","setStaffDeactivated","getStaffWaiting","setStaffWaiting","getEmployee","setEmployee","getEmployeeRoles","setEmployeeRoles","getEmployeeNoRoles","setEmployeeNoRoles","deleteRoleToEmployee","addRoleToEmployee","getEmployeeCertificate","setEmployeeCertificate","getEmployeeDivisions","setEmployeeDivisions","changeEmployeeDefaultDivision","changeCertificateActivation","getEmployeeContractorGroups","setEmployeeContractorGroups","getEmployeeNoContractorGroups","setEmployeeNoContractorGroups","deleteEmployeeContractorGroups","addEmployeeContractorGroups","changeEmployeeResponsible","resetEmployeePassword","rejectEmployee","activeEmployee","deactivateEmployee","setStaffFilter","AuthGateway","CompanyGateway","expandCertificateList","payload","id","params","authGateway","companyEmployees","response","error","companyGateway","props","getEmployeeGroup","getEmployeeNoGroup","groupId","employeeId","data","message","success","messages","certificates","rows","extendedRows","getEmployeeDivision","divisionId","isActive","deactivateCertivicate","activateCertificate","inverseJoin","deleteEmployeeContractorGroup","addEmployeeContractorGroup","responsible","isResponsible","formData","FormData","append","companyId"],"mappings":"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","sourcesContent":["import { takeLatest, put } from 'redux-saga/effects';\r\nimport { Flash } from '../../../../common/flash/Flash';\r\nimport {\r\n  getStaff,\r\n  setStaff,\r\n  getStaffDeactivated,\r\n  setStaffDeactivated,\r\n  getStaffWaiting,\r\n  setStaffWaiting,\r\n  getEmployee,\r\n  setEmployee,\r\n  getEmployeeRoles,\r\n  setEmployeeRoles,\r\n  getEmployeeNoRoles,\r\n  setEmployeeNoRoles,\r\n  deleteRoleToEmployee,\r\n  addRoleToEmployee,\r\n  getEmployeeCertificate,\r\n  setEmployeeCertificate,\r\n  getEmployeeDivisions,\r\n  setEmployeeDivisions,\r\n  changeEmployeeDefaultDivision,\r\n  changeCertificateActivation,\r\n  getEmployeeContractorGroups,\r\n  setEmployeeContractorGroups,\r\n  getEmployeeNoContractorGroups,\r\n  setEmployeeNoContractorGroups,\r\n  deleteEmployeeContractorGroups,\r\n  addEmployeeContractorGroups,\r\n  changeEmployeeResponsible,\r\n  resetEmployeePassword,\r\n  rejectEmployee,\r\n  activeEmployee,\r\n  deactivateEmployee,\r\n  setStaffFilter\r\n} from '../actions';\r\nimport AuthGateway from '@distate/core/dist/application/auth/AuthGateway';\r\nimport CompanyGateway from '@distate/core/dist/application/company/CompanyGateway';\r\nimport { expandCertificateList } from '@distate/core/dist/application/certificate/CertificateHelper';\r\n\r\n/** Сотрудники компании */\r\nexport function* companyStaffEffect() {\r\n  yield takeLatest(getStaff, getStaffWorker);\r\n  yield takeLatest(getEmployee, getEmployeeWorker);\r\n  yield takeLatest(getEmployeeRoles, getEmployeeRolesWorker);\r\n  yield takeLatest(getEmployeeNoRoles, getEmployeeNoRolesWorker);\r\n  yield takeLatest(deleteRoleToEmployee, deleteRoleToEmployeeWorker);\r\n  yield takeLatest(addRoleToEmployee, addRoleToEmployeeWorker);\r\n  yield takeLatest(getEmployeeCertificate, getEmployeeCertificateWorker);\r\n  yield takeLatest(getEmployeeDivisions, getEmployeeDivisionsWorker);\r\n  yield takeLatest(changeEmployeeDefaultDivision, changeEmployeeDefaultDivisionWorker);\r\n  yield takeLatest(changeCertificateActivation, changeCertificateActivationWorker);\r\n  yield takeLatest(getEmployeeContractorGroups, getEmployeeContractorGroupsWorker);\r\n  yield takeLatest(getEmployeeNoContractorGroups, getEmployeeNoContractorGroupsWorker);\r\n  yield takeLatest(deleteEmployeeContractorGroups, deleteEmployeeContractorGroupsWorker);\r\n  yield takeLatest(addEmployeeContractorGroups, addEmployeeContractorGroupsWorker);\r\n  yield takeLatest(changeEmployeeResponsible, changeEmployeeResponsibleWorker);\r\n  yield takeLatest(resetEmployeePassword, resetEmployeePasswordWorker);\r\n  yield takeLatest(rejectEmployee, rejectEmployeeWorker);\r\n  yield takeLatest(activeEmployee, activeEmployeeWorker);\r\n  yield takeLatest(deactivateEmployee, deactivateEmployeeWorker);\r\n  yield takeLatest(getStaffDeactivated, getStaffDeactivatedWorker);\r\n  yield takeLatest(getStaffWaiting, getStaffWaitingWorker);\r\n}\r\n\r\ntype GetStaffWorker = { payload: { id: any; params: any } };\r\n/** получить список сотрудников */\r\nfunction* getStaffWorker({ payload }: GetStaffWorker) {\r\n  try {\r\n    const { id, params } = payload;\r\n    yield put(setStaffFilter(params));\r\n    const authGateway = new AuthGateway();\r\n    const response = yield authGateway.companyEmployees(id, params);\r\n    yield put(setStaff(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetStaffDeactivated = { payload: { id: any; params: any } };\r\n/** получить список отключенных сотрудников */\r\nfunction* getStaffDeactivatedWorker({ payload }: GetStaffDeactivated) {\r\n  try {\r\n    const { id, params } = payload;\r\n    const authGateway = new AuthGateway();\r\n    const response = yield authGateway.companyEmployees(id, params);\r\n    yield put(setStaffDeactivated(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetStaffWaiting = { payload: { id: any; params: any } };\r\n/** получить список сотрудников в заявках на активацию */\r\nfunction* getStaffWaitingWorker({ payload }: GetStaffWaiting) {\r\n  try {\r\n    const { id, params } = payload;\r\n    const authGateway = new AuthGateway();\r\n    const response = yield authGateway.companyEmployees(id, params);\r\n    yield put(setStaffWaiting(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\n/** получение информации о сотруднике */\r\nfunction* getEmployeeWorker({ payload }: { payload: number }) {\r\n  try {\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.getEmployee(payload);\r\n    yield put(setEmployee(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetEmployeeRoles = {\r\n  id: number;\r\n  props: {};\r\n};\r\n/** получение информации о ролях пользователя */\r\nfunction* getEmployeeRolesWorker({ payload }: { payload: GetEmployeeRoles }) {\r\n  try {\r\n    const { id, props } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.getEmployeeGroup(id, props);\r\n    yield put(setEmployeeRoles(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetEmployeeNoRoles = {\r\n  id: number;\r\n  props: {};\r\n};\r\n/** получение информации о ролях, которые можно добвить сотруднику */\r\nfunction* getEmployeeNoRolesWorker({ payload }: { payload: GetEmployeeNoRoles }) {\r\n  try {\r\n    const { id, props } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.getEmployeeNoGroup(id, props);\r\n    yield put(setEmployeeNoRoles(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype DeleteRoleToEmployee = {\r\n  groupId: number;\r\n  employeeId: number;\r\n};\r\n/** удаление роли у сотрудника */\r\nfunction* deleteRoleToEmployeeWorker({ payload }: { payload: DeleteRoleToEmployee }) {\r\n  try {\r\n    const { groupId, employeeId } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.deleteRoleToEmployee(groupId, employeeId);\r\n    yield put(getEmployeeNoRoles({ id: employeeId }));\r\n    yield put(getEmployeeRoles({ id: employeeId }));\r\n    yield response?.data?.message && Flash.success(response.data.message);\r\n  } catch ({ response }) {\r\n    const message = response?.data?.messages[0];\r\n    yield Flash.error(message || 'Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype AddRoleToEmployee = {\r\n  groupId: number;\r\n  employeeId: number;\r\n};\r\n/** добавление роли сотруднику */\r\nfunction* addRoleToEmployeeWorker({ payload }: { payload: AddRoleToEmployee }) {\r\n  try {\r\n    const { groupId, employeeId } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    yield companyGateway.addRoleToEmployee(groupId, employeeId);\r\n    yield put(getEmployeeNoRoles({ id: employeeId }));\r\n    yield put(getEmployeeRoles({ id: employeeId }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetEmployeeCertificate = {\r\n  id: number;\r\n  props: {};\r\n};\r\n/** получение сертификатов сотрудника */\r\nfunction* getEmployeeCertificateWorker({ payload }: { payload: GetEmployeeCertificate }) {\r\n  try {\r\n    const { id, props = {} } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const certificates = yield companyGateway.getEmployeeCertificate(id, props);\r\n\r\n    const { rows = [] } = certificates;\r\n    /** добавление должности в параметры */\r\n    const extendedRows = yield expandCertificateList(rows);\r\n\r\n    yield put(setEmployeeCertificate({ ...certificates, rows: extendedRows }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetEmployeeDivisions = {\r\n  id: number;\r\n  props: {};\r\n};\r\n/** получение списка подразделений */\r\nfunction* getEmployeeDivisionsWorker({ payload }: { payload: GetEmployeeDivisions }) {\r\n  try {\r\n    const { id, props = {} } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.getEmployeeDivision(id, props);\r\n    yield put(setEmployeeDivisions(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype ChangeEmployeeDefaultDivision = {\r\n  employeeId: number;\r\n  divisionId: number;\r\n};\r\n/** изменение подразделения по умолчанию для сотрудника */\r\nfunction* changeEmployeeDefaultDivisionWorker({\r\n  payload\r\n}: {\r\n  payload: ChangeEmployeeDefaultDivision;\r\n}) {\r\n  try {\r\n    const { employeeId, divisionId } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    yield companyGateway.changeEmployeeDefaultDivision(employeeId, divisionId);\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype ChangeCertificateActivation = {\r\n  id: number;\r\n  isActive: boolean;\r\n  employeeId: number;\r\n  props: Object;\r\n};\r\n/** изменение активации сертификата */\r\nfunction* changeCertificateActivationWorker({ payload }: { payload: ChangeCertificateActivation }) {\r\n  try {\r\n    const { id, isActive, employeeId, props } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    if (isActive) {\r\n      yield companyGateway.deactivateCertivicate(id);\r\n    } else {\r\n      yield companyGateway.activateCertificate(id);\r\n    }\r\n    /** обновления списка сертификатов */\r\n    yield put(getEmployeeCertificate({ id: employeeId, props }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetEmployeeContractors = {\r\n  id: number;\r\n  props: Object;\r\n};\r\n/** получение групп контрагентов пользователя */\r\nfunction* getEmployeeContractorGroupsWorker({ payload }: { payload: GetEmployeeContractors }) {\r\n  try {\r\n    const { id, props } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.getEmployeeContractorGroups(id, props);\r\n    yield put(setEmployeeContractorGroups(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype GetEmployeeNoContractors = {\r\n  id: number;\r\n  props: Object;\r\n};\r\n/** получение групп контрагентов пользователя доступных для добавления */\r\nfunction* getEmployeeNoContractorGroupsWorker({ payload }: { payload: GetEmployeeNoContractors }) {\r\n  try {\r\n    const { id, props } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const response = yield companyGateway.getEmployeeContractorGroups(id, {\r\n      ...props,\r\n      inverseJoin: 1\r\n    });\r\n    yield put(setEmployeeNoContractorGroups(response));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype DeleteEmployeeContractorGroups = {\r\n  groupId: number;\r\n  employeeId: number;\r\n};\r\n/** удаление группы контрагентов сотрудника */\r\nfunction* deleteEmployeeContractorGroupsWorker({\r\n  payload\r\n}: {\r\n  payload: DeleteEmployeeContractorGroups;\r\n}) {\r\n  try {\r\n    const { groupId, employeeId } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    yield companyGateway.deleteEmployeeContractorGroup(groupId, employeeId);\r\n    yield put(getEmployeeContractorGroups({ id: employeeId }));\r\n    yield put(getEmployeeNoContractorGroups({ id: employeeId }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype AddEmployeeContractorGroups = {\r\n  groupId: number;\r\n  employeeId: number;\r\n};\r\n/** добавление группы контрагентов сотрудника */\r\nfunction* addEmployeeContractorGroupsWorker({ payload }: { payload: AddEmployeeContractorGroups }) {\r\n  try {\r\n    const { groupId, employeeId } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    yield companyGateway.addEmployeeContractorGroup(groupId, employeeId);\r\n    yield put(getEmployeeContractorGroups({ id: employeeId }));\r\n    yield put(getEmployeeNoContractorGroups({ id: employeeId }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype ChangeEmployeeResponsible = {\r\n  employeeId: number;\r\n  responsible: boolean;\r\n};\r\n/** изменение ответственности сотрудника */\r\nfunction* changeEmployeeResponsibleWorker({ payload }: { payload: ChangeEmployeeResponsible }) {\r\n  try {\r\n    const { employeeId, responsible } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    const isResponsible = responsible ? '0' : '1';\r\n    const formData = new FormData();\r\n    formData.append('isResponsible', isResponsible);\r\n\r\n    let response;\r\n    if (responsible) {\r\n      response = yield companyGateway.changeEmployeeResponsible(employeeId, formData);\r\n    } else {\r\n      response = yield companyGateway.changeEmployeeResponsible(employeeId, formData);\r\n    }\r\n    yield Flash.success(response?.data?.message);\r\n    yield put(getEmployee(employeeId));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype ResetEmployeePassword = {\r\n  employeeId: number;\r\n};\r\n/** сбросить пароль сотрудника */\r\nfunction* resetEmployeePasswordWorker({ payload }: { payload: ResetEmployeePassword }) {\r\n  try {\r\n    const { employeeId } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    companyGateway.resetEmployeePassword(employeeId);\r\n    yield Flash.success(\r\n      'На почтовый адрес сотрудника выслано письмо с инструкциями и кодом подтверждения'\r\n    );\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype RejectEmployee = {\r\n  employeeId: number;\r\n  companyId: number;\r\n  params: {};\r\n};\r\n/** отклонить заявку на активацию сотрудника */\r\nfunction* rejectEmployeeWorker({ payload }: { payload: RejectEmployee }) {\r\n  try {\r\n    const { employeeId, companyId, params } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    yield companyGateway.rejectEmployee(employeeId);\r\n    yield put(getStaff({ id: companyId, params }));\r\n    yield put(getStaffWaiting({ id: companyId, params }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype ActiveEmployee = {\r\n  employeeId: number;\r\n  companyId: number;\r\n  params: {};\r\n};\r\n/** принять заявку на активацию сотрудника */\r\nfunction* activeEmployeeWorker({ payload }: { payload: ActiveEmployee }) {\r\n  try {\r\n    const { employeeId, companyId, params } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    companyGateway.activeEmployee(employeeId);\r\n    yield put(getStaff({ id: companyId, params }));\r\n    yield put(getStaffDeactivated({ id: companyId, params }));\r\n    yield put(getStaffWaiting({ id: companyId, params }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n\r\ntype DeactivateEmployee = {\r\n  employeeId: number;\r\n  companyId: number;\r\n  params: {};\r\n};\r\n/** деактивировать сотрудника */\r\nfunction* deactivateEmployeeWorker({ payload }: { payload: DeactivateEmployee }) {\r\n  try {\r\n    const { employeeId, companyId, params } = payload;\r\n    const companyGateway = new CompanyGateway();\r\n    companyGateway.deactivateEmployee(employeeId);\r\n    yield put(getStaff({ id: companyId, params }));\r\n  } catch (err) {\r\n    yield Flash.error('Возникла ошибка');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}