{"ast":null,"code":"import React from'react';import{useDispatch,useSelector}from'react-redux';import{Formik,Form}from'formik';import*as yup from'yup';import{Button,Input}from'@distate/components';import{ContractorTypes,DestinationType}from'../../../helpers/contractors.typings';import{EMPTY_VALUE_ERROR,ALLOWED_ONLY_NUMBER_ERROR}from'../../../../../common/Lbl';import{createRoamingCompanyInvitation}from'../../../store/actions';import{selectSearch}from'../../../store/selectors';/** Форма приглашения ЮЛ в роуминге */export var DestinationRoamingForm=function DestinationRoamingForm(){var _useSelector$errors,_useSelector$errors$m,_useSelector$errors$m2,_useSelector$errors2,_useSelector$errors2$,_useSelector$errors2$2;var dispatch=useDispatch();var innErr=(_useSelector$errors=useSelector(selectSearch).errors)===null||_useSelector$errors===void 0?void 0:(_useSelector$errors$m=_useSelector$errors.messages)===null||_useSelector$errors$m===void 0?void 0:(_useSelector$errors$m2=_useSelector$errors$m.inn)===null||_useSelector$errors$m2===void 0?void 0:_useSelector$errors$m2.errors;var fnsUidErr=(_useSelector$errors2=useSelector(selectSearch).errors)===null||_useSelector$errors2===void 0?void 0:(_useSelector$errors2$=_useSelector$errors2.messages)===null||_useSelector$errors2$===void 0?void 0:(_useSelector$errors2$2=_useSelector$errors2$.fnsUid)===null||_useSelector$errors2$2===void 0?void 0:_useSelector$errors2$2.errors;var _onSubmit=function onSubmit(args){dispatch(createRoamingCompanyInvitation(args));};var validationsSchema=yup.object().shape({fnsUid:yup.string().required(EMPTY_VALUE_ERROR).min(4,'Введите не менее 4 символов').max(46,'Допускается не более 46 символов'),inn:yup.number().typeError(ALLOWED_ONLY_NUMBER_ERROR).positive().integer().required(EMPTY_VALUE_ERROR)});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Formik,{initialValues:{inn:'',fnsUid:'',contractorType:ContractorTypes.legal_entity,destinationType:DestinationType.Roaming},onSubmit:function onSubmit(values){return _onSubmit({type:values.destinationType,fnsUid:values.fnsUid,inn:values.inn});},validateOnBlur:true,validationSchema:validationsSchema},function(_ref){var values=_ref.values,handleSubmit=_ref.handleSubmit,handleChange=_ref.handleChange,errors=_ref.errors,touched=_ref.touched,setFieldTouched=_ref.setFieldTouched;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Input,{required:true,label:\"\\u0418\\u041D\\u041D\",name:\"inn\",value:values.inn,onChange:handleChange,error:!!errors.inn&&touched.inn||innErr,errors:(errors===null||errors===void 0?void 0:errors.inn)&&touched.inn?[errors.inn]:innErr,onBlur:function onBlur(){return setFieldTouched('inn',true);}}),/*#__PURE__*/React.createElement(Input,{required:true,label:\"\\u0418\\u0434\\u0435\\u043D\\u0442\\u0438\\u0444\\u0438\\u043A\\u0430\\u0442\\u043E\\u0440 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\",name:\"fnsUid\",value:values.fnsUid,onChange:handleChange,error:!!errors.fnsUid&&touched.fnsUid||fnsUidErr,errors:(errors===null||errors===void 0?void 0:errors.fnsUid)&&touched.fnsUid?[errors.fnsUid]:fnsUidErr,onBlur:function onBlur(){return setFieldTouched('fnsUid',true);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(e){return handleSubmit;},type:\"submit\"},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u0440\\u0438\\u0433\\u043B\\u0430\\u0448\\u0435\\u043D\\u0438\\u0435\"));}));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/invite-contractor/forms/DestinationRoamingForm.tsx"],"names":["React","useDispatch","useSelector","Formik","Form","yup","Button","Input","ContractorTypes","DestinationType","EMPTY_VALUE_ERROR","ALLOWED_ONLY_NUMBER_ERROR","createRoamingCompanyInvitation","selectSearch","DestinationRoamingForm","dispatch","innErr","errors","messages","inn","fnsUidErr","fnsUid","onSubmit","args","validationsSchema","object","shape","string","required","min","max","number","typeError","positive","integer","contractorType","legal_entity","destinationType","Roaming","values","type","handleSubmit","handleChange","touched","setFieldTouched","e"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Formik, Form } from 'formik';\r\nimport * as yup from 'yup';\r\n\r\nimport { Button, Input } from '@distate/components';\r\nimport { ContractorTypes, DestinationType } from '../../../helpers/contractors.typings';\r\nimport { EMPTY_VALUE_ERROR, ALLOWED_ONLY_NUMBER_ERROR } from '../../../../../common/Lbl';\r\nimport { createRoamingCompanyInvitation } from '../../../store/actions';\r\nimport { selectSearch } from '../../../store/selectors';\r\n\r\n/** Форма приглашения ЮЛ в роуминге */\r\nexport const DestinationRoamingForm = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const innErr = useSelector(selectSearch).errors?.messages?.inn?.errors;\r\n  const fnsUidErr = useSelector(selectSearch).errors?.messages?.fnsUid?.errors;\r\n\r\n  type RoamingCompanyPayload = {\r\n    type: DestinationType;\r\n    fnsUid: string;\r\n    inn: string;\r\n  };\r\n  const onSubmit = (args: RoamingCompanyPayload) => {\r\n    dispatch(createRoamingCompanyInvitation(args));\r\n  };\r\n\r\n  const validationsSchema = yup.object().shape({\r\n    fnsUid: yup\r\n      .string()\r\n      .required(EMPTY_VALUE_ERROR)\r\n      .min(4, 'Введите не менее 4 символов')\r\n      .max(46, 'Допускается не более 46 символов'),\r\n    inn: yup\r\n      .number()\r\n      .typeError(ALLOWED_ONLY_NUMBER_ERROR)\r\n      .positive()\r\n      .integer()\r\n      .required(EMPTY_VALUE_ERROR)\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          inn: '',\r\n          fnsUid: '',\r\n          contractorType: ContractorTypes.legal_entity,\r\n          destinationType: DestinationType.Roaming\r\n        }}\r\n        onSubmit={values =>\r\n          onSubmit({\r\n            type: values.destinationType,\r\n            fnsUid: values.fnsUid,\r\n            inn: values.inn\r\n          })\r\n        }\r\n        validateOnBlur\r\n        validationSchema={validationsSchema}\r\n      >\r\n        {({ values, handleSubmit, handleChange, errors, touched, setFieldTouched }) => (\r\n          <Form>\r\n            <Input\r\n              required\r\n              label=\"ИНН\"\r\n              name=\"inn\"\r\n              value={values.inn}\r\n              onChange={handleChange}\r\n              error={(!!errors.inn && touched.inn) || innErr}\r\n              errors={errors?.inn && touched.inn ? [errors.inn] : innErr}\r\n              onBlur={() => setFieldTouched('inn', true)}\r\n            />\r\n            <Input\r\n              required\r\n              label=\"Идентификатор клиента\"\r\n              name=\"fnsUid\"\r\n              value={values.fnsUid}\r\n              onChange={handleChange}\r\n              error={(!!errors.fnsUid && touched.fnsUid) || fnsUidErr}\r\n              errors={errors?.fnsUid && touched.fnsUid ? [errors.fnsUid] : fnsUidErr}\r\n              onBlur={() => setFieldTouched('fnsUid', true)}\r\n            />\r\n            <br />\r\n            <Button onClick={e => handleSubmit} type={`submit`}>\r\n              Отправить приглашение\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}