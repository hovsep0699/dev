{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import'./style.css';import{Flash}from'../flash';export function DragAndDrop(props){var onUpload=props.onUpload,maxLarge=props.maxLarge;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dragging=_useState2[0],setDragging=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),fileName=_useState4[0],setFileName=_useState4[1];var dropRef=useRef();var onDragOver=function onDragOver(e){e.preventDefault();e.stopPropagation();};/** загрузка перетаскиванием */var onDrop=function onDrop(e){var _e$dataTransfer;e.preventDefault();e.stopPropagation();var files=e===null||e===void 0?void 0:(_e$dataTransfer=e.dataTransfer)===null||_e$dataTransfer===void 0?void 0:_e$dataTransfer.files;if(maxLarge&&maxLarge<files[0].size){Flash.error(\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u0444\\u0430\\u0439\\u043B\\u0430 \\u043D\\u0435 \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0431\\u044B\\u0442\\u044C \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \".concat(maxLarge/1000000,\"MB\"));}else{setFileName(files[0].name);onUpload(files[0]);}setDragging(false);};/** загрузка через кнопку */var _onChange=function onChange(e){var _e$target;e.preventDefault();var files=e===null||e===void 0?void 0:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.files;if(maxLarge&&maxLarge<files[0].size){Flash.error(\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u0444\\u0430\\u0439\\u043B\\u0430 \\u043D\\u0435 \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0431\\u044B\\u0442\\u044C \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \".concat(maxLarge/1000000,\"MB\"));}else{setFileName(files[0].name);onUpload(files[0]);}};/** нажатие на кнопку вызывает клик по инпуту */var onClick=function onClick(){dropRef.current.click();};/** объект входит в зону дропа */var onDragEnter=function onDragEnter(e){e.preventDefault();e.stopPropagation();setDragging(true);};/** объект выходит из зоны дропа */var onDragLeave=function onDragLeave(e){e.preventDefault();e.stopPropagation();setDragging(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{onDragOver:onDragOver,onDrop:onDrop,onDragLeaveCapture:onDragLeave,onDragEnterCapture:onDragEnter,className:\"drag-and-drop-field\",style:{backgroundColor:dragging?'#e5e5e5':'#fff'},onClick:onClick},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:function onChange(e){return _onChange(e);},style:{display:'none'},ref:dropRef}),fileName?fileName:'Загрузить файл'));}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/common/drag-and-drop/DragAndDrop.tsx"],"names":["React","useRef","useState","Flash","DragAndDrop","props","onUpload","maxLarge","dragging","setDragging","fileName","setFileName","dropRef","onDragOver","e","preventDefault","stopPropagation","onDrop","files","dataTransfer","size","error","name","onChange","target","onClick","current","click","onDragEnter","onDragLeave","backgroundColor","display"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport './style.css';\r\nimport { Flash } from '../flash';\r\n\r\ntype Props = {\r\n  onUpload: any;\r\n  maxLarge?: number;\r\n};\r\nexport function DragAndDrop(props: Props) {\r\n  const { onUpload, maxLarge } = props;\r\n\r\n  const [dragging, setDragging] = useState(false);\r\n  const [fileName, setFileName] = useState<string>();\r\n\r\n  const dropRef = useRef<any>();\r\n\r\n  const onDragOver = (e: any) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  /** загрузка перетаскиванием */\r\n  const onDrop = (e: any) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const files = e?.dataTransfer?.files;\r\n\r\n    if (maxLarge && maxLarge < files[0].size) {\r\n      Flash.error(`Размер файла не может быть больше ${maxLarge / 1_000_000}MB`);\r\n    } else {\r\n      setFileName(files[0].name);\r\n      onUpload(files[0]);\r\n    }\r\n\r\n    setDragging(false);\r\n  };\r\n\r\n  /** загрузка через кнопку */\r\n  const onChange = (e: any) => {\r\n    e.preventDefault();\r\n    const files = e?.target?.files;\r\n\r\n    if (maxLarge && maxLarge < files[0].size) {\r\n      Flash.error(`Размер файла не может быть больше ${maxLarge / 1_000_000}MB`);\r\n    } else {\r\n      setFileName(files[0].name);\r\n      onUpload(files[0]);\r\n    }\r\n  };\r\n\r\n  /** нажатие на кнопку вызывает клик по инпуту */\r\n  const onClick = () => {\r\n    dropRef.current.click();\r\n  };\r\n\r\n  /** объект входит в зону дропа */\r\n  const onDragEnter = (e: any) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragging(true);\r\n  };\r\n\r\n  /** объект выходит из зоны дропа */\r\n  const onDragLeave = (e: any) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragging(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onDragOver={onDragOver}\r\n        onDrop={onDrop}\r\n        onDragLeaveCapture={onDragLeave}\r\n        onDragEnterCapture={onDragEnter}\r\n        className=\"drag-and-drop-field\"\r\n        style={{ backgroundColor: dragging ? '#e5e5e5' : '#fff' }}\r\n        onClick={onClick}\r\n      >\r\n        <input type=\"file\" onChange={e => onChange(e)} style={{ display: 'none' }} ref={dropRef} />\r\n        {fileName ? fileName : 'Загрузить файл'}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}