{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Modal}from'@distate/components';import{useDispatch,useSelector}from'react-redux';import{Button,Icons}from'@distate/components';import{selectNoStaffForRoleRecordsTotal,selectNoStaffForRoleRows}from'../../../store/selectors';import{joinNoEmptyValues}from'../../../../../helpers/heplers';import{Pagination}from'../../../../../common/pagination';import{addStaffForRole,getNoStaffForRole}from'../../../store/actions';/** модалка добавления сотрудников в роль */export var SubmodalAddEmployee=function SubmodalAddEmployee(props){var id=props.id,isVisible=props.isVisible,_hide=props.hide;var staff=useSelector(selectNoStaffForRoleRows);var recordsTotal=useSelector(selectNoStaffForRoleRecordsTotal);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),offset=_useState2[0],setOffset=_useState2[1];var dispatch=useDispatch();useEffect(function(){id&&dispatch(getNoStaffForRole({groupId:id,props:{offset:offset}}));},[dispatch,id,offset]);var onAdd=function onAdd(employeeId){dispatch(addStaffForRole({groupId:id,employeeId:employeeId,props:{offset:offset}}));};return/*#__PURE__*/React.createElement(Modal,{hide:function hide(){return _hide();},isVisible:isVisible,zIndex:1001},/*#__PURE__*/React.createElement(Modal.Header,{title:'Добавление элементов'}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0424\\u0418\\u041E\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,staff===null||staff===void 0?void 0:staff.map(function(employee){var name=employee.name,surname=employee.surname,patronymic=employee.patronymic,position=employee.position,id=employee.id;var fio=joinNoEmptyValues([surname,name,patronymic]);return/*#__PURE__*/React.createElement(\"tr\",{key:id},/*#__PURE__*/React.createElement(\"td\",null,fio),/*#__PURE__*/React.createElement(\"td\",null,position),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconCheck,{fill:\"currentColor\"}),onClick:function onClick(){return onAdd(id);}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{align:\"right\",colSpan:3},/*#__PURE__*/React.createElement(Pagination,{listLength:recordsTotal,setOffset:setOffset})))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/company/components/roles/modal-role-card/SubmodalAddEmployee.tsx"],"names":["React","useState","useEffect","Modal","useDispatch","useSelector","Button","Icons","selectNoStaffForRoleRecordsTotal","selectNoStaffForRoleRows","joinNoEmptyValues","Pagination","addStaffForRole","getNoStaffForRole","SubmodalAddEmployee","props","id","isVisible","hide","staff","recordsTotal","offset","setOffset","dispatch","groupId","onAdd","employeeId","map","employee","name","surname","patronymic","position","fio"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Modal } from '@distate/components';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Icons } from '@distate/components';\r\nimport {\r\n  selectNoStaffForRoleRecordsTotal,\r\n  selectNoStaffForRoleRows\r\n} from '../../../store/selectors';\r\nimport { joinNoEmptyValues } from '../../../../../helpers/heplers';\r\nimport { Pagination } from '../../../../../common/pagination';\r\nimport { addStaffForRole, getNoStaffForRole } from '../../../store/actions';\r\n\r\ntype Props = {\r\n  id: number;\r\n  hide: () => void;\r\n  isVisible: boolean;\r\n};\r\n\r\n/** модалка добавления сотрудников в роль */\r\nexport const SubmodalAddEmployee = (props: Props) => {\r\n  const { id, isVisible, hide } = props;\r\n\r\n  const staff = useSelector(selectNoStaffForRoleRows);\r\n  const recordsTotal = useSelector(selectNoStaffForRoleRecordsTotal);\r\n\r\n  const [offset, setOffset] = useState(0);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    id && dispatch(getNoStaffForRole({ groupId: id, props: { offset } }));\r\n  }, [dispatch, id, offset]);\r\n\r\n  const onAdd = (employeeId: number) => {\r\n    dispatch(addStaffForRole({ groupId: id, employeeId, props: { offset } }));\r\n  };\r\n\r\n  return (\r\n    <Modal hide={() => hide()} isVisible={isVisible} zIndex={1001}>\r\n      <Modal.Header title={'Добавление элементов'} />\r\n\r\n      <Modal.Body>\r\n        <table className=\"table\">\r\n          <thead className=\"common-table-head\">\r\n            <tr>\r\n              <td>ФИО</td>\r\n              <td>Должность</td>\r\n              <td></td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {staff?.map(employee => {\r\n              const { name, surname, patronymic, position, id } = employee;\r\n              const fio = joinNoEmptyValues([surname, name, patronymic]);\r\n              return (\r\n                <tr key={id}>\r\n                  <td>{fio}</td>\r\n                  <td>{position}</td>\r\n                  <td align=\"right\">\r\n                    <Button\r\n                      icon={<Icons.IconCheck fill=\"currentColor\" />}\r\n                      onClick={() => onAdd(id)}\r\n                    >\r\n                      Добавить\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td align=\"right\" colSpan={3}>\r\n                <Pagination listLength={recordsTotal} setOffset={setOffset} />\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}