{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useSelector,useDispatch}from'react-redux';import{ContractorTypes,DestinationType,IncomeContractorStatus}from'../../helpers/contractors.typings';import{Pagination}from'../../../../common/pagination';import{getWaitingAnswerContractor}from'../../store/actions';import{waitingAnswer}from'../../store/selectors';import{WaitingAnswerTools}from'./WaitingAnswerTools';import{InfoBadge}from'../../../../common/info-badge';import{TruncateText}from'../../../../common/truncate-text';import{arrToString}from'../../helpers/contractors.helpers';export var WaitingAnswerContractor=function WaitingAnswerContractor(){var dispatch=useDispatch();var _useSelector=useSelector(waitingAnswer),_useSelector$rows=_useSelector.rows,contractorList=_useSelector$rows===void 0?[]:_useSelector$rows,recordsTotal=_useSelector.recordsTotal,_useSelector$offset=_useSelector.offset,offsetSelector=_useSelector$offset===void 0?0:_useSelector$offset,_useSelector$searchPa=_useSelector.searchParams,searchParams=_useSelector$searchPa===void 0?{}:_useSelector$searchPa;var _React$useState=React.useState(offsetSelector),_React$useState2=_slicedToArray(_React$useState,2),offset=_React$useState2[0],setOffset=_React$useState2[1];React.useEffect(function(){dispatch(getWaitingAnswerContractor(_objectSpread(_objectSpread({},searchParams),{},{offset:offset})));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dispatch,offset]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(WaitingAnswerTools,null),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u041A\\u043E\\u043D\\u0442\\u0440\\u0430\\u0433\\u0435\\u043D\\u0442\"),/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},\"\\u0422\\u0438\\u043F\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F\"))),/*#__PURE__*/React.createElement(\"tbody\",null,contractorList.map(function(item){var id=item.id,surname=item.surname,name=item.name,patronymic=item.patronymic,title=item.title,inn=item.inn,contractorType=item.contractorType,fnsUid=item.fnsUid,network=item.network,itemStatus=item.status,errorMessage=item.errorMessage,createdAt=item.createdAt;/** для колонки Контрагент */var contractor;if(contractorType===ContractorTypes.natural_entity){contractor=arrToString([surname,name,patronymic]);}else{contractor=arrToString([title,inn]);}/** для колонки Дополтенельно */var additionally=arrToString([fnsUid,network]);var isError=itemStatus===IncomeContractorStatus.error;var type;switch(item.type){case null:case DestinationType.Local:type='Локальный';break;case DestinationType.Roaming:type='Роуминг';break;case DestinationType.LoaclRoaming:type='Локальный Роуминг';break;case DestinationType.Hub1c:type='1С-ЭДО';break;case DestinationType.Connector:type='Коннектор';break;default:type='';}var status;switch(itemStatus){case IncomeContractorStatus.processed:status='Обработано';break;case IncomeContractorStatus.created:status='Ожидание';break;case IncomeContractorStatus.error:status='Ошибка';break;default:status='';}return/*#__PURE__*/React.createElement(\"tr\",{key:id},/*#__PURE__*/React.createElement(\"td\",null,contractor&&/*#__PURE__*/React.createElement(TruncateText,{text:contractor})),/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},type),/*#__PURE__*/React.createElement(\"td\",null,isError?/*#__PURE__*/React.createElement(InfoBadge,{str:status,title:errorMessage||status}):status),/*#__PURE__*/React.createElement(\"td\",null,(fnsUid||network)&&/*#__PURE__*/React.createElement(TruncateText,{text:additionally})),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},createdAt));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:5},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{listLength:recordsTotal,setOffset:setOffset})))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/waiting-answer/WaitingAnswerContractor.tsx"],"names":["React","useSelector","useDispatch","ContractorTypes","DestinationType","IncomeContractorStatus","Pagination","getWaitingAnswerContractor","waitingAnswer","WaitingAnswerTools","InfoBadge","TruncateText","arrToString","WaitingAnswerContractor","dispatch","rows","contractorList","recordsTotal","offset","offsetSelector","searchParams","useState","setOffset","useEffect","map","item","id","surname","name","patronymic","title","inn","contractorType","fnsUid","network","itemStatus","status","errorMessage","createdAt","contractor","natural_entity","additionally","isError","error","type","Local","Roaming","LoaclRoaming","Hub1c","Connector","processed","created"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport {\r\n  ContractorTypes,\r\n  DestinationType,\r\n  IncomeContractorStatus\r\n} from '../../helpers/contractors.typings';\r\nimport { Pagination } from '../../../../common/pagination';\r\nimport { getWaitingAnswerContractor } from '../../store/actions';\r\nimport { waitingAnswer } from '../../store/selectors';\r\nimport { WaitingAnswerTools } from './WaitingAnswerTools';\r\nimport { InfoBadge } from '../../../../common/info-badge';\r\nimport { TruncateText } from '../../../../common/truncate-text';\r\nimport { arrToString } from '../../helpers/contractors.helpers';\r\n\r\nexport const WaitingAnswerContractor = () => {\r\n  const dispatch = useDispatch();\r\n  const {\r\n    rows: contractorList = [],\r\n    recordsTotal,\r\n    offset: offsetSelector = 0,\r\n    searchParams = {}\r\n  } = useSelector(waitingAnswer);\r\n  const [offset, setOffset] = React.useState(offsetSelector);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getWaitingAnswerContractor({ ...searchParams, offset }));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, offset]);\r\n\r\n  return (\r\n    <>\r\n      <WaitingAnswerTools />\r\n      <table className=\"table\">\r\n        <thead className=\"common-table-head\">\r\n          <tr>\r\n            <td>Контрагент</td>\r\n            <td align=\"center\">Тип</td>\r\n            <td>Статус</td>\r\n            <td>Дополнительно</td>\r\n            <td align=\"right\">Дата создания</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {contractorList.map(item => {\r\n            const {\r\n              id,\r\n              surname,\r\n              name,\r\n              patronymic,\r\n              title,\r\n              inn,\r\n              contractorType,\r\n              fnsUid,\r\n              network,\r\n              status: itemStatus,\r\n              errorMessage,\r\n              createdAt\r\n            } = item;\r\n\r\n            /** для колонки Контрагент */\r\n            let contractor;\r\n            if (contractorType === ContractorTypes.natural_entity) {\r\n              contractor = arrToString([surname, name, patronymic]);\r\n            } else {\r\n              contractor = arrToString([title, inn]);\r\n            }\r\n\r\n            /** для колонки Дополтенельно */\r\n            const additionally = arrToString([fnsUid, network]);\r\n\r\n            const isError = itemStatus === IncomeContractorStatus.error;\r\n\r\n            let type;\r\n            switch (item.type) {\r\n              case null:\r\n              case DestinationType.Local:\r\n                type = 'Локальный';\r\n                break;\r\n              case DestinationType.Roaming:\r\n                type = 'Роуминг';\r\n                break;\r\n              case DestinationType.LoaclRoaming:\r\n                type = 'Локальный Роуминг';\r\n                break;\r\n              case DestinationType.Hub1c:\r\n                type = '1С-ЭДО';\r\n                break;\r\n              case DestinationType.Connector:\r\n                type = 'Коннектор';\r\n                break;\r\n              default:\r\n                type = '';\r\n            }\r\n\r\n            let status;\r\n            switch (itemStatus) {\r\n              case IncomeContractorStatus.processed:\r\n                status = 'Обработано';\r\n                break;\r\n              case IncomeContractorStatus.created:\r\n                status = 'Ожидание';\r\n                break;\r\n              case IncomeContractorStatus.error:\r\n                status = 'Ошибка';\r\n                break;\r\n              default:\r\n                status = '';\r\n            }\r\n\r\n            return (\r\n              <tr key={id}>\r\n                <td>{contractor && <TruncateText text={contractor} />}</td>\r\n                <td align=\"center\">{type}</td>\r\n                <td>\r\n                  {isError ? <InfoBadge str={status} title={errorMessage || status} /> : status}\r\n                </td>\r\n                <td>{(fnsUid || network) && <TruncateText text={additionally!} />}</td>\r\n                <td align=\"right\">{createdAt}</td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td colSpan={5}>\r\n              <div className=\"pagination-right\">\r\n                <Pagination listLength={recordsTotal} setOffset={setOffset} />\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}