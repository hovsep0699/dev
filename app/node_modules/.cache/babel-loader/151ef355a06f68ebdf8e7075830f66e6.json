{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{Button,ButtonKinds,Icons,Modal}from'@distate/components';import{DELETE,CANCEL}from'../../../../common/Lbl';import{HTMLContainer}from'./folders.style';import{FoldersItem}from'./folders.item';import{FolderForm}from'../form';export var Folders=React.memo(function(_ref){var link=_ref.link,items=_ref.items,offVisible=_ref.offVisible,onRemove=_ref.onRemove,onClick=_ref.onClick,onSubmit=_ref.onSubmit,isVisible=_ref.isVisible;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),removeId=_React$useState2[0],setRemoveId=_React$useState2[1];var _React$useState3=React.useState(items),_React$useState4=_slicedToArray(_React$useState3,2),list=_React$useState4[0],setList=_React$useState4[1];React.useEffect(function(){setList(items.map(function(item){return _objectSpread(_objectSpread({},item),{},{editor:false,visible:offVisible?true:item.visible});}));},[items,offVisible]);var _React$useState5=React.useState(isVisible),_React$useState6=_slicedToArray(_React$useState5,2),openModal=_React$useState6[0],setOpenModal=_React$useState6[1];var handleOnClicRemove=function handleOnClicRemove(id){setOpenModal(true);setRemoveId(id);};var handleOnClickEdit=function handleOnClickEdit(id){var newList=list.map(function(item){if(item.id===id){item.editor=true;}else{item.editor=false;}return item;});setList(newList);};var handleOnSubmit=function handleOnSubmit(values){var id=values.id;var newList=list.map(function(item){return item.id===id?_objectSpread(_objectSpread({},values),{},{id:id,editor:false}):item;});setList(newList);if(onSubmit)onSubmit(values);};var handleOnRemove=function handleOnRemove(){if(onRemove&&removeId)onRemove(removeId);setOpenModal(false);setRemoveId('');};return/*#__PURE__*/React.createElement(HTMLContainer,null,list.map(function(item){var editor=item.editor;if(editor){return/*#__PURE__*/React.createElement(FolderForm,{dark:true,key:item.id,onSubmit:handleOnSubmit,defaultValue:{id:item.id,title:item.title}});}return/*#__PURE__*/React.createElement(FoldersItem,{key:item.id,link:link,item:item,onEdit:handleOnClickEdit,onClick:onClick,onRemove:handleOnClicRemove});}),/*#__PURE__*/React.createElement(Modal,{hide:function hide(){return setOpenModal(false);},isVisible:openModal},/*#__PURE__*/React.createElement(Modal.Header,{title:'Вы действительно хотите удалить эту папку?'}),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Primary,icon:/*#__PURE__*/React.createElement(Icons.IconCheck,null),onClick:handleOnRemove},DELETE),/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconClose,null),onClick:function onClick(){return setOpenModal(false);}},CANCEL))));});","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/container/folder/components/folders/folders.tsx"],"names":["React","Button","ButtonKinds","Icons","Modal","DELETE","CANCEL","HTMLContainer","FoldersItem","FolderForm","Folders","memo","link","items","offVisible","onRemove","onClick","onSubmit","isVisible","useState","removeId","setRemoveId","list","setList","useEffect","map","item","editor","visible","openModal","setOpenModal","handleOnClicRemove","id","handleOnClickEdit","newList","handleOnSubmit","values","handleOnRemove","title","Primary"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,WAAjB,CAA8BC,KAA9B,CAAqCC,KAArC,KAAkD,qBAAlD,CAEA,OAASC,MAAT,CAAiBC,MAAjB,KAA+B,wBAA/B,CAEA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,UAAT,KAA2B,SAA3B,CAiBA,MAAO,IAAMC,CAAAA,OAA2B,CAAGV,KAAK,CAACW,IAAN,CACzC,cAAyE,IAAtEC,CAAAA,IAAsE,MAAtEA,IAAsE,CAAhEC,KAAgE,MAAhEA,KAAgE,CAAzDC,UAAyD,MAAzDA,UAAyD,CAA7CC,QAA6C,MAA7CA,QAA6C,CAAnCC,OAAmC,MAAnCA,OAAmC,CAA1BC,QAA0B,MAA1BA,QAA0B,CAAhBC,SAAgB,MAAhBA,SAAgB,qBACvClB,KAAK,CAACmB,QAAN,CAAe,EAAf,CADuC,oDAChEC,QADgE,qBACtDC,WADsD,0CAG/CrB,KAAK,CAACmB,QAAN,CAAeN,KAAf,CAH+C,qDAGhES,IAHgE,qBAG1DC,OAH0D,qBAKvEvB,KAAK,CAACwB,SAAN,CAAgB,UAAM,CACpBD,OAAO,CACLV,KAAK,CAACY,GAAN,CAAU,SAAAC,IAAI,wCACTA,IADS,MAEZC,MAAM,CAAE,KAFI,CAGZC,OAAO,CAAEd,UAAU,CAAG,IAAH,CAAUY,IAAI,CAACE,OAHtB,IAAd,CADK,CAAP,CAOD,CARD,CAQG,CAACf,KAAD,CAAQC,UAAR,CARH,EALuE,qBAerCd,KAAK,CAACmB,QAAN,CAAeD,SAAf,CAfqC,qDAehEW,SAfgE,qBAerDC,YAfqD,qBAiBvE,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,EAAD,CAAgB,CACzCF,YAAY,CAAC,IAAD,CAAZ,CACAT,WAAW,CAACW,EAAD,CAAX,CACD,CAHD,CAKA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACD,EAAD,CAAgB,CACxC,GAAME,CAAAA,OAAO,CAAGZ,IAAI,CAACG,GAAL,CAAS,SAAAC,IAAI,CAAI,CAC/B,GAAIA,IAAI,CAACM,EAAL,GAAYA,EAAhB,CAAoB,CAClBN,IAAI,CAACC,MAAL,CAAc,IAAd,CACD,CAFD,IAEO,CACLD,IAAI,CAACC,MAAL,CAAc,KAAd,CACD,CAED,MAAOD,CAAAA,IAAP,CACD,CARe,CAAhB,CAUAH,OAAO,CAACW,OAAD,CAAP,CACD,CAZD,CAcA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,MAAD,CAA8B,IAC3CJ,CAAAA,EAD2C,CACpCI,MADoC,CAC3CJ,EAD2C,CAGnD,GAAME,CAAAA,OAAO,CAAGZ,IAAI,CAACG,GAAL,CAAS,SAAAC,IAAI,QAAKA,CAAAA,IAAI,CAACM,EAAL,GAAYA,EAAZ,gCAAsBI,MAAtB,MAA8BJ,EAAE,CAAFA,EAA9B,CAAkCL,MAAM,CAAE,KAA1C,GAAoDD,IAAzD,EAAb,CAAhB,CACAH,OAAO,CAACW,OAAD,CAAP,CAEA,GAAIjB,QAAJ,CAAcA,QAAQ,CAACmB,MAAD,CAAR,CACf,CAPD,CASA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3B,GAAItB,QAAQ,EAAIK,QAAhB,CAA0BL,QAAQ,CAACK,QAAD,CAAR,CAE1BU,YAAY,CAAC,KAAD,CAAZ,CACAT,WAAW,CAAC,EAAD,CAAX,CACD,CALD,CAOA,mBACE,oBAAC,aAAD,MACGC,IAAI,CAACG,GAAL,CAAS,SAAAC,IAAI,CAAI,IACRC,CAAAA,MADQ,CACGD,IADH,CACRC,MADQ,CAGhB,GAAIA,MAAJ,CAAY,CACV,mBACE,oBAAC,UAAD,EACE,IAAI,KADN,CAEE,GAAG,CAAED,IAAI,CAACM,EAFZ,CAGE,QAAQ,CAAEG,cAHZ,CAIE,YAAY,CAAE,CACZH,EAAE,CAAEN,IAAI,CAACM,EADG,CAEZM,KAAK,CAAEZ,IAAI,CAACY,KAFA,CAJhB,EADF,CAWD,CAED,mBACE,oBAAC,WAAD,EACE,GAAG,CAAEZ,IAAI,CAACM,EADZ,CAEE,IAAI,CAAEpB,IAFR,CAGE,IAAI,CAAEc,IAHR,CAIE,MAAM,CAAEO,iBAJV,CAKE,OAAO,CAAEjB,OALX,CAME,QAAQ,CAAEe,kBANZ,EADF,CAUD,CA3BA,CADH,cA6BE,oBAAC,KAAD,EAAO,IAAI,CAAE,sBAAMD,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAAb,CAAwC,SAAS,CAAED,SAAnD,eACE,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAE,4CAArB,EADF,cAEE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,MAAD,EAAQ,IAAI,CAAE3B,WAAW,CAACqC,OAA1B,CAAmC,IAAI,cAAE,oBAAC,KAAD,CAAO,SAAP,MAAzC,CAA8D,OAAO,CAAEF,cAAvE,EACGhC,MADH,CADF,cAIE,oBAAC,MAAD,EAAQ,IAAI,cAAE,oBAAC,KAAD,CAAO,SAAP,MAAd,CAAmC,OAAO,CAAE,yBAAMyB,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAA5C,EACGxB,MADH,CAJF,CAFF,CA7BF,CADF,CA2CD,CAhGwC,CAApC","sourcesContent":["import React from 'react';\r\nimport { Button, ButtonKinds, Icons, Modal } from '@distate/components';\r\n\r\nimport { DELETE, CANCEL } from '../../../../common/Lbl';\r\nimport { Folder, FormSubmitAction } from '../../helpers/folder.typings';\r\nimport { HTMLContainer } from './folders.style';\r\nimport { FoldersItem } from './folders.item';\r\nimport { FolderForm } from '../form';\r\n\r\ntype IFolder = {\r\n  editor?: boolean;\r\n} & Folder;\r\n\r\nexport interface IFolders {\r\n  isVisible?: boolean;\r\n  isLoading?: boolean;\r\n  offVisible?: boolean;\r\n  onClick?: (id: string) => void;\r\n  onRemove?: (id: string) => void;\r\n  onSubmit?: (values: FormSubmitAction) => void;\r\n  link: string;\r\n  items: IFolder[];\r\n}\r\n\r\nexport const Folders: React.FC<IFolders> = React.memo(\r\n  ({ link, items, offVisible, onRemove, onClick, onSubmit, isVisible }) => {\r\n    const [removeId, setRemoveId] = React.useState('');\r\n\r\n    const [list, setList] = React.useState(items);\r\n\r\n    React.useEffect(() => {\r\n      setList(\r\n        items.map(item => ({\r\n          ...item,\r\n          editor: false,\r\n          visible: offVisible ? true : item.visible\r\n        }))\r\n      );\r\n    }, [items, offVisible]);\r\n\r\n    const [openModal, setOpenModal] = React.useState(isVisible);\r\n\r\n    const handleOnClicRemove = (id: string) => {\r\n      setOpenModal(true);\r\n      setRemoveId(id);\r\n    };\r\n\r\n    const handleOnClickEdit = (id: string) => {\r\n      const newList = list.map(item => {\r\n        if (item.id === id) {\r\n          item.editor = true;\r\n        } else {\r\n          item.editor = false;\r\n        }\r\n\r\n        return item;\r\n      });\r\n\r\n      setList(newList);\r\n    };\r\n\r\n    const handleOnSubmit = (values: FormSubmitAction) => {\r\n      const { id } = values;\r\n\r\n      const newList = list.map(item => (item.id === id ? { ...values, id, editor: false } : item));\r\n      setList(newList);\r\n\r\n      if (onSubmit) onSubmit(values);\r\n    };\r\n\r\n    const handleOnRemove = () => {\r\n      if (onRemove && removeId) onRemove(removeId);\r\n\r\n      setOpenModal(false);\r\n      setRemoveId('');\r\n    };\r\n\r\n    return (\r\n      <HTMLContainer>\r\n        {list.map(item => {\r\n          const { editor } = item;\r\n\r\n          if (editor) {\r\n            return (\r\n              <FolderForm\r\n                dark\r\n                key={item.id}\r\n                onSubmit={handleOnSubmit}\r\n                defaultValue={{\r\n                  id: item.id,\r\n                  title: item.title\r\n                }}\r\n              />\r\n            );\r\n          }\r\n\r\n          return (\r\n            <FoldersItem\r\n              key={item.id}\r\n              link={link}\r\n              item={item}\r\n              onEdit={handleOnClickEdit}\r\n              onClick={onClick}\r\n              onRemove={handleOnClicRemove}\r\n            />\r\n          );\r\n        })}\r\n        <Modal hide={() => setOpenModal(false)} isVisible={openModal}>\r\n          <Modal.Header title={'Вы действительно хотите удалить эту папку?'} />\r\n          <Modal.Footer>\r\n            <Button kind={ButtonKinds.Primary} icon={<Icons.IconCheck />} onClick={handleOnRemove}>\r\n              {DELETE}\r\n            </Button>\r\n            <Button icon={<Icons.IconClose />} onClick={() => setOpenModal(false)}>\r\n              {CANCEL}\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </HTMLContainer>\r\n    );\r\n  }\r\n);\r\n"]},"metadata":{},"sourceType":"module"}