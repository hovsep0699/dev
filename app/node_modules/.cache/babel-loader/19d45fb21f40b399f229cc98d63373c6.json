{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Icons,Button,ButtonKinds,Input,CheckBox}from'@distate/components';import'./style.css';import{RadioButton}from'../../../../common/radio-button';import{isTariffEditingSelector,currentTariffSelector,tariffStatusesSelector,tariffErrorsSelector}from'../../store/selects';import{TariffTypeSwitcher}from'./TariffTypeSwitcher';import{TariffStatusSystemName}from'../../helpers/typings';import{ViewAdditionState}from'./TariffCard';import{LocksSettingsSwitcher}from'./LocksSettingsSwitcher';import{TariffListTable}from'./TariffListTable';import{editTariff,setIsTariffEditing,setTariffErrors}from'../../store/actions';import{yearDeclension,monthDeclension,dayDeclension}from'../../../../helpers/declension';/** Информация о тарифе в каторчке тарифа */export var TariffInfo=function TariffInfo(){var _tariff$tariff,_tariff$tariff2,_tariff$tariff3,_tariff$tariff3$type,_tariff$tariff4,_tariff$tariff4$statu,_tariff$locks_setting,_tariff$locks_setting2,_tariff$locks_setting3,_tariff$locks_setting4,_tariff$tariff5,_tariff$tariff6,_tariff$tariff6$statu,_tariffErrors$tariff,_tariffErrors$tariff2,_tariff$pricing11,_tariffErrors$pricing;var dispatch=useDispatch();var tariff=useSelector(currentTariffSelector);var tariffStatuses=useSelector(tariffStatusesSelector);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),tariffValues=_useState2[0],setTariffValues=_useState2[1];var periodicalCost=tariffValues.periodicalCost,nextTariffTitle=tariffValues.nextTariffTitle,nextTariffType=tariffValues.nextTariffType,year=tariffValues.year,month=tariffValues.month,day=tariffValues.day;var id=tariff===null||tariff===void 0?void 0:(_tariff$tariff=tariff.tariff)===null||_tariff$tariff===void 0?void 0:_tariff$tariff.id;var title=tariff===null||tariff===void 0?void 0:(_tariff$tariff2=tariff.tariff)===null||_tariff$tariff2===void 0?void 0:_tariff$tariff2.title;var tariffTypeTitle=tariff===null||tariff===void 0?void 0:(_tariff$tariff3=tariff.tariff)===null||_tariff$tariff3===void 0?void 0:(_tariff$tariff3$type=_tariff$tariff3.type)===null||_tariff$tariff3$type===void 0?void 0:_tariff$tariff3$type.title;var statusSystemName=tariff===null||tariff===void 0?void 0:(_tariff$tariff4=tariff.tariff)===null||_tariff$tariff4===void 0?void 0:(_tariff$tariff4$statu=_tariff$tariff4.status)===null||_tariff$tariff4$statu===void 0?void 0:_tariff$tariff4$statu.systemName;var lockSettingActionType=tariff===null||tariff===void 0?void 0:(_tariff$locks_setting=tariff.locks_settings)===null||_tariff$locks_setting===void 0?void 0:(_tariff$locks_setting2=_tariff$locks_setting.type)===null||_tariff$locks_setting2===void 0?void 0:_tariff$locks_setting2.systemName;var lockSettingActionTitle=tariff===null||tariff===void 0?void 0:(_tariff$locks_setting3=tariff.locks_settings)===null||_tariff$locks_setting3===void 0?void 0:(_tariff$locks_setting4=_tariff$locks_setting3.type)===null||_tariff$locks_setting4===void 0?void 0:_tariff$locks_setting4.title;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),activeStatusId=_useState4[0],setActiveStatusId=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),hideStatusId=_useState6[0],setHideStatusId=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isPromotion=_useState8[0],setIsPromotion=_useState8[1];var _useState9=useState('0.00'),_useState10=_slicedToArray(_useState9,2),connectionCostInput=_useState10[0],setConnectionCostInput=_useState10[1];var _useState11=useState('0.00'),_useState12=_slicedToArray(_useState11,2),periodicalCostInput=_useState12[0],setPeriodicalCostInput=_useState12[1];useEffect(function(){var _tariff$pricing,_tariff$pricing2;setConnectionCostInput(Number((tariff===null||tariff===void 0?void 0:(_tariff$pricing=tariff.pricing)===null||_tariff$pricing===void 0?void 0:_tariff$pricing.connectionCost)/100).toFixed(2));setPeriodicalCostInput(Number((tariff===null||tariff===void 0?void 0:(_tariff$pricing2=tariff.pricing)===null||_tariff$pricing2===void 0?void 0:_tariff$pricing2.periodicalCost)/100).toFixed(2));},[tariff]);var tariffErrors=useSelector(tariffErrorsSelector);var isEditing=useSelector(isTariffEditingSelector);/** свойства для переключения радиокнопки отображать или нет дополнительные настройки */var _useState13=useState(ViewAdditionState.hide),_useState14=_slicedToArray(_useState13,2),viewAddition=_useState14[0],setViewAddition=_useState14[1];var periodYear=year&&yearDeclension(+year);var periodMonth=month&&monthDeclension(+month);var periodDay=day&&dayDeclension(+day);var periodResult=[periodYear,periodMonth,periodDay].filter(function(item){return item;}).join(' ');var isAllowEditing=(tariff===null||tariff===void 0?void 0:(_tariff$tariff5=tariff.tariff)===null||_tariff$tariff5===void 0?void 0:_tariff$tariff5.companiesCount)===0&&(tariff===null||tariff===void 0?void 0:(_tariff$tariff6=tariff.tariff)===null||_tariff$tariff6===void 0?void 0:(_tariff$tariff6$statu=_tariff$tariff6.status)===null||_tariff$tariff6$statu===void 0?void 0:_tariff$tariff6$statu.id)===1;useEffect(function(){var _tariff$tariff7,_tariff$tariff7$type,_tariff$tariff8,_tariff$tariff8$statu,_tariff$pricing3,_tariff$pricing4,_tariff$pricing5,_tariff$pricing5$peri,_tariff$pricing6,_tariff$pricing6$peri,_tariff$pricing7,_tariff$pricing7$peri,_tariff$pricing8,_tariff$locks_setting5,_tariff$locks_setting6,_tariff$locks_setting7,_tariff$locks_setting8,_tariff$locks_setting9,_tariff$locks_setting10,_tariff$locks_setting11,_tariff$locks_setting12,_tariff$locks_setting13,_tariff$tariff9;var statusTitle=statusSystemName!==TariffStatusSystemName.active?'Не отображается в списке для подключения':'Отображается в списке для подключения';setTariffValues({id:id,title:title,tariffTypeTitle:tariffTypeTitle,statusTitle:statusTitle,tariffTypeId:tariff===null||tariff===void 0?void 0:(_tariff$tariff7=tariff.tariff)===null||_tariff$tariff7===void 0?void 0:(_tariff$tariff7$type=_tariff$tariff7.type)===null||_tariff$tariff7$type===void 0?void 0:_tariff$tariff7$type.id,status:tariff===null||tariff===void 0?void 0:(_tariff$tariff8=tariff.tariff)===null||_tariff$tariff8===void 0?void 0:(_tariff$tariff8$statu=_tariff$tariff8.status)===null||_tariff$tariff8$statu===void 0?void 0:_tariff$tariff8$statu.id,connectionCost:tariff===null||tariff===void 0?void 0:(_tariff$pricing3=tariff.pricing)===null||_tariff$pricing3===void 0?void 0:_tariff$pricing3.connectionCost,periodicalCost:tariff===null||tariff===void 0?void 0:(_tariff$pricing4=tariff.pricing)===null||_tariff$pricing4===void 0?void 0:_tariff$pricing4.periodicalCost,year:tariff===null||tariff===void 0?void 0:(_tariff$pricing5=tariff.pricing)===null||_tariff$pricing5===void 0?void 0:(_tariff$pricing5$peri=_tariff$pricing5.period)===null||_tariff$pricing5$peri===void 0?void 0:_tariff$pricing5$peri.year,month:tariff===null||tariff===void 0?void 0:(_tariff$pricing6=tariff.pricing)===null||_tariff$pricing6===void 0?void 0:(_tariff$pricing6$peri=_tariff$pricing6.period)===null||_tariff$pricing6$peri===void 0?void 0:_tariff$pricing6$peri.month,day:tariff===null||tariff===void 0?void 0:(_tariff$pricing7=tariff.pricing)===null||_tariff$pricing7===void 0?void 0:(_tariff$pricing7$peri=_tariff$pricing7.period)===null||_tariff$pricing7$peri===void 0?void 0:_tariff$pricing7$peri.day,isPromotion:tariff===null||tariff===void 0?void 0:(_tariff$pricing8=tariff.pricing)===null||_tariff$pricing8===void 0?void 0:_tariff$pricing8.isPromotion,locksSettingsType:tariff===null||tariff===void 0?void 0:(_tariff$locks_setting5=tariff.locks_settings)===null||_tariff$locks_setting5===void 0?void 0:(_tariff$locks_setting6=_tariff$locks_setting5.type)===null||_tariff$locks_setting6===void 0?void 0:_tariff$locks_setting6.id,nextTariffTitle:tariff===null||tariff===void 0?void 0:(_tariff$locks_setting7=tariff.locks_settings)===null||_tariff$locks_setting7===void 0?void 0:(_tariff$locks_setting8=_tariff$locks_setting7.nextTariff)===null||_tariff$locks_setting8===void 0?void 0:_tariff$locks_setting8.title,nextTariffType:tariff===null||tariff===void 0?void 0:(_tariff$locks_setting9=tariff.locks_settings)===null||_tariff$locks_setting9===void 0?void 0:(_tariff$locks_setting10=_tariff$locks_setting9.nextTariff)===null||_tariff$locks_setting10===void 0?void 0:(_tariff$locks_setting11=_tariff$locks_setting10.type)===null||_tariff$locks_setting11===void 0?void 0:_tariff$locks_setting11.title,nextTariffId:tariff===null||tariff===void 0?void 0:(_tariff$locks_setting12=tariff.locks_settings)===null||_tariff$locks_setting12===void 0?void 0:(_tariff$locks_setting13=_tariff$locks_setting12.nextTariff)===null||_tariff$locks_setting13===void 0?void 0:_tariff$locks_setting13.id,companiesCount:tariff===null||tariff===void 0?void 0:(_tariff$tariff9=tariff.tariff)===null||_tariff$tariff9===void 0?void 0:_tariff$tariff9.companiesCount});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[viewAddition,id]);useEffect(function(){/** переключатель редактирования */dispatch(setIsTariffEditing({isTariffEditing:false}));/** переключатель - отобразить Дополнительно */setViewAddition(ViewAdditionState.hide);/** обнуление ошибок */dispatch(setTariffErrors({tariffErrors:undefined}));},[dispatch,id]);useEffect(function(){var _tariffStatuses$find=tariffStatuses.find(function(item){return item.system_name===TariffStatusSystemName.active;}),activeId=_tariffStatuses$find.id;var _tariffStatuses$find2=tariffStatuses.find(function(item){return item.system_name===TariffStatusSystemName.hidden;}),hideId=_tariffStatuses$find2.id;setActiveStatusId(activeId);setHideStatusId(hideId);},[tariffStatuses]);useEffect(function(){var _tariff$pricing9,_tariff$pricing10;(tariff===null||tariff===void 0?void 0:(_tariff$pricing9=tariff.pricing)===null||_tariff$pricing9===void 0?void 0:_tariff$pricing9.isPromotion)&&setIsPromotion(tariff===null||tariff===void 0?void 0:(_tariff$pricing10=tariff.pricing)===null||_tariff$pricing10===void 0?void 0:_tariff$pricing10.isPromotion);},[tariff]);/** Чекбокс изменения видимости в списке */var onChangeIsHidenInList=function onChangeIsHidenInList(){setTariffValues(function(oldValue){var oldId=oldValue===null||oldValue===void 0?void 0:oldValue.status;if(oldId===activeStatusId){return _objectSpread(_objectSpread({},oldValue),{},{status:hideStatusId});}else{return _objectSpread(_objectSpread({},oldValue),{},{status:activeStatusId});}});};/** Сохранить */var onSave=function onSave(){var id=tariffValues.id,title=tariffValues.title,tariffTypeId=tariffValues.tariffTypeId,connectionCost=tariffValues.connectionCost,year=tariffValues.year,month=tariffValues.month,day=tariffValues.day,locksSettingsType=tariffValues.locksSettingsType,nextTariffId=tariffValues.nextTariffId,status=tariffValues.status;var formData=new FormData();title&&formData.append('tariff[title]',title);tariffTypeId&&formData.append('tariff[type]',tariffTypeId.toString());status&&formData.append('tariff[status]',status.toString());connectionCost&&formData.append('pricing[connectionCost]',String(connectionCost*100));periodicalCost&&formData.append('pricing[periodicalCost]',String(periodicalCost*100));formData.append('pricing[period][year]',(year===null||year===void 0?void 0:year.toString())||'0');formData.append('pricing[period][month]',(month===null||month===void 0?void 0:month.toString())||'0');formData.append('pricing[period][day]',(day===null||day===void 0?void 0:day.toString())||'0');formData.append('pricing[isPromotion]',isPromotion?'1':'0');locksSettingsType&&formData.append('locks_settings[type]',locksSettingsType.toString());formData.append('locks_settings[threshold]','0');nextTariffId&&formData.append('locks_settings[nextTariff]',nextTariffId.toString());dispatch(editTariff({id:id,formData:formData}));};/** обработчик изменения типа тарифа */var changeTariffTypeHandler=function changeTariffTypeHandler(item){var id=item.id,title=item.title;setTariffValues(function(oldValue){return _objectSpread(_objectSpread({},oldValue),{},{tariffTypeId:id,tariffTypeTitle:title});});};/** Отменить */var onCancel=function onCancel(){dispatch(setIsTariffEditing({isTariffEditing:false}));};var _onChange=function onChange(e){var name=e.target.name;var value=e.target.value;setTariffValues(function(oldValue){return _objectSpread(_objectSpread({},oldValue),{},_defineProperty({},name,value));});};var onBlurConnectionCost=function onBlurConnectionCost(e){var value=e.target.value;setConnectionCostInput(Number(value).toFixed(2));setTariffValues(function(oldValue){return _objectSpread(_objectSpread({},oldValue),{},{connectionCost:Number(value)});});};var onBlurPeriodicalCost=function onBlurPeriodicalCost(e){var value=e.target.value;setPeriodicalCostInput(Number(value).toFixed(2));setTariffValues(function(oldValue){return _objectSpread(_objectSpread({},oldValue),{},{periodicalCost:Number(value)});});};/** Редактировать */var onEdit=function onEdit(){dispatch(setIsTariffEditing({isTariffEditing:true}));setViewAddition(ViewAdditionState.view);};var changeLocksSettingHandler=function changeLocksSettingHandler(id){setTariffValues(function(oldValue){return _objectSpread(_objectSpread({},oldValue),{},{locksSettingsType:id});});};var changeNextTariffHandler=function changeNextTariffHandler(id,title,type_title){setTariffValues(function(oldValue){return _objectSpread(_objectSpread({},oldValue),{},{nextTariffTitle:title,nextTariffType:type_title,nextTariffId:id});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-card-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"tariff-info-title\"},\"\\u0422\\u0430\\u0440\\u0438\\u0444\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"),/*#__PURE__*/React.createElement(\"div\",null,isEditing?/*#__PURE__*/React.createElement(Input,{value:tariffValues===null||tariffValues===void 0?void 0:tariffValues.title,onChange:function onChange(e){return _onChange(e);},width:330,name:\"title\",error:Boolean(tariffErrors===null||tariffErrors===void 0?void 0:(_tariffErrors$tariff=tariffErrors.tariff)===null||_tariffErrors$tariff===void 0?void 0:_tariffErrors$tariff.title),errors:tariffErrors===null||tariffErrors===void 0?void 0:(_tariffErrors$tariff2=tariffErrors.tariff)===null||_tariffErrors$tariff2===void 0?void 0:_tariffErrors$tariff2.title}):tariffValues===null||tariffValues===void 0?void 0:tariffValues.title)),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u0422\\u0438\\u043F\"),/*#__PURE__*/React.createElement(\"div\",null,isEditing&&isAllowEditing?/*#__PURE__*/React.createElement(TariffTypeSwitcher,{onChange:changeTariffTypeHandler,tariffTypeId:tariffValues.tariffTypeId}):tariffValues.tariffTypeTitle)),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"}),/*#__PURE__*/React.createElement(\"div\",null,isEditing?/*#__PURE__*/React.createElement(CheckBox,{label:'отображать в списке для подключения',checked:(tariffValues===null||tariffValues===void 0?void 0:tariffValues.status)===activeStatusId,onChange:onChangeIsHidenInList}):tariffValues.statusTitle)),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\",style:{marginBottom:10}},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-value\"},isEditing?/*#__PURE__*/React.createElement(CheckBox,{label:'аĸционный тариф',checked:isPromotion,onChange:function onChange(){return setIsPromotion(!isPromotion);}}):(tariff===null||tariff===void 0?void 0:(_tariff$pricing11=tariff.pricing)===null||_tariff$pricing11===void 0?void 0:_tariff$pricing11.isPromotion)&&'Аĸционный тариф')),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-value\"},/*#__PURE__*/React.createElement(RadioButton,{value:0,name:\"addition\",checked:viewAddition===ViewAdditionState.hide,onChange:function onChange(){return setViewAddition(ViewAdditionState.hide);},id:12,label:\"\\u0441\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/React.createElement(RadioButton,{value:1,name:\"addition\",onChange:function onChange(){return setViewAddition(ViewAdditionState.view);},checked:viewAddition===ViewAdditionState.view,id:22,label:\"\\u043E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0437\\u0438\\u0442\\u044C\"})))),viewAddition===ViewAdditionState.view&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{className:\"tariff-info-title\"},\"\\u0426\\u0435\\u043D\\u043E\\u0432\\u0430\\u044F \\u043F\\u043E\\u043B\\u0438\\u0442\\u0438\\u043A\\u0430\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u043F\\u0435\\u0440\\u0435\\u0445\\u043E\\u0434\\u0430\"),/*#__PURE__*/React.createElement(\"div\",null,isEditing&&isAllowEditing?/*#__PURE__*/React.createElement(Input,{value:connectionCostInput,onBlur:onBlurConnectionCost,onChange:function onChange(e){return setConnectionCostInput(e.target.value);},type:\"number\"}):/*#__PURE__*/React.createElement(\"div\",null,Number(connectionCostInput).toFixed(2),\" \\u0440.\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u0410\\u0431\\u043E\\u043D\\u0435\\u043D\\u0442\\u0441\\u043A\\u0430\\u044F \\u043F\\u043B\\u0430\\u0442\\u0430\"),/*#__PURE__*/React.createElement(\"div\",null,isEditing&&isAllowEditing?/*#__PURE__*/React.createElement(Input,{value:periodicalCostInput,onBlur:onBlurPeriodicalCost,onChange:function onChange(e){return setPeriodicalCostInput(e.target.value);},type:\"number\"}):/*#__PURE__*/React.createElement(\"div\",null,Number(periodicalCostInput).toFixed(2),\" \\u0440.\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u041F\\u0435\\u0440\\u0438\\u043E\\u0434\\u0438\\u0447\\u043D\\u043E\\u0441\\u0442\\u044C\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',flexDirection:'column'}},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-period\"},isEditing&&isAllowEditing?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Input,{value:tariffValues===null||tariffValues===void 0?void 0:tariffValues.year,label:\"\\u041B\\u0435\\u0442\",width:80,name:\"year\",onChange:_onChange,type:\"number\",placeHolder:\"0\"}),' ',/*#__PURE__*/React.createElement(Input,{value:tariffValues===null||tariffValues===void 0?void 0:tariffValues.month,label:\"\\u041C\\u0435\\u0441\\u044F\\u0446\\u0435\\u0432\",width:80,name:\"month\",onChange:_onChange,type:\"number\",placeHolder:\"0\"}),' ',/*#__PURE__*/React.createElement(Input,{value:tariffValues===null||tariffValues===void 0?void 0:tariffValues.day,label:\"\\u0414\\u043D\\u0435\\u0439\",width:80,name:\"day\",onChange:_onChange,type:\"number\",placeHolder:\"0\"})):/*#__PURE__*/React.createElement(\"div\",null,periodResult)),/*#__PURE__*/React.createElement(Input,{hidden:true,errors:tariffErrors===null||tariffErrors===void 0?void 0:(_tariffErrors$pricing=tariffErrors.pricing)===null||_tariffErrors$pricing===void 0?void 0:_tariffErrors$pricing.period,className:\"hidden-tariff-input\"})))),/*#__PURE__*/React.createElement(\"p\",{className:\"tariff-info-title\"},\"\\u041E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u041F\\u043E\\u0440\\u043E\\u0433 \\u043E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Input,{placeholder:\"0.00\",disabled:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u041F\\u0440\\u0438 \\u0434\\u043E\\u0441\\u0442\\u0438\\u0436\\u0435\\u043D\\u0438\\u0438 \\u043F\\u043E\\u0440\\u043E\\u0433\\u0430 \\u043E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"div\",null,isEditing&&isAllowEditing?/*#__PURE__*/React.createElement(LocksSettingsSwitcher,{tariffTypeId:tariffValues.locksSettingsType||1,onChange:changeLocksSettingHandler}):/*#__PURE__*/React.createElement(\"div\",null,lockSettingActionTitle))),(tariffValues===null||tariffValues===void 0?void 0:tariffValues.locksSettingsType)===2&&lockSettingActionType==='move'&&/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-title\"},\"\\u0422\\u0430\\u0440\\u0438\\u0444 \\u0434\\u043B\\u044F \\u043F\\u0435\\u0440\\u0435\\u0445\\u043E\\u0434\\u0430\"),/*#__PURE__*/React.createElement(\"div\",{className:\"tariff-info-table-value\"},\"\".concat(nextTariffTitle,\" (\").concat(nextTariffType,\")\"))))),isEditing&&isAllowEditing&&(tariffValues===null||tariffValues===void 0?void 0:tariffValues.locksSettingsType)===2&&/*#__PURE__*/React.createElement(TariffListTable,{onChange:changeNextTariffHandler,nextTariffId:tariffValues.nextTariffId}),/*#__PURE__*/React.createElement(\"div\",{style:{padding:'20px 0'}},isEditing?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconSave,{fill:\"currentColor\"}),kind:ButtonKinds.LightGreen,onClick:onSave,style:{marginRight:5}},\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconClose,{fill:\"currentColor\"}),kind:ButtonKinds.Danger,onClick:onCancel},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\")):/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconPencil,{fill:\"currentColor\"}),onClick:function onClick(){return onEdit();}},\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\")));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/tariff/components/tariff-card/TariffInfo.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Icons","Button","ButtonKinds","Input","CheckBox","RadioButton","isTariffEditingSelector","currentTariffSelector","tariffStatusesSelector","tariffErrorsSelector","TariffTypeSwitcher","TariffStatusSystemName","ViewAdditionState","LocksSettingsSwitcher","TariffListTable","editTariff","setIsTariffEditing","setTariffErrors","yearDeclension","monthDeclension","dayDeclension","TariffInfo","dispatch","tariff","tariffStatuses","tariffValues","setTariffValues","periodicalCost","nextTariffTitle","nextTariffType","year","month","day","id","title","tariffTypeTitle","type","statusSystemName","status","systemName","lockSettingActionType","locks_settings","lockSettingActionTitle","activeStatusId","setActiveStatusId","hideStatusId","setHideStatusId","isPromotion","setIsPromotion","connectionCostInput","setConnectionCostInput","periodicalCostInput","setPeriodicalCostInput","Number","pricing","connectionCost","toFixed","tariffErrors","isEditing","hide","viewAddition","setViewAddition","periodYear","periodMonth","periodDay","periodResult","filter","item","join","isAllowEditing","companiesCount","statusTitle","active","tariffTypeId","period","locksSettingsType","nextTariff","nextTariffId","isTariffEditing","undefined","find","system_name","activeId","hidden","hideId","onChangeIsHidenInList","oldValue","oldId","onSave","formData","FormData","append","toString","String","changeTariffTypeHandler","onCancel","onChange","e","name","target","value","onBlurConnectionCost","onBlurPeriodicalCost","onEdit","view","changeLocksSettingHandler","changeNextTariffHandler","type_title","Boolean","marginBottom","display","flexDirection","padding","LightGreen","marginRight","Danger"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Icons, Button, ButtonKinds, Input, CheckBox } from '@distate/components';\r\nimport './style.css';\r\nimport { RadioButton } from '../../../../common/radio-button';\r\nimport {\r\n  isTariffEditingSelector,\r\n  currentTariffSelector,\r\n  tariffStatusesSelector,\r\n  tariffErrorsSelector\r\n} from '../../store/selects';\r\nimport { TariffTypeSwitcher } from './TariffTypeSwitcher';\r\nimport { TariffStatusSystemName } from '../../helpers/typings';\r\nimport { ViewAdditionState } from './TariffCard';\r\nimport { LocksSettingsSwitcher } from './LocksSettingsSwitcher';\r\nimport { TariffListTable } from './TariffListTable';\r\nimport { editTariff, setIsTariffEditing, setTariffErrors } from '../../store/actions';\r\nimport { yearDeclension, monthDeclension, dayDeclension } from '../../../../helpers/declension';\r\n\r\ntype TariffValueType = {\r\n  /** id отображаемого тарифа */\r\n  id?: number;\r\n  /** название тарифа */\r\n  title?: string;\r\n  /** название типа - предоплатный, постоплатный */\r\n  tariffTypeTitle?: string;\r\n  /** название статуса 'Не отображается в списке для подключения' или отображается */\r\n  statusTitle?: string;\r\n  /** id типа тарифа - предоплатный или постоплатный */\r\n  tariffTypeId?: number;\r\n  /** id статуса - отображать или нет в списке для подключения */\r\n  status?: number;\r\n  /** стоимость перехода на тариф */\r\n  connectionCost?: number;\r\n  /** абонентская плана */\r\n  periodicalCost?: number;\r\n  /** периодичность - год */\r\n  year?: number;\r\n  /** периодичность - месяц */\r\n  month?: number;\r\n  /** периодичность - день */\r\n  day?: number;\r\n  /** при достижении порога отключения - блокировать или переводить на другой тариф*/\r\n  locksSettingsType?: number;\r\n  /** название следующего тарифа */\r\n  nextTariffTitle?: string;\r\n  /** название типа следующего тарифа - предоплатный или постоплатный */\r\n  nextTariffType?: string;\r\n  /** id следующего тарифа */\r\n  nextTariffId?: number;\r\n  /** количество компаний подключенных к тарифу */\r\n  companiesCount?: number;\r\n  /** флаг акционного тарифа */\r\n  isPromotion?: boolean;\r\n};\r\n\r\n/** Информация о тарифе в каторчке тарифа */\r\nexport const TariffInfo = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const tariff = useSelector(currentTariffSelector);\r\n\r\n  const tariffStatuses = useSelector(tariffStatusesSelector);\r\n  const [tariffValues, setTariffValues] = useState<TariffValueType>({});\r\n\r\n  const { periodicalCost, nextTariffTitle, nextTariffType, year, month, day } = tariffValues;\r\n\r\n  const id = tariff?.tariff?.id;\r\n  const title = tariff?.tariff?.title;\r\n  const tariffTypeTitle = tariff?.tariff?.type?.title;\r\n  const statusSystemName = tariff?.tariff?.status?.systemName;\r\n\r\n  const lockSettingActionType = tariff?.locks_settings?.type?.systemName;\r\n  const lockSettingActionTitle = tariff?.locks_settings?.type?.title;\r\n\r\n  const [activeStatusId, setActiveStatusId] = useState();\r\n  const [hideStatusId, setHideStatusId] = useState();\r\n  const [isPromotion, setIsPromotion] = useState(false);\r\n\r\n  const [connectionCostInput, setConnectionCostInput] = useState('0.00');\r\n  const [periodicalCostInput, setPeriodicalCostInput] = useState('0.00');\r\n\r\n  useEffect(() => {\r\n    setConnectionCostInput(Number(tariff?.pricing?.connectionCost / 100).toFixed(2));\r\n    setPeriodicalCostInput(Number(tariff?.pricing?.periodicalCost / 100).toFixed(2));\r\n  }, [tariff]);\r\n\r\n  const tariffErrors = useSelector(tariffErrorsSelector);\r\n  const isEditing = useSelector(isTariffEditingSelector);\r\n  /** свойства для переключения радиокнопки отображать или нет дополнительные настройки */\r\n  const [viewAddition, setViewAddition] = useState(ViewAdditionState.hide);\r\n\r\n  const periodYear = year && yearDeclension(+year);\r\n  const periodMonth = month && monthDeclension(+month);\r\n  const periodDay = day && dayDeclension(+day);\r\n  const periodResult = [periodYear, periodMonth, periodDay].filter(item => item).join(' ');\r\n\r\n  const isAllowEditing = tariff?.tariff?.companiesCount === 0 && tariff?.tariff?.status?.id === 1;\r\n\r\n  useEffect(() => {\r\n    const statusTitle =\r\n      statusSystemName !== TariffStatusSystemName.active\r\n        ? 'Не отображается в списке для подключения'\r\n        : 'Отображается в списке для подключения';\r\n\r\n    setTariffValues({\r\n      id,\r\n      title,\r\n      tariffTypeTitle,\r\n      statusTitle,\r\n      tariffTypeId: tariff?.tariff?.type?.id,\r\n      status: tariff?.tariff?.status?.id,\r\n      connectionCost: tariff?.pricing?.connectionCost,\r\n      periodicalCost: tariff?.pricing?.periodicalCost,\r\n      year: tariff?.pricing?.period?.year,\r\n      month: tariff?.pricing?.period?.month,\r\n      day: tariff?.pricing?.period?.day,\r\n      isPromotion: tariff?.pricing?.isPromotion,\r\n      locksSettingsType: tariff?.locks_settings?.type?.id,\r\n      nextTariffTitle: tariff?.locks_settings?.nextTariff?.title,\r\n      nextTariffType: tariff?.locks_settings?.nextTariff?.type?.title,\r\n      nextTariffId: tariff?.locks_settings?.nextTariff?.id,\r\n      companiesCount: tariff?.tariff?.companiesCount\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [viewAddition, id]);\r\n\r\n  useEffect(() => {\r\n    /** переключатель редактирования */\r\n    dispatch(setIsTariffEditing({ isTariffEditing: false }));\r\n    /** переключатель - отобразить Дополнительно */\r\n    setViewAddition(ViewAdditionState.hide);\r\n    /** обнуление ошибок */\r\n    dispatch(setTariffErrors({ tariffErrors: undefined }));\r\n  }, [dispatch, id]);\r\n\r\n  useEffect(() => {\r\n    const { id: activeId } = tariffStatuses.find(\r\n      (item: any) => item.system_name === TariffStatusSystemName.active\r\n    );\r\n    const { id: hideId } = tariffStatuses.find(\r\n      (item: any) => item.system_name === TariffStatusSystemName.hidden\r\n    );\r\n\r\n    setActiveStatusId(activeId);\r\n    setHideStatusId(hideId);\r\n  }, [tariffStatuses]);\r\n\r\n  useEffect(() => {\r\n    tariff?.pricing?.isPromotion && setIsPromotion(tariff?.pricing?.isPromotion);\r\n  }, [tariff]);\r\n\r\n  /** Чекбокс изменения видимости в списке */\r\n  const onChangeIsHidenInList = () => {\r\n    setTariffValues((oldValue: any) => {\r\n      const oldId = oldValue?.status;\r\n      if (oldId === activeStatusId) {\r\n        return {\r\n          ...oldValue,\r\n          status: hideStatusId\r\n        };\r\n      } else {\r\n        return {\r\n          ...oldValue,\r\n          status: activeStatusId\r\n        };\r\n      }\r\n    });\r\n  };\r\n\r\n  /** Сохранить */\r\n  const onSave = () => {\r\n    const {\r\n      id,\r\n      title,\r\n      tariffTypeId,\r\n      connectionCost,\r\n      year,\r\n      month,\r\n      day,\r\n      locksSettingsType,\r\n      nextTariffId,\r\n      status\r\n    } = tariffValues;\r\n\r\n    const formData = new FormData();\r\n    title && formData.append('tariff[title]', title);\r\n    tariffTypeId && formData.append('tariff[type]', tariffTypeId.toString());\r\n    status && formData.append('tariff[status]', status.toString());\r\n    connectionCost && formData.append('pricing[connectionCost]', String(connectionCost * 100));\r\n    periodicalCost && formData.append('pricing[periodicalCost]', String(periodicalCost * 100));\r\n    formData.append('pricing[period][year]', year?.toString() || '0');\r\n    formData.append('pricing[period][month]', month?.toString() || '0');\r\n    formData.append('pricing[period][day]', day?.toString() || '0');\r\n    formData.append('pricing[isPromotion]', isPromotion ? '1' : '0');\r\n    locksSettingsType && formData.append('locks_settings[type]', locksSettingsType.toString());\r\n    formData.append('locks_settings[threshold]', '0');\r\n    nextTariffId && formData.append('locks_settings[nextTariff]', nextTariffId.toString());\r\n\r\n    dispatch(editTariff({ id, formData }));\r\n  };\r\n\r\n  /** обработчик изменения типа тарифа */\r\n  const changeTariffTypeHandler = (item: { id: number; title: string }) => {\r\n    const { id, title } = item;\r\n\r\n    setTariffValues((oldValue: any) => ({\r\n      ...oldValue,\r\n      tariffTypeId: id,\r\n      tariffTypeTitle: title\r\n    }));\r\n  };\r\n\r\n  /** Отменить */\r\n  const onCancel = () => {\r\n    dispatch(setIsTariffEditing({ isTariffEditing: false }));\r\n  };\r\n\r\n  const onChange = (e: any) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    setTariffValues((oldValue: any) => ({\r\n      ...oldValue,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const onBlurConnectionCost = (e: any) => {\r\n    const value = e.target.value;\r\n    setConnectionCostInput(Number(value).toFixed(2));\r\n    setTariffValues((oldValue: any) => ({\r\n      ...oldValue,\r\n      connectionCost: Number(value)\r\n    }));\r\n  };\r\n\r\n  const onBlurPeriodicalCost = (e: any) => {\r\n    const value = e.target.value;\r\n    setPeriodicalCostInput(Number(value).toFixed(2));\r\n    setTariffValues((oldValue: any) => ({\r\n      ...oldValue,\r\n      periodicalCost: Number(value)\r\n    }));\r\n  };\r\n\r\n  /** Редактировать */\r\n  const onEdit = () => {\r\n    dispatch(setIsTariffEditing({ isTariffEditing: true }));\r\n    setViewAddition(ViewAdditionState.view);\r\n  };\r\n\r\n  const changeLocksSettingHandler = (id: number) => {\r\n    setTariffValues(oldValue => ({\r\n      ...oldValue,\r\n      locksSettingsType: id\r\n    }));\r\n  };\r\n\r\n  const changeNextTariffHandler = (id: number, title: string, type_title: string) => {\r\n    setTariffValues((oldValue: any) => ({\r\n      ...oldValue,\r\n      nextTariffTitle: title,\r\n      nextTariffType: type_title,\r\n      nextTariffId: id\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"tariff-card-block\">\r\n      <span className=\"tariff-info-title\">Тариф</span>\r\n      <div className=\"tariff-info-table-wrapper\">\r\n        <div className=\"tariff-info-table-row\">\r\n          <div className=\"tariff-info-table-title\">Название</div>\r\n          <div>\r\n            {isEditing ? (\r\n              <Input\r\n                value={tariffValues?.title}\r\n                onChange={e => onChange(e)}\r\n                width={330}\r\n                name=\"title\"\r\n                error={Boolean(tariffErrors?.tariff?.title)}\r\n                errors={tariffErrors?.tariff?.title}\r\n              />\r\n            ) : (\r\n              tariffValues?.title\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"tariff-info-table-row\">\r\n          <div className=\"tariff-info-table-title\">Тип</div>\r\n          <div>\r\n            {isEditing && isAllowEditing ? (\r\n              <TariffTypeSwitcher\r\n                onChange={changeTariffTypeHandler}\r\n                tariffTypeId={tariffValues.tariffTypeId}\r\n              />\r\n            ) : (\r\n              tariffValues.tariffTypeTitle\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"tariff-info-table-row\">\r\n          <div className=\"tariff-info-table-title\"></div>\r\n          <div>\r\n            {isEditing ? (\r\n              <CheckBox\r\n                label={'отображать в списке для подключения'}\r\n                checked={tariffValues?.status === activeStatusId}\r\n                onChange={onChangeIsHidenInList}\r\n              />\r\n            ) : (\r\n              tariffValues.statusTitle\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"tariff-info-table-row\" style={{ marginBottom: 10 }}>\r\n          <div className=\"tariff-info-table-title\"></div>\r\n          <div className=\"tariff-info-table-value\">\r\n            {isEditing ? (\r\n              <CheckBox\r\n                label={'аĸционный тариф'}\r\n                checked={isPromotion}\r\n                onChange={() => setIsPromotion(!isPromotion)}\r\n              />\r\n            ) : (\r\n              tariff?.pricing?.isPromotion && 'Аĸционный тариф'\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"tariff-info-table-row\">\r\n          <div className=\"tariff-info-table-title\">Дополнительно</div>\r\n          <div className=\"tariff-info-table-value\">\r\n            <RadioButton\r\n              value={0}\r\n              name=\"addition\"\r\n              checked={viewAddition === ViewAdditionState.hide}\r\n              onChange={() => setViewAddition(ViewAdditionState.hide)}\r\n              id={12}\r\n              label=\"скрыть\"\r\n            />\r\n            <RadioButton\r\n              value={1}\r\n              name=\"addition\"\r\n              onChange={() => setViewAddition(ViewAdditionState.view)}\r\n              checked={viewAddition === ViewAdditionState.view}\r\n              id={22}\r\n              label=\"отобразить\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {viewAddition === ViewAdditionState.view && (\r\n        <>\r\n          <p className=\"tariff-info-title\">Ценовая политика</p>\r\n\r\n          <div className=\"tariff-info-table-wrapper\">\r\n            <div className=\"tariff-info-table-row\">\r\n              <div className=\"tariff-info-table-title\">Стоимость перехода</div>\r\n              <div>\r\n                {isEditing && isAllowEditing ? (\r\n                  <Input\r\n                    value={connectionCostInput}\r\n                    onBlur={onBlurConnectionCost}\r\n                    onChange={e => setConnectionCostInput(e.target.value)}\r\n                    type=\"number\"\r\n                  />\r\n                ) : (\r\n                  <div>{Number(connectionCostInput).toFixed(2)} р.</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"tariff-info-table-row\">\r\n              <div className=\"tariff-info-table-title\">Абонентская плата</div>\r\n              <div>\r\n                {isEditing && isAllowEditing ? (\r\n                  <Input\r\n                    value={periodicalCostInput}\r\n                    onBlur={onBlurPeriodicalCost}\r\n                    onChange={e => setPeriodicalCostInput(e.target.value)}\r\n                    type=\"number\"\r\n                  />\r\n                ) : (\r\n                  <div>{Number(periodicalCostInput).toFixed(2)} р.</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"tariff-info-table-row\">\r\n              <div className=\"tariff-info-table-title\">Периодичность</div>\r\n              <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                <div className=\"tariff-info-table-period\">\r\n                  {isEditing && isAllowEditing ? (\r\n                    <>\r\n                      <Input\r\n                        value={tariffValues?.year}\r\n                        label=\"Лет\"\r\n                        width={80}\r\n                        name=\"year\"\r\n                        onChange={onChange}\r\n                        type=\"number\"\r\n                        placeHolder=\"0\"\r\n                      />{' '}\r\n                      <Input\r\n                        value={tariffValues?.month}\r\n                        label=\"Месяцев\"\r\n                        width={80}\r\n                        name=\"month\"\r\n                        onChange={onChange}\r\n                        type=\"number\"\r\n                        placeHolder=\"0\"\r\n                      />{' '}\r\n                      <Input\r\n                        value={tariffValues?.day}\r\n                        label=\"Дней\"\r\n                        width={80}\r\n                        name=\"day\"\r\n                        onChange={onChange}\r\n                        type=\"number\"\r\n                        placeHolder=\"0\"\r\n                      />\r\n                    </>\r\n                  ) : (\r\n                    <div>{periodResult}</div>\r\n                  )}\r\n                </div>\r\n                <Input\r\n                  hidden\r\n                  errors={tariffErrors?.pricing?.period}\r\n                  className=\"hidden-tariff-input\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"tariff-info-title\">Ограничения</p>\r\n\r\n          <div className=\"tariff-info-table-wrapper\">\r\n            <div className=\"tariff-info-table-row\">\r\n              <div className=\"tariff-info-table-title\">Порог отключения</div>\r\n              <div>\r\n                <Input placeholder=\"0.00\" disabled={true} />\r\n              </div>\r\n            </div>\r\n            <div className=\"tariff-info-table-row\">\r\n              <div className=\"tariff-info-table-title\">При достижении порога отключения</div>\r\n              <div>\r\n                {isEditing && isAllowEditing ? (\r\n                  <LocksSettingsSwitcher\r\n                    tariffTypeId={tariffValues.locksSettingsType || 1}\r\n                    onChange={changeLocksSettingHandler}\r\n                  />\r\n                ) : (\r\n                  <div>{lockSettingActionTitle}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {tariffValues?.locksSettingsType === 2 && lockSettingActionType === 'move' && (\r\n              <div className=\"tariff-info-table-row\">\r\n                <div className=\"tariff-info-table-title\">Тариф для перехода</div>\r\n                <div className=\"tariff-info-table-value\">{`${nextTariffTitle} (${nextTariffType})`}</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {isEditing && isAllowEditing && tariffValues?.locksSettingsType === 2 && (\r\n        <TariffListTable\r\n          onChange={changeNextTariffHandler}\r\n          nextTariffId={tariffValues.nextTariffId}\r\n        />\r\n      )}\r\n\r\n      <div style={{ padding: '20px 0' }}>\r\n        {isEditing ? (\r\n          <>\r\n            <Button\r\n              icon={<Icons.IconSave fill=\"currentColor\" />}\r\n              kind={ButtonKinds.LightGreen}\r\n              onClick={onSave}\r\n              style={{ marginRight: 5 }}\r\n            >\r\n              Сохранить\r\n            </Button>\r\n\r\n            <Button\r\n              icon={<Icons.IconClose fill=\"currentColor\" />}\r\n              kind={ButtonKinds.Danger}\r\n              onClick={onCancel}\r\n            >\r\n              Отмена\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          <Button icon={<Icons.IconPencil fill=\"currentColor\" />} onClick={() => onEdit()}>\r\n            Редактировать\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}