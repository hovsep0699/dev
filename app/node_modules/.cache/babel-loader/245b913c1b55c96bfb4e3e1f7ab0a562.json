{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(addLegalEntityToGroupEffect),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(addLegalEntityToGroupWorker);import{takeLatest,put}from'redux-saga/effects';import{addLegalEntityToGroup,getLegalEntityGroup,getAddedGroupLegalEntity}from'../actions';import{Flash}from'../../../../common/flash/Flash';import{ContractorApiServices}from'../../services/contractors.api';export function addLegalEntityToGroupEffect(){return _regeneratorRuntime.wrap(function addLegalEntityToGroupEffect$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(addLegalEntityToGroup,addLegalEntityToGroupWorker);case 2:case\"end\":return _context.stop();}}},_marked);}/** Добавление ЮЛ вгруппу */function addLegalEntityToGroupWorker(_ref){var payload,groupId,contractorId,offset,message;return _regeneratorRuntime.wrap(function addLegalEntityToGroupWorker$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref.payload;_context2.prev=1;groupId=payload.groupId,contractorId=payload.contractorId,offset=payload.offset;_context2.next=5;return ContractorApiServices.addToGroup({groupId:groupId,contractorId:contractorId});case 5:_context2.next=7;return put(getLegalEntityGroup({id:groupId,offset:offset}));case 7:_context2.next=9;return put(getAddedGroupLegalEntity({id:groupId,offset:offset}));case 9:_context2.next=16;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);message=_context2.t0.message;_context2.next=16;return Flash.error(message||'Возникла ошибка');case 16:case\"end\":return _context2.stop();}}},_marked2,null,[[1,11]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/store/sagas/addLegalEntityToGroup.effect.ts"],"names":["addLegalEntityToGroupEffect","addLegalEntityToGroupWorker","takeLatest","put","addLegalEntityToGroup","getLegalEntityGroup","getAddedGroupLegalEntity","Flash","ContractorApiServices","payload","groupId","contractorId","offset","addToGroup","id","message","error"],"mappings":"oNAMiBA,2B,iDAWPC,2B,EAjBV,OAASC,UAAT,CAAqBC,GAArB,KAAgC,oBAAhC,CAEA,OAASC,qBAAT,CAAgCC,mBAAhC,CAAqDC,wBAArD,KAAqF,YAArF,CACA,OAASC,KAAT,KAAsB,gCAAtB,CACA,OAASC,qBAAT,KAAsC,gCAAtC,CAEA,MAAO,SAAUR,CAAAA,2BAAV,uJACL,MAAME,CAAAA,UAAU,CAACE,qBAAD,CAAwBH,2BAAxB,CAAhB,CADK,sDAUP,4BACA,QAAUA,CAAAA,2BAAV,8LAAwCQ,OAAxC,MAAwCA,OAAxC,kBAEYC,OAFZ,CAE8CD,OAF9C,CAEYC,OAFZ,CAEqBC,YAFrB,CAE8CF,OAF9C,CAEqBE,YAFrB,CAEmCC,MAFnC,CAE8CH,OAF9C,CAEmCG,MAFnC,kBAGI,MAAMJ,CAAAA,qBAAqB,CAACK,UAAtB,CAAiC,CACrCH,OAAO,CAAPA,OADqC,CAErCC,YAAY,CAAZA,YAFqC,CAAjC,CAAN,CAHJ,wBAOI,MAAMR,CAAAA,GAAG,CAACE,mBAAmB,CAAC,CAAES,EAAE,CAAEJ,OAAN,CAAeE,MAAM,CAANA,MAAf,CAAD,CAApB,CAAT,CAPJ,wBAQI,MAAMT,CAAAA,GAAG,CAACG,wBAAwB,CAAC,CAAEQ,EAAE,CAAEJ,OAAN,CAAeE,MAAM,CAANA,MAAf,CAAD,CAAzB,CAAT,CARJ,4FASaG,OATb,cASaA,OATb,mBAUI,MAAMR,CAAAA,KAAK,CAACS,KAAN,CAAYD,OAAO,EAAI,iBAAvB,CAAN,CAVJ","sourcesContent":["import { takeLatest, put } from 'redux-saga/effects';\r\n\r\nimport { addLegalEntityToGroup, getLegalEntityGroup, getAddedGroupLegalEntity } from '../actions';\r\nimport { Flash } from '../../../../common/flash/Flash';\r\nimport { ContractorApiServices } from '../../services/contractors.api';\r\n\r\nexport function* addLegalEntityToGroupEffect() {\r\n  yield takeLatest(addLegalEntityToGroup, addLegalEntityToGroupWorker);\r\n}\r\n\r\ninterface Payload {\r\n  groupId: number;\r\n  contractorId: number;\r\n  offset?: number;\r\n}\r\n\r\n/** Добавление ЮЛ вгруппу */\r\nfunction* addLegalEntityToGroupWorker({ payload }: { payload: Payload }) {\r\n  try {\r\n    const { groupId, contractorId, offset } = payload;\r\n    yield ContractorApiServices.addToGroup({\r\n      groupId,\r\n      contractorId\r\n    });\r\n    yield put(getLegalEntityGroup({ id: groupId, offset }));\r\n    yield put(getAddedGroupLegalEntity({ id: groupId, offset }));\r\n  } catch ({ message }) {\r\n    yield Flash.error(message || 'Возникла ошибка');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}