{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _toArray from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport widgets from './widgets';\nimport get from 'lodash.get';\nexport var COMPONENT_TYPE = {\n  string: 'Input',\n  array: 'Select',\n  number: 'Input',\n  boolean: 'CheckBox',\n  date: 'DatePicker'\n};\nexport function isRequired(name, schema) {\n  return Array.isArray(schema.required) && schema.required.indexOf(name) !== -1;\n}\nexport function parseSchema(schema) {\n  var format = schema.format;\n  var defautlWidget = 'button';\n\n  if (format && hasWidget(format)) {\n    defautlWidget = format;\n  }\n\n  return {\n    defautlWidget: defautlWidget\n  };\n}\nexport function parseUISchema(uiSchema) {\n  if (!uiSchema || !isObject(uiSchema)) {\n    return {};\n  }\n\n  return {};\n}\nexport function isSchemaItemsArray(schema) {\n  return Array.isArray(schema.items) && schema.items.lenght > 0 && schema.items.every(function (item) {\n    return isObject(item);\n  });\n}\nexport function getFields() {\n  return {\n    Input: require('../Input').default,\n    Select: require('../Select').default,\n    CheckBox: require('../CheckBox').default,\n    DatePicker: require('../DatePicker').default\n  };\n}\nexport function getType(type, format) {\n  if (type === 'string' && format === 'date') {\n    return 'date';\n  }\n\n  return type;\n}\nexport function isSelect(schema) {\n  if (Array.isArray(schema.enum)) {\n    return true;\n  }\n\n  return false;\n}\nexport function optionsMuliList(schema) {\n  var list = schema.oneOf || schema.anyOf;\n\n  if (Array.isArray(list)) {\n    return list.map(function (_ref, i) {\n      var title = _ref.title,\n          name = _ref.name;\n      return {\n        label: title || \"Option \".concat(i + 1),\n        value: String(i)\n      };\n    });\n  }\n\n  if (list !== null && typeof list === 'object') {\n    var index = -1;\n    return Object.entries(list).map(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          key = _ref3[0],\n          title = _ref3[1].title;\n\n      index++;\n      return {\n        label: title || \"Option \".concat(index + 1),\n        value: key\n      };\n    });\n  }\n\n  return [];\n}\nexport function optionsList(schema) {\n  if (schema.enum) {\n    return schema.enum.map(function (value, i) {\n      var label = schema.enumNames && schema.enumNames[i] || String(value);\n      return {\n        label: label,\n        value: value\n      };\n    });\n  }\n\n  return {};\n}\nexport function hasWidget(format) {\n  var name = format.replace(/-/g, '');\n\n  if (name in widgets) {\n    return true;\n  }\n\n  return false;\n}\nexport function getValue(formData) {}\nexport function getOptions(uiSchema) {\n  if (!uiSchema || !isObject(uiSchema)) {\n    return {};\n  }\n\n  var UISchema = {};\n\n  if (uiSchema.hasOwnProperty('ui:widget')) {\n    UISchema = {\n      widget: uiSchema['ui:widget']\n    };\n  }\n\n  if (!uiSchema.hasOwnProperty('ui:options')) {\n    return UISchema;\n  } // @ts-ignore\n\n\n  return Object.assign(Object.assign({}, UISchema), uiSchema['ui:options']);\n}\nexport function getWidget(widget) {\n  var name = widget.replace(/-/g, '');\n\n  if (!hasWidget(name)) {\n    throw new Error(\"No widget for type \\\"\".concat(widget, \"\\\"\"));\n  } // @ts-ignore\n\n\n  return widgets[name];\n}\nexport function isObject(thing) {\n  return typeof thing === 'object' && thing !== null && !Array.isArray(thing);\n}\nexport function arrayToHash(arr) {\n  if (!Array.isArray(arr)) {\n    throw new Error('not an array');\n  }\n\n  return arr.reduce(function (prev, curr) {\n    prev[curr] = true;\n    return prev;\n  }, {});\n}\nexport function groupProperties(properties, groupSchema) {\n  if (!Array.isArray(groupSchema) || !Array.isArray(properties)) {\n    return {\n      properties: properties,\n      group: {}\n    };\n  }\n\n  var groupFilter = [];\n  var group = groupSchema.reduce(function (prev, curr) {\n    var _curr$fields = _toArray(curr.fields),\n        name = _curr$fields[0],\n        fields = _curr$fields.slice(1);\n\n    prev[name] = Object.assign(Object.assign({}, curr), {\n      fields: fields\n    });\n    groupFilter = [].concat(_toConsumableArray(groupFilter), _toConsumableArray(fields));\n    return prev;\n  }, {});\n  var groupFilterHash = arrayToHash(groupFilter);\n  var groupProperty = properties.filter(function (prop) {\n    return !groupFilterHash[prop];\n  });\n  return {\n    properties: groupProperty,\n    group: group\n  };\n}\nexport function dependenciesProperties(schema, formData) {\n  var properties = get(schema, 'properties', {});\n\n  if (!Object.keys(properties).length) {\n    return [];\n  }\n\n  return Object.entries(properties).reduce(function (prev, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        key = _ref5[0],\n        propSchema = _ref5[1];\n\n    if (propSchema && propSchema.hasOwnProperty('dependencies')) {\n      var dependencies = propSchema.dependencies;\n      Object.keys(dependencies).forEach(function (propKey) {\n        var formValue = get(formData, propKey);\n\n        if (Array.isArray(dependencies[propKey]) && dependencies[propKey].indexOf(formValue) !== -1) {\n          prev.push(key);\n        } else if (typeof dependencies[propKey] === 'string' && dependencies[propKey] === formValue) {\n          prev.push(key);\n        } else if (typeof dependencies[propKey] === 'number' && dependencies[propKey] === formValue) {\n          prev.push(key);\n        }\n      });\n    } else {\n      prev.push(key);\n    }\n\n    return prev;\n  }, []);\n}\nexport function orderProperties(properties, orders) {\n  if (!Array.isArray(orders) || orders.length === 0 || !Array.isArray(properties)) {\n    return properties;\n  }\n\n  var propertyHash = arrayToHash(properties);\n  var orderFiltered = orders.filter(function (prop) {\n    return prop === '*' || propertyHash[prop];\n  });\n  var orderHash = arrayToHash(orderFiltered);\n  var rest = properties.filter(function (prop) {\n    return !orderHash[prop];\n  });\n  var restIndex = orderFiltered.indexOf('*');\n\n  if (restIndex === -1 && rest.length) {\n    throw new Error('uiSchema order list does not contain');\n  }\n\n  if (restIndex === -1) {\n    return orderFiltered;\n  }\n\n  if (restIndex !== orderFiltered.lastIndexOf('*')) {\n    throw new Error('uiSchema order list contains more than one wildcard item');\n  }\n\n  var complete = _toConsumableArray(orderFiltered);\n\n  complete.splice.apply(complete, [restIndex, 1].concat(_toConsumableArray(rest)));\n  return complete;\n}\nexport function retrieveSchema(schema) {\n  var rootSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isObject(schema)) {\n    return {};\n  }\n\n  return resolveSchema(schema, rootSchema);\n}\nexport function resolveSchema(schema) {\n  var rootSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (schema.hasOwnProperty('$ref')) {\n    return resolveReference(schema, rootSchema);\n  } else if (schema.hasOwnProperty('dependencies')) {\n    var resolvedSchema = resolveDependencies(schema, rootSchema);\n    return resolveDependencies(resolvedSchema, rootSchema);\n  }\n\n  return schema;\n}\nexport function resolveReference(schema) {\n  var rootSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var schemaRef = {};\n\n  var $ref = schema.$ref,\n      baseSchema = __rest(schema, [\"$ref\"]);\n\n  if (typeof $ref === 'string' && $ref.startsWith('#')) {\n    var path = $ref.substring(1).split('/');\n    schemaRef = get(rootSchema, path, {});\n    schemaRef = Object.assign(Object.assign({}, baseSchema), schemaRef);\n  } else {\n    throw new Error(\"Could not find a definition for \".concat($ref, \".\"));\n  }\n\n  if (schemaRef === undefined) {\n    throw new Error(\"Could not find a difinition for \".concat($ref, \".\"));\n  }\n\n  if (schemaRef.hasOwnProperty('$ref')) {\n    return resolveReference(schemaRef);\n  }\n\n  return schemaRef;\n}\nexport function resolveDependencies(schema) {\n  var rootSchema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return schema;\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) === '[object Arguments]';\n}\n\nexport function deepEquals(a, b) {\n  var ca = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var cb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  // Partially extracted from node-deeper and adapted to exclude comparison\n  // checks for functions.\n  // https://github.com/othiym23/node-deeper\n  if (a === b) {\n    return true;\n  } else if (typeof a === 'function' || typeof b === 'function') {\n    return true;\n  } else if (typeof a !== 'object' || typeof b !== 'object') {\n    return false;\n  } else if (a === null || b === null) {\n    return false;\n  } else if (a instanceof Date && b instanceof Date) {\n    return a.getTime() === b.getTime();\n  } else if (a instanceof RegExp && b instanceof RegExp) {\n    return a.source === b.source && a.global === b.global && a.multiline === b.multiline && a.lastIndex === b.lastIndex && a.ignoreCase === b.ignoreCase;\n  } else if (isArguments(a) || isArguments(b)) {\n    if (!(isArguments(a) && isArguments(b))) {\n      return false;\n    }\n\n    var slice = Array.prototype.slice;\n    return deepEquals(slice.call(a), slice.call(b), ca, cb);\n  } else {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    var ka = Object.keys(a);\n    var kb = Object.keys(b);\n\n    if (ka.length === 0 && kb.length === 0) {\n      return true;\n    }\n\n    if (ka.length !== kb.length) {\n      return false;\n    }\n\n    var cal = ca.length;\n\n    while (cal--) {\n      if (ca[cal] === a) {\n        return cb[cal] === b;\n      }\n    }\n\n    ca.push(a);\n    cb.push(b);\n    ka.sort();\n    kb.sort();\n\n    for (var j = ka.length - 1; j >= 0; j--) {\n      if (ka[j] !== kb[j]) {\n        return false;\n      }\n    }\n\n    var key;\n\n    for (var k = ka.length - 1; k >= 0; k--) {\n      key = ka[k];\n\n      if (!deepEquals(a[key], b[key], ca, cb)) {\n        return false;\n      }\n    }\n\n    ca.pop();\n    cb.pop();\n    return true;\n  }\n}\nvar formatDateKeys = {\n  d: 'day',\n  M: 'month',\n  y: 'year',\n  m: 'minutes',\n  s: 'seconds',\n  h: 'hours'\n};\nexport function dateFormat(date) {\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'dd.MM.yyyy';\n\n  if (!(date instanceof Date)) {\n    return date;\n  }\n\n  var formatNumber = function formatNumber(str) {\n    return \"00\".concat(str).slice(-2);\n  };\n\n  var dataDate = {\n    day: formatNumber(date.getDate()),\n    month: formatNumber(date.getMonth() + 1),\n    year: date.getFullYear(),\n    minutes: formatNumber(date.getMinutes()),\n    seconds: formatNumber(date.getSeconds()),\n    hours: formatNumber(date.getHours())\n  };\n  var strDate = '';\n  var countIndex = {};\n\n  for (var index in format) {\n    var key = formatDateKeys[format[index]];\n\n    if (key && key in dataDate) {\n      var str = String(dataDate[key]);\n      var i = countIndex[key] || 0;\n      strDate += str[i];\n      countIndex[key] = i + 1;\n    } else {\n      strDate += format[index];\n    }\n  }\n\n  return strDate;\n}\nexport function dateParse(str) {\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'dd.MM.yyyy';\n\n  if (!str) {\n    return;\n  }\n\n  if (str instanceof Date) {\n    return str;\n  }\n\n  var date = {\n    day: '',\n    month: '',\n    year: '',\n    minutes: '',\n    seconds: '',\n    hours: ''\n  };\n\n  for (var index in format) {\n    var key = formatDateKeys[format[index]];\n\n    if (key && key in date && str[index] && /\\d/.test(str[index])) {\n      date[key] += str[index];\n    }\n  }\n\n  return new Date(date.year, parseInt(date.month) - 1, date.day, date.hours, date.minutes, date.seconds);\n}","map":{"version":3,"sources":["../../src/FormSchema/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport widgets from './widgets';\r\nimport get from 'lodash.get';\r\nexport const COMPONENT_TYPE = {\r\n    string: 'Input',\r\n    array: 'Select',\r\n    number: 'Input',\r\n    boolean: 'CheckBox',\r\n    date: 'DatePicker'\r\n};\r\nexport function isRequired(name, schema) {\r\n    return Array.isArray(schema.required) && schema.required.indexOf(name) !== -1;\r\n}\r\nexport function parseSchema(schema) {\r\n    const { format } = schema;\r\n    let defautlWidget = 'button';\r\n    if (format && hasWidget(format)) {\r\n        defautlWidget = format;\r\n    }\r\n    return { defautlWidget };\r\n}\r\nexport function parseUISchema(uiSchema) {\r\n    if (!uiSchema || !isObject(uiSchema)) {\r\n        return {};\r\n    }\r\n    return {};\r\n}\r\nexport function isSchemaItemsArray(schema) {\r\n    return (Array.isArray(schema.items) &&\r\n        schema.items.lenght > 0 &&\r\n        schema.items.every((item) => isObject(item)));\r\n}\r\nexport function getFields() {\r\n    return {\r\n        Input: require('../Input').default,\r\n        Select: require('../Select').default,\r\n        CheckBox: require('../CheckBox').default,\r\n        DatePicker: require('../DatePicker').default\r\n    };\r\n}\r\nexport function getType(type, format) {\r\n    if (type === 'string' && format === 'date') {\r\n        return 'date';\r\n    }\r\n    return type;\r\n}\r\nexport function isSelect(schema) {\r\n    if (Array.isArray(schema.enum)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function optionsMuliList(schema) {\r\n    const list = schema.oneOf || schema.anyOf;\r\n    if (Array.isArray(list)) {\r\n        return list.map(({ title, name }, i) => ({\r\n            label: title || `Option ${i + 1}`,\r\n            value: String(i)\r\n        }));\r\n    }\r\n    if (list !== null && typeof list === 'object') {\r\n        let index = -1;\r\n        return Object.entries(list).map(([key, { title }]) => {\r\n            index++;\r\n            return {\r\n                label: title || `Option ${index + 1}`,\r\n                value: key\r\n            };\r\n        });\r\n    }\r\n    return [];\r\n}\r\nexport function optionsList(schema) {\r\n    if (schema.enum) {\r\n        return schema.enum.map((value, i) => {\r\n            const label = (schema.enumNames && schema.enumNames[i]) || String(value);\r\n            return { label, value };\r\n        });\r\n    }\r\n    return {};\r\n}\r\nexport function hasWidget(format) {\r\n    const name = format.replace(/-/g, '');\r\n    if (name in widgets) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function getValue(formData) { }\r\nexport function getOptions(uiSchema) {\r\n    if (!uiSchema || !isObject(uiSchema)) {\r\n        return {};\r\n    }\r\n    let UISchema = {};\r\n    if (uiSchema.hasOwnProperty('ui:widget')) {\r\n        UISchema = { widget: uiSchema['ui:widget'] };\r\n    }\r\n    if (!uiSchema.hasOwnProperty('ui:options')) {\r\n        return UISchema;\r\n    }\r\n    // @ts-ignore\r\n    return Object.assign(Object.assign({}, UISchema), uiSchema['ui:options']);\r\n}\r\nexport function getWidget(widget) {\r\n    const name = widget.replace(/-/g, '');\r\n    if (!hasWidget(name)) {\r\n        throw new Error(`No widget for type \"${widget}\"`);\r\n    }\r\n    // @ts-ignore\r\n    return widgets[name];\r\n}\r\nexport function isObject(thing) {\r\n    return typeof thing === 'object' && thing !== null && !Array.isArray(thing);\r\n}\r\nexport function arrayToHash(arr) {\r\n    if (!Array.isArray(arr)) {\r\n        throw new Error('not an array');\r\n    }\r\n    return arr.reduce((prev, curr) => {\r\n        prev[curr] = true;\r\n        return prev;\r\n    }, {});\r\n}\r\nexport function groupProperties(properties, groupSchema) {\r\n    if (!Array.isArray(groupSchema) || !Array.isArray(properties)) {\r\n        return { properties, group: {} };\r\n    }\r\n    let groupFilter = [];\r\n    const group = groupSchema.reduce((prev, curr) => {\r\n        const [name, ...fields] = curr.fields;\r\n        prev[name] = Object.assign(Object.assign({}, curr), { fields });\r\n        groupFilter = [...groupFilter, ...fields];\r\n        return prev;\r\n    }, {});\r\n    const groupFilterHash = arrayToHash(groupFilter);\r\n    const groupProperty = properties.filter(prop => !groupFilterHash[prop]);\r\n    return { properties: groupProperty, group };\r\n}\r\nexport function dependenciesProperties(schema, formData) {\r\n    const properties = get(schema, 'properties', {});\r\n    if (!Object.keys(properties).length) {\r\n        return [];\r\n    }\r\n    return Object.entries(properties).reduce((prev, [key, propSchema]) => {\r\n        if (propSchema && propSchema.hasOwnProperty('dependencies')) {\r\n            const { dependencies } = propSchema;\r\n            Object.keys(dependencies).forEach(propKey => {\r\n                const formValue = get(formData, propKey);\r\n                if (Array.isArray(dependencies[propKey]) &&\r\n                    dependencies[propKey].indexOf(formValue) !== -1) {\r\n                    prev.push(key);\r\n                }\r\n                else if (typeof dependencies[propKey] === 'string' &&\r\n                    dependencies[propKey] === formValue) {\r\n                    prev.push(key);\r\n                }\r\n                else if (typeof dependencies[propKey] === 'number' &&\r\n                    dependencies[propKey] === formValue) {\r\n                    prev.push(key);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            prev.push(key);\r\n        }\r\n        return prev;\r\n    }, []);\r\n}\r\nexport function orderProperties(properties, orders) {\r\n    if (!Array.isArray(orders) || orders.length === 0 || !Array.isArray(properties)) {\r\n        return properties;\r\n    }\r\n    const propertyHash = arrayToHash(properties);\r\n    const orderFiltered = orders.filter(prop => prop === '*' || propertyHash[prop]);\r\n    const orderHash = arrayToHash(orderFiltered);\r\n    const rest = properties.filter(prop => !orderHash[prop]);\r\n    const restIndex = orderFiltered.indexOf('*');\r\n    if (restIndex === -1 && rest.length) {\r\n        throw new Error('uiSchema order list does not contain');\r\n    }\r\n    if (restIndex === -1) {\r\n        return orderFiltered;\r\n    }\r\n    if (restIndex !== orderFiltered.lastIndexOf('*')) {\r\n        throw new Error('uiSchema order list contains more than one wildcard item');\r\n    }\r\n    const complete = [...orderFiltered];\r\n    complete.splice(restIndex, 1, ...rest);\r\n    return complete;\r\n}\r\nexport function retrieveSchema(schema, rootSchema = {}) {\r\n    if (!isObject(schema)) {\r\n        return {};\r\n    }\r\n    return resolveSchema(schema, rootSchema);\r\n}\r\nexport function resolveSchema(schema, rootSchema = {}) {\r\n    if (schema.hasOwnProperty('$ref')) {\r\n        return resolveReference(schema, rootSchema);\r\n    }\r\n    else if (schema.hasOwnProperty('dependencies')) {\r\n        const resolvedSchema = resolveDependencies(schema, rootSchema);\r\n        return resolveDependencies(resolvedSchema, rootSchema);\r\n    }\r\n    return schema;\r\n}\r\nexport function resolveReference(schema, rootSchema = {}) {\r\n    let schemaRef = {};\r\n    const { $ref } = schema, baseSchema = __rest(schema, [\"$ref\"]);\r\n    if (typeof $ref === 'string' && $ref.startsWith('#')) {\r\n        const path = $ref.substring(1).split('/');\r\n        schemaRef = get(rootSchema, path, {});\r\n        schemaRef = Object.assign(Object.assign({}, baseSchema), schemaRef);\r\n    }\r\n    else {\r\n        throw new Error(`Could not find a definition for ${$ref}.`);\r\n    }\r\n    if (schemaRef === undefined) {\r\n        throw new Error(`Could not find a difinition for ${$ref}.`);\r\n    }\r\n    if (schemaRef.hasOwnProperty('$ref')) {\r\n        return resolveReference(schemaRef);\r\n    }\r\n    return schemaRef;\r\n}\r\nexport function resolveDependencies(schema, rootSchema = {}) {\r\n    return schema;\r\n}\r\nfunction isArguments(object) {\r\n    return Object.prototype.toString.call(object) === '[object Arguments]';\r\n}\r\nexport function deepEquals(a, b, ca = [], cb = []) {\r\n    // Partially extracted from node-deeper and adapted to exclude comparison\r\n    // checks for functions.\r\n    // https://github.com/othiym23/node-deeper\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    else if (typeof a === 'function' || typeof b === 'function') {\r\n        return true;\r\n    }\r\n    else if (typeof a !== 'object' || typeof b !== 'object') {\r\n        return false;\r\n    }\r\n    else if (a === null || b === null) {\r\n        return false;\r\n    }\r\n    else if (a instanceof Date && b instanceof Date) {\r\n        return a.getTime() === b.getTime();\r\n    }\r\n    else if (a instanceof RegExp && b instanceof RegExp) {\r\n        return (a.source === b.source &&\r\n            a.global === b.global &&\r\n            a.multiline === b.multiline &&\r\n            a.lastIndex === b.lastIndex &&\r\n            a.ignoreCase === b.ignoreCase);\r\n    }\r\n    else if (isArguments(a) || isArguments(b)) {\r\n        if (!(isArguments(a) && isArguments(b))) {\r\n            return false;\r\n        }\r\n        let slice = Array.prototype.slice;\r\n        return deepEquals(slice.call(a), slice.call(b), ca, cb);\r\n    }\r\n    else {\r\n        if (a.constructor !== b.constructor) {\r\n            return false;\r\n        }\r\n        let ka = Object.keys(a);\r\n        let kb = Object.keys(b);\r\n        if (ka.length === 0 && kb.length === 0) {\r\n            return true;\r\n        }\r\n        if (ka.length !== kb.length) {\r\n            return false;\r\n        }\r\n        let cal = ca.length;\r\n        while (cal--) {\r\n            if (ca[cal] === a) {\r\n                return cb[cal] === b;\r\n            }\r\n        }\r\n        ca.push(a);\r\n        cb.push(b);\r\n        ka.sort();\r\n        kb.sort();\r\n        for (var j = ka.length - 1; j >= 0; j--) {\r\n            if (ka[j] !== kb[j]) {\r\n                return false;\r\n            }\r\n        }\r\n        let key;\r\n        for (let k = ka.length - 1; k >= 0; k--) {\r\n            key = ka[k];\r\n            if (!deepEquals(a[key], b[key], ca, cb)) {\r\n                return false;\r\n            }\r\n        }\r\n        ca.pop();\r\n        cb.pop();\r\n        return true;\r\n    }\r\n}\r\nconst formatDateKeys = {\r\n    d: 'day',\r\n    M: 'month',\r\n    y: 'year',\r\n    m: 'minutes',\r\n    s: 'seconds',\r\n    h: 'hours'\r\n};\r\nexport function dateFormat(date, format = 'dd.MM.yyyy') {\r\n    if (!(date instanceof Date)) {\r\n        return date;\r\n    }\r\n    const formatNumber = (str) => `00${str}`.slice(-2);\r\n    const dataDate = {\r\n        day: formatNumber(date.getDate()),\r\n        month: formatNumber(date.getMonth() + 1),\r\n        year: date.getFullYear(),\r\n        minutes: formatNumber(date.getMinutes()),\r\n        seconds: formatNumber(date.getSeconds()),\r\n        hours: formatNumber(date.getHours())\r\n    };\r\n    let strDate = '';\r\n    let countIndex = {};\r\n    for (const index in format) {\r\n        const key = formatDateKeys[format[index]];\r\n        if (key && key in dataDate) {\r\n            const str = String(dataDate[key]);\r\n            const i = countIndex[key] || 0;\r\n            strDate += str[i];\r\n            countIndex[key] = i + 1;\r\n        }\r\n        else {\r\n            strDate += format[index];\r\n        }\r\n    }\r\n    return strDate;\r\n}\r\nexport function dateParse(str, format = 'dd.MM.yyyy') {\r\n    if (!str) {\r\n        return;\r\n    }\r\n    if (str instanceof Date) {\r\n        return str;\r\n    }\r\n    const date = { day: '', month: '', year: '', minutes: '', seconds: '', hours: '' };\r\n    for (const index in format) {\r\n        const key = formatDateKeys[format[index]];\r\n        if (key && key in date && str[index] && /\\d/.test(str[index])) {\r\n            date[key] += str[index];\r\n        }\r\n    }\r\n    return new Date(date.year, parseInt(date.month) - 1, date.day, date.hours, date.minutes, date.seconds);\r\n}\r\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}