{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport RecoverRequest from '../RecoverRequest';\nimport errorFactory from '../../error/ErrorFactory';\nimport DiError, { RECOVER } from '../../error/Error';\n\nvar RecoverPasswordHandlerBase = /*#__PURE__*/function () {\n  function RecoverPasswordHandlerBase() {\n    _classCallCheck(this, RecoverPasswordHandlerBase);\n  }\n\n  _createClass(RecoverPasswordHandlerBase, [{\n    key: \"recover\",\n    value: function recover(request) {\n      RecoverPasswordHandlerBase.checkRequest(request);\n      Object.freeze(request);\n    }\n  }, {\n    key: \"canHandle\",\n    value: function canHandle(request) {\n      RecoverPasswordHandlerBase.checkRequest(request);\n    }\n  }, {\n    key: \"setNext\",\n    value: function setNext(handler) {\n      if (!(handler instanceof RecoverPasswordHandlerBase)) {\n        throw new Error('Параметр должен быть подклассом RecoverPasswordHandlerBase');\n      }\n\n      this.next = handler;\n      return this.next;\n    }\n  }, {\n    key: \"doNextHandler\",\n    value: function doNextHandler(request) {\n      if (request.error) {\n        if (!(request.error instanceof DiError)) {\n          throw new Error('Неверный тип ошибки. Создавайте ошибки через createRecoverError');\n        }\n\n        return Promise.reject(request.error);\n      }\n\n      if (this.next) {\n        return this.next.recover(request);\n      }\n\n      return Promise.resolve({\n        success: true\n      });\n    }\n  }, {\n    key: \"createRecoverError\",\n    value: function createRecoverError(msgForDeveloper, jsError, serverErrorResponse) {\n      return errorFactory(RECOVER, msgForDeveloper, jsError, serverErrorResponse);\n    }\n  }], [{\n    key: \"checkRequest\",\n    value: function checkRequest(request) {\n      if (request === null || request === undefined) throw new Error('Следует передать запрос для восстановления пароля(RecoverRequest)');\n      if (!(request instanceof RecoverRequest)) throw new Error('Параметр должен быть подклассом RecoverRequest');\n      if (!(!!request.email || !!request.captcha)) throw new Error('Запрос пустой');\n    }\n  }]);\n\n  return RecoverPasswordHandlerBase;\n}();\n\nexport default RecoverPasswordHandlerBase;","map":{"version":3,"sources":["../../../../src/application/auth/handlers/RecoverPasswordHandlerBase.js"],"names":[],"mappings":";;AAAA,OAAO,cAAP,MAA2B,mBAA3B;AACA,OAAO,YAAP,MAAyB,0BAAzB;AACA,OAAO,OAAP,IAAkB,OAAlB,QAAiC,mBAAjC;;IAEM,0B;;;;;;;4BAOI,O,EAAO;AACb,MAAA,0BAA0B,CAAC,YAA3B,CAAwC,OAAxC;AACA,MAAA,MAAM,CAAC,MAAP,CAAc,OAAd;AACD;;;8BAES,O,EAAO;AACf,MAAA,0BAA0B,CAAC,YAA3B,CAAwC,OAAxC;AACD;;;4BAEO,O,EAAO;AACb,UAAI,EAAE,OAAO,YAAY,0BAArB,CAAJ,EAAsD;AACpD,cAAM,IAAI,KAAJ,CAAU,4DAAV,CAAN;AACD;;AACD,WAAK,IAAL,GAAY,OAAZ;AACA,aAAO,KAAK,IAAZ;AACD;;;kCAEa,O,EAAO;AACnB,UAAI,OAAO,CAAC,KAAZ,EAAmB;AACjB,YAAI,EAAE,OAAO,CAAC,KAAR,YAAyB,OAA3B,CAAJ,EAAyC;AACvC,gBAAM,IAAI,KAAJ,CAAU,iEAAV,CAAN;AACD;;AACD,eAAO,OAAO,CAAC,MAAR,CAAe,OAAO,CAAC,KAAvB,CAAP;AACD;;AACD,UAAI,KAAK,IAAT,EAAe;AACb,eAAO,KAAK,IAAL,CAAU,OAAV,CAAkB,OAAlB,CAAP;AACD;;AACD,aAAO,OAAO,CAAC,OAAR,CAAgB;AAAE,QAAA,OAAO,EAAE;AAAX,OAAhB,CAAP;AACD;;;uCAEkB,e,EAAiB,O,EAAS,mB,EAAmB;AAC9D,aAAO,YAAY,CAAC,OAAD,EAAU,eAAV,EAA2B,OAA3B,EAAoC,mBAApC,CAAnB;AACD;;;iCAtCmB,O,EAAO;AACzB,UAAI,OAAO,KAAK,IAAZ,IAAoB,OAAO,KAAK,SAApC,EAA+C,MAAM,IAAI,KAAJ,CAAU,mEAAV,CAAN;AAC/C,UAAI,EAAE,OAAO,YAAY,cAArB,CAAJ,EAA0C,MAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AAC1C,UAAI,EAAE,CAAC,CAAC,OAAO,CAAC,KAAV,IAAmB,CAAC,CAAC,OAAO,CAAC,OAA/B,CAAJ,EAA6C,MAAM,IAAI,KAAJ,CAAU,eAAV,CAAN;AAC9C;;;;;;AAqCH,eAAe,0BAAf","sourceRoot":"","sourcesContent":["import RecoverRequest from '../RecoverRequest';\r\nimport errorFactory from '../../error/ErrorFactory';\r\nimport DiError, { RECOVER } from '../../error/Error';\r\nclass RecoverPasswordHandlerBase {\r\n    static checkRequest(request) {\r\n        if (request === null || request === undefined)\r\n            throw new Error('Следует передать запрос для восстановления пароля(RecoverRequest)');\r\n        if (!(request instanceof RecoverRequest))\r\n            throw new Error('Параметр должен быть подклассом RecoverRequest');\r\n        if (!(!!request.email || !!request.captcha))\r\n            throw new Error('Запрос пустой');\r\n    }\r\n    recover(request) {\r\n        RecoverPasswordHandlerBase.checkRequest(request);\r\n        Object.freeze(request);\r\n    }\r\n    canHandle(request) {\r\n        RecoverPasswordHandlerBase.checkRequest(request);\r\n    }\r\n    setNext(handler) {\r\n        if (!(handler instanceof RecoverPasswordHandlerBase)) {\r\n            throw new Error('Параметр должен быть подклассом RecoverPasswordHandlerBase');\r\n        }\r\n        this.next = handler;\r\n        return this.next;\r\n    }\r\n    doNextHandler(request) {\r\n        if (request.error) {\r\n            if (!(request.error instanceof DiError)) {\r\n                throw new Error('Неверный тип ошибки. Создавайте ошибки через createRecoverError');\r\n            }\r\n            return Promise.reject(request.error);\r\n        }\r\n        if (this.next) {\r\n            return this.next.recover(request);\r\n        }\r\n        return Promise.resolve({ success: true });\r\n    }\r\n    createRecoverError(msgForDeveloper, jsError, serverErrorResponse) {\r\n        return errorFactory(RECOVER, msgForDeveloper, jsError, serverErrorResponse);\r\n    }\r\n}\r\nexport default RecoverPasswordHandlerBase;\r\n//# sourceMappingURL=RecoverPasswordHandlerBase.js.map"]},"metadata":{},"sourceType":"module"}