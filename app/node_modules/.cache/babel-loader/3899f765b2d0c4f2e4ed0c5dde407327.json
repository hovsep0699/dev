{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Button,ButtonKinds}from'@distate/components';import{Pagination,PaginationLimit}from'../../../../common/pagination';import{getPersons}from'../../store/actions';import{personsListSeletor,personsTotalSeletor}from'../../store/selects';import{Card}from'./card';import{Tools}from'./tools';/** Система - Физические лица */export var Persons=function Persons(){var _useState=useState(10),_useState2=_slicedToArray(_useState,2),limit=_useState2[0],setLimit=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),offset=_useState4[0],setOffset=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),personInfo=_useState6[0],setPersonInfo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),idOpenCard=_useState8[0],setIsOpenCard=_useState8[1];var persons=useSelector(personsListSeletor);var total=useSelector(personsTotalSeletor);var dispatch=useDispatch();useEffect(function(){dispatch(getPersons({offset:offset,limit:limit}));},[dispatch,offset,limit]);var onOpenCard=function onOpenCard(params){setPersonInfo(params);setIsOpenCard(true);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Tools,null),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0424\\u0418\\u041E\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u041D\\u0418\\u041B\\u0421\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0430\\u0446\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,persons===null||persons===void 0?void 0:persons.map(function(item){var id=item.id,name=item.name,surname=item.surname,patronymic=item.patronymic,socialNumber=item.socialNumber,email=item.email,active=item.active;var activationStatus=active?'Активирован':'Заблокирован';var fio=[surname,name,patronymic].filter(function(item){return item;}).join(' ');return/*#__PURE__*/React.createElement(\"tr\",{key:id},/*#__PURE__*/React.createElement(\"td\",null,fio),/*#__PURE__*/React.createElement(\"td\",null,socialNumber),/*#__PURE__*/React.createElement(\"td\",null,activationStatus),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Secondary,onClick:function onClick(){return onOpenCard({fio:fio,socialNumber:socialNumber,activationStatus:activationStatus,email:email});}},\"\\u041A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:4},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(PaginationLimit,{setLimit:setLimit,limit:limit}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',marginLeft:20}},\"\\u0412\\u0421\\u0415\\u0413\\u041E \\u0417\\u0410\\u041F\\u0418\\u0421\\u0415\\u0419: \",total)),/*#__PURE__*/React.createElement(Pagination,{listLength:total,setOffset:setOffset,limit:limit})))))),personInfo&&/*#__PURE__*/React.createElement(Card,{isVisible:idOpenCard,hide:function hide(){return setIsOpenCard(false);},personInfo:personInfo}));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/system/components/persons/Persons.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Button","ButtonKinds","Pagination","PaginationLimit","getPersons","personsListSeletor","personsTotalSeletor","Card","Tools","Persons","limit","setLimit","offset","setOffset","personInfo","setPersonInfo","idOpenCard","setIsOpenCard","persons","total","dispatch","onOpenCard","params","map","item","id","name","surname","patronymic","socialNumber","email","active","activationStatus","fio","filter","join","Secondary","display","justifyContent","alignItems","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, ButtonKinds } from '@distate/components';\r\n\r\nimport { Pagination, PaginationLimit } from '../../../../common/pagination';\r\nimport { getPersons } from '../../store/actions';\r\nimport { personsListSeletor, personsTotalSeletor } from '../../store/selects';\r\nimport { Card } from './card';\r\nimport { Tools } from './tools';\r\n\r\nexport type CardItemParams = {\r\n  fio: string;\r\n  socialNumber: string;\r\n  activationStatus: string;\r\n  email: string;\r\n};\r\n\r\n/** Система - Физические лица */\r\nexport const Persons = () => {\r\n  const [limit, setLimit] = useState(10);\r\n  const [offset, setOffset] = useState(0);\r\n\r\n  const [personInfo, setPersonInfo] = useState<CardItemParams>();\r\n  const [idOpenCard, setIsOpenCard] = useState(false);\r\n\r\n  const persons = useSelector(personsListSeletor);\r\n  const total = useSelector(personsTotalSeletor);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getPersons({ offset, limit }));\r\n  }, [dispatch, offset, limit]);\r\n\r\n  const onOpenCard = (params: CardItemParams) => {\r\n    setPersonInfo(params);\r\n    setIsOpenCard(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tools />\r\n      <table className=\"table\">\r\n        <thead className=\"common-table-head\">\r\n          <tr>\r\n            <td>ФИО</td>\r\n            <td>СНИЛС</td>\r\n            <td>Активация</td>\r\n            <td></td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {persons?.map((item: any) => {\r\n            const { id, name, surname, patronymic, socialNumber, email, active } = item;\r\n            const activationStatus = active ? 'Активирован' : 'Заблокирован';\r\n\r\n            const fio = [surname, name, patronymic].filter(item => item).join(' ');\r\n\r\n            return (\r\n              <tr key={id}>\r\n                <td>{fio}</td>\r\n                <td>{socialNumber}</td>\r\n                <td>{activationStatus}</td>\r\n                <td align=\"right\">\r\n                  <Button\r\n                    kind={ButtonKinds.Secondary}\r\n                    onClick={() => onOpenCard({ fio, socialNumber, activationStatus, email })}\r\n                  >\r\n                    Карточка клиента\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td colSpan={4}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <div style={{ display: 'flex' }}>\r\n                  <PaginationLimit setLimit={setLimit} limit={limit} />\r\n                  <div style={{ display: 'flex', alignItems: 'center', marginLeft: 20 }}>\r\n                    ВСЕГО ЗАПИСЕЙ: {total}\r\n                  </div>\r\n                </div>\r\n                <Pagination listLength={total} setOffset={setOffset} limit={limit} />\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n\r\n      {personInfo && (\r\n        <Card isVisible={idOpenCard} hide={() => setIsOpenCard(false)} personInfo={personInfo!} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}