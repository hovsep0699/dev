{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import Behavior from'../parameters/Behavior';import Appearance from'../parameters/Appearance';import{LEFT,RIGHT,TOP}from'../../Placement';import Button from'../../Button';import{ICON}from'@distate/components';import{ADD,DELETE}from'../../Lbl';import{ArrayField,Option,Select,Text}from'informed';import React from'react';import DateInput from'./DateInput';import AutocompleteService from'@distate/core/dist/application/autocomplete/AutocompleteService';import Autocomplete from'../../autocomplete/Autocomplete';import get from'get-value';import set from'set-value';import deepmerge from'deepmerge';var DocumentGroup=/*#__PURE__*/function(){function DocumentGroup(builder,BuilderClass,styles){_classCallCheck(this,DocumentGroup);this._groups={};this._builder=builder;this._content=this._builder.content;this._styles=styles;this._BuilderClass=BuilderClass;this._initialValues={};}_createClass(DocumentGroup,[{key:\"handleGroup\",value:function handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex){if(!Array.isArray(this._groups[GroupDomainVO.field])){this._groups[GroupDomainVO.field]=[];}if(!Array.isArray(this._groups[GroupDomainVO.field][groupIndex])){this._groups[GroupDomainVO.field][groupIndex]=[];}this._groups[GroupDomainVO.field][groupIndex].push({domain:DomainVO,initialValue:initialFieldDomain.value});}},{key:\"buildGroup\",value:function buildGroup(GroupDomainVO,createElementsMap,behavior,appearance,behaviors,appearances){var _this=this;var isRequired=Object.values(behaviors).some(function(behavior){return _this._builder.handleBehavior(behavior).isRequired===true;});var _this$_builder$handle=this._builder.handleBehavior(behavior),initialFieldDomain=_this$_builder$handle.initialFieldDomain;if(get(initialFieldDomain,'value')){set(this._initialValues,GroupDomainVO.field,initialFieldDomain.value);}var inputFields=function inputFields(){return GroupDomainVO.VOs.map(function(DomainVO){var initialValue={value:get(_this._initialValues,\"\".concat(GroupDomainVO.field,\".\").concat(DomainVO.field))}||{};var behavior=_this._builder.handleBehavior(behaviors[DomainVO.field]);var groupedFieldBehavior=new Behavior(_objectSpread({scope:GroupDomainVO.field,initialFieldDomain:initialValue},behavior));var appearance=_this._builder.handleAppearance(appearances[DomainVO.field]);var build=createElementsMap[DomainVO.field];return build&&build.call(_this._builder,DomainVO,groupedFieldBehavior,appearance);});};var group=function group(){return/*#__PURE__*/React.createElement(\"li\",{key:\"\".concat(GroupDomainVO.field)},/*#__PURE__*/React.createElement(\"div\",{className:\"group \".concat(_this._styles.verticalAlignTop)},/*#__PURE__*/React.createElement(\"label\",{className:\"ds-field-name top \".concat(_this._styles.hidden)},GroupDomainVO.name),_this._builder.getLabel(GroupDomainVO.name,new Behavior({isRequired:isRequired}),new Appearance({align:LEFT}))),/*#__PURE__*/React.createElement(\"div\",{className:_this._styles.group},inputFields()));};this._content.push(group);}},{key:\"buildArrayGroup\",value:function buildArrayGroup(GroupDomainVO,createElementsMap,behavior,appearance,behaviors,appearances){var _this2=this;var _this$_builder$handle2=this._builder.handleBehavior(behavior),initialFieldDomain=_this$_builder$handle2.initialFieldDomain;this._initialValues=_objectSpread(_objectSpread({},this._initialValues),{},_defineProperty({},GroupDomainVO.field,initialFieldDomain?initialFieldDomain.value:[{}]));var errorMsg=get(this._builder.component.state.errors,\"\".concat(GroupDomainVO.field));var BTN_WIDTH=130;// TODO нужно чистить после вызова метода add\n// const clearStartInput = GroupDomainVO => {\n//   GroupDomainVO.VOs.forEach(DomainVO => {\n//     const field = `start_${GroupDomainVO.field}_${DomainVO.field}`;\n//     this._builder.formApi.setValue(field, '');\n//   });\n// };\nvar createStartElement=function createStartElement(GroupDomainVO){return GroupDomainVO.VOs.map(function(DomainVO){if(DomainVO.VOs){return createStartElement(DomainVO);}var inputBuilder=createElementsMap[DomainVO.field].bind(_this2._builder);var behavior=behaviors[DomainVO.field];var appearance=appearances[DomainVO.field];var width=appearances[DomainVO.field].width;return/*#__PURE__*/React.createElement(\"div\",{className:\"group left\",key:\"start_\".concat(GroupDomainVO.field,\"_\").concat(DomainVO.field),style:{width:width}},inputBuilder(GroupDomainVO,DomainVO,undefined,behavior,appearance)());});};var groupStartInput=function groupStartInput(add){return/*#__PURE__*/React.createElement(\"li\",{className:appearance.customClasses},/*#__PURE__*/React.createElement(\"div\",{className:\"group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"ds-field-name top \".concat(_this2._styles.hidden)},GroupDomainVO.name),_this2._builder.getLabel(GroupDomainVO.name,new Behavior({isRequired:false}),new Appearance({align:LEFT}))),/*#__PURE__*/React.createElement(\"div\",{className:_this2._styles.group},createStartElement(GroupDomainVO),/*#__PURE__*/React.createElement(\"div\",{className:\"group right\"},/*#__PURE__*/React.createElement(\"label\",{className:\"ds-field-name top \".concat(_this2._styles.hidden)},GroupDomainVO.name),/*#__PURE__*/React.createElement(Button,{type:\"button\",iconClass:ICON.add,style:{width:BTN_WIDTH},onClick:function onClick(){add();}},ADD)),/*#__PURE__*/React.createElement(\"span\",{className:\"ds-field-name bottom error\"},typeof errorMsg==='string'&&errorMsg||_this2._builder.formState&&_this2._builder.formState.errors[GroupDomainVO.field])));};var deleteBtn=function deleteBtn(remove){return/*#__PURE__*/React.createElement(Button,{type:\"button\",iconClass:ICON.delete,style:{width:BTN_WIDTH},onClick:function onClick(){remove();}},DELETE);};var createElement=function createElement(GroupDomainVO,index,fields){return GroupDomainVO.VOs.map(function(DomainVO){if(DomainVO.VOs){return createElement(DomainVO,index,fields);}var inputBuilder=createElementsMap[DomainVO.field].bind(_this2._builder);var appearance=appearances[DomainVO.field];var valueField;if(index===fields.length-1){valueField=\"start_\".concat(GroupDomainVO.field,\"_\").concat(DomainVO.field);}else{valueField=\"\".concat(GroupDomainVO.field,\"[\").concat(index,\"].\").concat(DomainVO.field);}var value=_this2._builder.formApi.getValue(valueField);var initValue=_this2._initialValues[\"\".concat(GroupDomainVO.field)]&&_this2._initialValues[\"\".concat(GroupDomainVO.field)][index];var behavior=new Behavior(_objectSpread(_objectSpread({},behaviors[DomainVO.field]),{},{initialFieldDomain:{value:value||initValue&&initValue[DomainVO.field]}}));var width=appearance.width;return/*#__PURE__*/React.createElement(\"div\",{className:\"group left\",style:{width:width}},inputBuilder(GroupDomainVO,DomainVO,index,behavior,appearance)());});};var groupInputs=function groupInputs(fields){var labelIndex=fields.length+1;var straightFieldsArray=fields.map(function(field,index){labelIndex--;return/*#__PURE__*/React.createElement(\"li\",{key:field.key,className:appearance.customClasses},_this2._builder.getLabel(labelIndex,new Behavior({isRequired:false}),new Appearance({align:RIGHT})),/*#__PURE__*/React.createElement(\"div\",{className:\"group\",key:\"\".concat(field.key,\"_group\")},createElement(GroupDomainVO,index,fields),/*#__PURE__*/React.createElement(\"div\",{className:\"group right\",key:\"\".concat(field.key,\"_delete\")},deleteBtn(field.remove))));});return straightFieldsArray.reverse();};var group=function group(){return/*#__PURE__*/React.createElement(ArrayField,{field:GroupDomainVO.field,key:GroupDomainVO.field,initialValue:_this2._initialValues[GroupDomainVO.field]},function(_ref){var fields=_ref.fields,add=_ref.add;return/*#__PURE__*/React.createElement(React.Fragment,null,groupStartInput(add),groupInputs(fields));});};this._content.push(group);}},{key:\"buildArrayGroupInput\",value:function buildArrayGroupInput(GroupDomainVO,DomainVO,groupIndex,behavior,appearance){var _this$_builder$handle3=this._builder.handleBehavior(behavior),isRequired=_this$_builder$handle3.isRequired,initialFieldDomain=_this$_builder$handle3.initialFieldDomain,onChange=_this$_builder$handle3.onChange,showErrorMsg=_this$_builder$handle3.showErrorMsg;var _this$_builder$handle4=this._builder.handleAppearance(appearance),customClasses=_this$_builder$handle4.customClasses;var errorMsg='';var groupErrors=get(this._builder.component.state.errors,GroupDomainVO.field);if(groupErrors){var obj=groupErrors[groupIndex];var _field=DomainVO.field;var errors=obj&&obj[\"\".concat(_field)];errorMsg=errors&&errors.errors[0];}var input,field;if(groupIndex!==undefined){this.handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex);field=\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(DomainVO.field);if(isRequired&&!this._builder._requiredFields.includes(field)){this._builder._requiredFields.push(field);}input=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Text,{type:\"text\",field:field,title:DomainVO.hint,initialValue:initialFieldDomain&&initialFieldDomain.value,className:this._BuilderClass.createInputClasses(this._builder.formApi,field,customClasses),placeholder:DomainVO.placeholder,mask:DomainVO.mask,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange,autoComplete:\"off\"}),showErrorMsg&&/*#__PURE__*/React.createElement(\"span\",{className:\"ds-field-name bottom error\"},errorMsg));}else{field=\"start_\".concat(GroupDomainVO.field,\"_\").concat(DomainVO.field);input=/*#__PURE__*/React.createElement(React.Fragment,null,this._builder.getLabel(DomainVO.name,new Behavior({isRequired:isRequired}),new Appearance({align:TOP})),/*#__PURE__*/React.createElement(Text,{type:\"text\",field:field,title:DomainVO.hint,initialValue:initialFieldDomain&&initialFieldDomain.value,className:this._BuilderClass.createInputClasses(this._builder.formApi,null,customClasses),placeholder:DomainVO.placeholder,mask:DomainVO.mask,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange}));}return function(){return input;};}},{key:\"buildArrayGroupDateInput\",value:function buildArrayGroupDateInput(GroupDomainVO,DomainVO,groupIndex,behavior,appearance){var _this$_builder$handle5=this._builder.handleBehavior(behavior),isRequired=_this$_builder$handle5.isRequired,initialFieldDomain=_this$_builder$handle5.initialFieldDomain,onChange=_this$_builder$handle5.onChange,showErrorMsg=_this$_builder$handle5.showErrorMsg;var errorMsg='';var groupErrors=get(this._builder.component.state.errors,GroupDomainVO.field);if(groupErrors){var obj=groupErrors[groupIndex];var _field2=DomainVO.field;var errors=obj&&obj[\"\".concat(_field2)];errorMsg=errors&&errors.errors[0];}var input,field;if(groupIndex!==undefined){this.handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex);field=\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(DomainVO.field);if(isRequired&&!this._builder._requiredFields.includes(field)){this._builder._requiredFields.push(field);}input=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(DateInput,{field:field,title:DomainVO.hint,initialValue:initialFieldDomain&&initialFieldDomain.value,className:this._BuilderClass.createInputClasses(this._builder.formApi,field,\"ds-input date \".concat(this._styles.width100)),placeholder:DomainVO.placeholder,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange}),showErrorMsg&&/*#__PURE__*/React.createElement(\"span\",{className:\"ds-field-name bottom error\"},errorMsg));}else{field=\"start_\".concat(GroupDomainVO.field,\"_\").concat(DomainVO.field);input=/*#__PURE__*/React.createElement(React.Fragment,null,this._builder.getLabel(DomainVO.name,new Behavior({isRequired:isRequired}),new Appearance({align:TOP})),/*#__PURE__*/React.createElement(DateInput,{field:field,title:DomainVO.hint,initialValue:initialFieldDomain&&initialFieldDomain.value,className:this._BuilderClass.createInputClasses(this._builder.formApi,null,\"ds-input date \".concat(this._styles.width100)),placeholder:DomainVO.placeholder,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange}));}return function(){return input;};}},{key:\"buildArrayGroupAutocomplete\",value:function buildArrayGroupAutocomplete(GroupDomainVO,DomainVO,groupIndex,behavior,appearance){var _this3=this;var _this$_builder$handle6=this._builder.handleBehavior(behavior),initialFieldDomain=_this$_builder$handle6.initialFieldDomain,onChange=_this$_builder$handle6.onChange,scope=_this$_builder$handle6.scope,componentStateAdditionalDataConfig=_this$_builder$handle6.componentStateAdditionalDataConfig,showErrorMsg=_this$_builder$handle6.showErrorMsg;var _this$_builder$handle7=this._builder.handleAppearance(appearance),width=_this$_builder$handle7.width,customClasses=_this$_builder$handle7.customClasses;var errorMsg='';var groupErrors=get(this._builder.component.state.errors,GroupDomainVO.field);if(groupErrors){var obj=groupErrors[groupIndex];var field=DomainVO.field;var errors=obj&&obj[\"\".concat(field)];errorMsg=errors&&errors.errors[0];}var autocomplete;var acService=AutocompleteService[DomainVO.field];var fieldName=scope||DomainVO.field;var handleItemSelect=function handleItemSelect(field,fieldName){return function(ajaxResponseValues){return function(selectedValue){var formattedData={};var updateFormattedData=function updateFormattedData(selectedItem){if(componentStateAdditionalDataConfig&&componentStateAdditionalDataConfig.length){componentStateAdditionalDataConfig.forEach(function(_ref2){var objectPath=_ref2.objectPath,acSelector=_ref2.acSelector;var dataToAdd=get(selectedItem,acSelector)||null;set(formattedData,objectPath,dataToAdd);});}else{formattedData[fieldName]=selectedItem?selectedItem.title:null;}};if(ajaxResponseValues){var selectedItem=ajaxResponseValues.rows.find(function(item){return item.title===selectedValue;});updateFormattedData(selectedItem);_this3._builder.formApi.setValue(field,selectedItem.title);}else{updateFormattedData();}var fieldState=_this3._builder.component.state[GroupDomainVO.field]||[];if(fieldState[groupIndex]){fieldState[groupIndex]=deepmerge(fieldState[groupIndex],formattedData);}else{fieldState[groupIndex]=formattedData;}_this3._builder.component.setState(_defineProperty({},GroupDomainVO.field,fieldState));};};};if(groupIndex!==undefined){var _field3=\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(fieldName);this.handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex);autocomplete=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Autocomplete,{doAjax:acService.request,formatAjaxRes:function formatAjaxRes(res){return res.rows.map(function(row){return row[acService.field];});},handleItemSelect:handleItemSelect(_field3,fieldName),width:240},/*#__PURE__*/React.createElement(Text,{type:\"text\",field:_field3,title:DomainVO.hint,initialValue:initialFieldDomain&&initialFieldDomain.value,className:this._BuilderClass.createInputClasses(this._builder.formApi,DomainVO.field,customClasses),placeholder:DomainVO.placeholder,mask:DomainVO.mask,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange})),showErrorMsg&&/*#__PURE__*/React.createElement(\"span\",{className:\"ds-field-name bottom error\"},errorMsg));}else{// TODO протестить работоспособность этой части (вне таблицы)\nvar _field4=\"start_\".concat(GroupDomainVO.field,\"_\").concat(fieldName);autocomplete=/*#__PURE__*/React.createElement(React.Fragment,null,this._builder.getLabel(DomainVO.name,new Behavior({isRequired:false}),new Appearance({align:TOP})),/*#__PURE__*/React.createElement(Autocomplete,{doAjax:acService.request,formatAjaxRes:function formatAjaxRes(res){return res.rows.map(function(row){return row[acService.field];});},handleItemSelect:handleItemSelect(_field4,fieldName),width:width},/*#__PURE__*/React.createElement(Text,{type:\"text\",field:_field4,title:DomainVO.hint,initialValue:initialFieldDomain&&initialFieldDomain.value,className:this._BuilderClass.createInputClasses(this._builder.formApi,null,customClasses),placeholder:DomainVO.placeholder,mask:DomainVO.mask,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true})));}return function(){return autocomplete;};}},{key:\"buildArrayGroupSelect\",value:function buildArrayGroupSelect(GroupDomainVO,DomainVO,groupIndex,behavior,appearance){var _this$_builder$handle8=this._builder.handleBehavior(behavior),initialFieldDomain=_this$_builder$handle8.initialFieldDomain,onChange=_this$_builder$handle8.onChange,showErrorMsg=_this$_builder$handle8.showErrorMsg;var _this$_builder$handle9=this._builder.handleAppearance(appearance),width=_this$_builder$handle9.width,customClasses=_this$_builder$handle9.customClasses;var errorMsg='';var groupErrors=get(this._builder.component.state.errors,GroupDomainVO.field);if(groupErrors){var obj=groupErrors[groupIndex];var field=DomainVO.field;var errors=obj&&obj[\"\".concat(field)];errorMsg=errors&&errors.errors[0];}var select;var options=DomainVO.options.map(function(_ref3,index){var value=_ref3.value,title=_ref3.title;return/*#__PURE__*/React.createElement(Option,{value:value,key:\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(DomainVO.field).concat(index)},title);});var placeholderOption=DomainVO.placeholder&&/*#__PURE__*/React.createElement(Option,{value:\"\",disabled:true,key:\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(DomainVO.field,\".placeholder\")},DomainVO.placeholder);var initialValue=initialFieldDomain&&initialFieldDomain.value!==''?initialFieldDomain.value:DomainVO.options[0].value;if(groupIndex!==undefined){var _field5=\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(DomainVO.field);this.handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex);select=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Select,{field:_field5,title:DomainVO.hint,initialValue:initialValue,style:{width:width},className:this._BuilderClass.createInputClasses(this._builder.formApi,DomainVO.field,customClasses),mask:DomainVO.mask,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange},placeholderOption,options),showErrorMsg&&/*#__PURE__*/React.createElement(\"span\",{className:\"ds-field-name bottom error\"},errorMsg));}else{var _field6=\"start_\".concat(GroupDomainVO.field,\"_\").concat(DomainVO.field);select=/*#__PURE__*/React.createElement(React.Fragment,null,this._builder.getLabel(DomainVO.name,new Behavior({isRequired:false}),new Appearance({align:TOP})),/*#__PURE__*/React.createElement(Select,{field:_field6,title:DomainVO.hint,initialValue:initialValue,style:{width:width},className:this._BuilderClass.createInputClasses(this._builder.formApi,DomainVO.field,customClasses),mask:DomainVO.mask,validate:DomainVO.validate,validateOnChange:true,validateOnBlur:true,onChange:onChange},placeholderOption,options));}return function(){return select;};}},{key:\"buildArrayGroupComponent\",value:function buildArrayGroupComponent(component){var _this4=this;return function(GroupDomainVO,DomainVO,groupIndex,behavior,appearance){var _this4$_builder$handl=_this4._builder.handleBehavior(behavior),initialFieldDomain=_this4$_builder$handl.initialFieldDomain,customFieldName=_this4$_builder$handl.customFieldName;var arrayGroupComponent;if(groupIndex!==undefined){_this4.handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex);var scope=\"\".concat(GroupDomainVO.field,\".\").concat(groupIndex);var domainFieldName=customFieldName||DomainVO.field;var initialValue=get(_this4._builder._component.state,\"\".concat(GroupDomainVO.field,\".\").concat(groupIndex,\".\").concat(domainFieldName));var componentBehavior=Behavior.mixin(behavior,{scope:scope,initialFieldDomain:{value:initialValue}});arrayGroupComponent=_this4._builder.buildComponent(component)(DomainVO,componentBehavior,appearance);}return function(){return arrayGroupComponent;};};}},{key:\"buildArrayGroupModal\",value:function buildArrayGroupModal(GroupDomainVO,DomainVO,groupIndex,behavior,appearance){var _this$_builder$handle10=this._builder.handleBehavior(behavior),initialFieldDomain=_this$_builder$handle10.initialFieldDomain,modalBuilder=_this$_builder$handle10.modalBuilder;var modal;if(groupIndex!==undefined){var scope=\"\".concat(GroupDomainVO.field,\"[\").concat(groupIndex,\"].\").concat(DomainVO.field);this.handleGroup(GroupDomainVO,DomainVO,initialFieldDomain,groupIndex);modal=modalBuilder(this._builder,scope);}else{var _scope=\"start_\".concat(GroupDomainVO.field,\"_\").concat(DomainVO.field);modal=/*#__PURE__*/React.createElement(React.Fragment,null,this._builder.getLabel(DomainVO.name,new Behavior(),new Appearance({align:TOP})),modalBuilder(this._builder,_scope));}return function(){return modal;};}}]);return DocumentGroup;}();export default DocumentGroup;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/common/form/components/DocumentGroup.js"],"names":["Behavior","Appearance","LEFT","RIGHT","TOP","Button","ICON","ADD","DELETE","ArrayField","Option","Select","Text","React","DateInput","AutocompleteService","Autocomplete","get","set","deepmerge","DocumentGroup","builder","BuilderClass","styles","_groups","_builder","_content","content","_styles","_BuilderClass","_initialValues","GroupDomainVO","DomainVO","initialFieldDomain","groupIndex","Array","isArray","field","push","domain","initialValue","value","createElementsMap","behavior","appearance","behaviors","appearances","isRequired","Object","values","some","handleBehavior","inputFields","VOs","map","groupedFieldBehavior","scope","handleAppearance","build","call","group","verticalAlignTop","hidden","name","getLabel","align","errorMsg","component","state","errors","BTN_WIDTH","createStartElement","inputBuilder","bind","width","undefined","groupStartInput","add","customClasses","formState","deleteBtn","remove","delete","createElement","index","fields","valueField","length","formApi","getValue","initValue","groupInputs","labelIndex","straightFieldsArray","key","reverse","onChange","showErrorMsg","groupErrors","obj","input","handleGroup","_requiredFields","includes","hint","createInputClasses","placeholder","mask","validate","width100","componentStateAdditionalDataConfig","autocomplete","acService","fieldName","handleItemSelect","ajaxResponseValues","selectedValue","formattedData","updateFormattedData","selectedItem","forEach","objectPath","acSelector","dataToAdd","title","rows","find","item","setValue","fieldState","setState","request","res","row","select","options","placeholderOption","customFieldName","arrayGroupComponent","domainFieldName","_component","componentBehavior","mixin","buildComponent","modalBuilder","modal"],"mappings":"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","sourcesContent":["import Behavior from '../parameters/Behavior';\r\nimport Appearance from '../parameters/Appearance';\r\nimport { LEFT, RIGHT, TOP } from '../../Placement';\r\nimport Button from '../../Button';\r\nimport { ICON } from '@distate/components';\r\nimport { ADD, DELETE } from '../../Lbl';\r\nimport { ArrayField, Option, Select, Text } from 'informed';\r\nimport React from 'react';\r\nimport DateInput from './DateInput';\r\nimport AutocompleteService from '@distate/core/dist/application/autocomplete/AutocompleteService';\r\nimport Autocomplete from '../../autocomplete/Autocomplete';\r\nimport get from 'get-value';\r\nimport set from 'set-value';\r\nimport deepmerge from 'deepmerge';\r\n\r\nclass DocumentGroup {\r\n  constructor(builder, BuilderClass, styles) {\r\n    this._groups = {};\r\n    this._builder = builder;\r\n    this._content = this._builder.content;\r\n    this._styles = styles;\r\n    this._BuilderClass = BuilderClass;\r\n    this._initialValues = {};\r\n  }\r\n\r\n  handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex) {\r\n    if (!Array.isArray(this._groups[GroupDomainVO.field])) {\r\n      this._groups[GroupDomainVO.field] = [];\r\n    }\r\n    if (!Array.isArray(this._groups[GroupDomainVO.field][groupIndex])) {\r\n      this._groups[GroupDomainVO.field][groupIndex] = [];\r\n    }\r\n\r\n    this._groups[GroupDomainVO.field][groupIndex].push({\r\n      domain: DomainVO,\r\n      initialValue: initialFieldDomain.value\r\n    });\r\n  }\r\n\r\n  buildGroup(GroupDomainVO, createElementsMap, behavior, appearance, behaviors, appearances) {\r\n    const isRequired = Object.values(behaviors).some(\r\n      behavior => this._builder.handleBehavior(behavior).isRequired === true\r\n    );\r\n    const { initialFieldDomain } = this._builder.handleBehavior(behavior);\r\n\r\n    if (get(initialFieldDomain, 'value')) {\r\n      set(this._initialValues, GroupDomainVO.field, initialFieldDomain.value);\r\n    }\r\n\r\n    const inputFields = () =>\r\n      GroupDomainVO.VOs.map(DomainVO => {\r\n\r\n        const initialValue =\r\n          {\r\n            value: get(this._initialValues, `${GroupDomainVO.field}.${DomainVO.field}`)\r\n          } || {};\r\n        const behavior = this._builder.handleBehavior(behaviors[DomainVO.field]);\r\n        const groupedFieldBehavior = new Behavior({\r\n          scope: GroupDomainVO.field,\r\n          initialFieldDomain: initialValue,\r\n          ...behavior\r\n        });\r\n        const appearance = this._builder.handleAppearance(appearances[DomainVO.field]);\r\n        const build = createElementsMap[DomainVO.field];\r\n        return build && build.call(this._builder, DomainVO, groupedFieldBehavior, appearance);\r\n      });\r\n    const group = () => (\r\n      <li key={`${GroupDomainVO.field}`}>\r\n        <div className={`group ${this._styles.verticalAlignTop}`}>\r\n          <label className={`ds-field-name top ${this._styles.hidden}`}>{GroupDomainVO.name}</label>\r\n          {this._builder.getLabel(\r\n            GroupDomainVO.name,\r\n            new Behavior({ isRequired }),\r\n            new Appearance({ align: LEFT })\r\n          )}\r\n        </div>\r\n        <div className={this._styles.group}>{inputFields()}</div>\r\n      </li>\r\n    );\r\n    this._content.push(group);\r\n  }\r\n\r\n  buildArrayGroup(GroupDomainVO, createElementsMap, behavior, appearance, behaviors, appearances) {\r\n    const { initialFieldDomain } = this._builder.handleBehavior(behavior);\r\n    this._initialValues = {\r\n      ...this._initialValues,\r\n      [GroupDomainVO.field]: initialFieldDomain ? initialFieldDomain.value : [{}]\r\n    };\r\n    const errorMsg = get(this._builder.component.state.errors, `${GroupDomainVO.field}`);\r\n\r\n    const BTN_WIDTH = 130;\r\n    // TODO нужно чистить после вызова метода add\r\n    // const clearStartInput = GroupDomainVO => {\r\n    //   GroupDomainVO.VOs.forEach(DomainVO => {\r\n    //     const field = `start_${GroupDomainVO.field}_${DomainVO.field}`;\r\n    //     this._builder.formApi.setValue(field, '');\r\n    //   });\r\n    // };\r\n    const createStartElement = GroupDomainVO => {\r\n      return GroupDomainVO.VOs.map(DomainVO => {\r\n        if (DomainVO.VOs) {\r\n          return createStartElement(DomainVO);\r\n        }\r\n        const inputBuilder = createElementsMap[DomainVO.field].bind(this._builder);\r\n        const behavior = behaviors[DomainVO.field];\r\n        const appearance = appearances[DomainVO.field];\r\n\r\n        const { width } = appearances[DomainVO.field];\r\n        return (\r\n          <div\r\n            className=\"group left\"\r\n            key={`start_${GroupDomainVO.field}_${DomainVO.field}`}\r\n            style={{ width }}\r\n          >\r\n            {inputBuilder(GroupDomainVO, DomainVO, undefined, behavior, appearance)()}\r\n          </div>\r\n        );\r\n      });\r\n    };\r\n    const groupStartInput = add => {\r\n      return (\r\n        <li className={appearance.customClasses}>\r\n          <div className=\"group\">\r\n            <label className={`ds-field-name top ${this._styles.hidden}`}>\r\n              {GroupDomainVO.name}\r\n            </label>\r\n            {this._builder.getLabel(\r\n              GroupDomainVO.name,\r\n              new Behavior({ isRequired: false }),\r\n              new Appearance({ align: LEFT })\r\n            )}\r\n          </div>\r\n          <div className={this._styles.group}>\r\n            {createStartElement(GroupDomainVO)}\r\n            <div className=\"group right\">\r\n              <label className={`ds-field-name top ${this._styles.hidden}`}>\r\n                {GroupDomainVO.name}\r\n              </label>\r\n              <Button\r\n                type=\"button\"\r\n                iconClass={ICON.add}\r\n                style={{ width: BTN_WIDTH }}\r\n                onClick={() => {\r\n                  add();\r\n                }}\r\n              >\r\n                {ADD}\r\n              </Button>\r\n            </div>\r\n            <span className=\"ds-field-name bottom error\">\r\n              {(typeof errorMsg === 'string' && errorMsg) ||\r\n                (this._builder.formState && this._builder.formState.errors[GroupDomainVO.field])}\r\n            </span>\r\n          </div>\r\n        </li>\r\n      );\r\n    };\r\n    const deleteBtn = remove => {\r\n      return (\r\n        <Button\r\n          type=\"button\"\r\n          iconClass={ICON.delete}\r\n          style={{ width: BTN_WIDTH }}\r\n          onClick={() => {\r\n            remove();\r\n          }}\r\n        >\r\n          {DELETE}\r\n        </Button>\r\n      );\r\n    };\r\n    const createElement = (GroupDomainVO, index, fields) => {\r\n      return GroupDomainVO.VOs.map(DomainVO => {\r\n        if (DomainVO.VOs) {\r\n          return createElement(DomainVO, index, fields);\r\n        }\r\n        const inputBuilder = createElementsMap[DomainVO.field].bind(this._builder);\r\n        const appearance = appearances[DomainVO.field];\r\n\r\n        let valueField;\r\n        if (index === fields.length - 1) {\r\n          valueField = `start_${GroupDomainVO.field}_${DomainVO.field}`;\r\n        } else {\r\n          valueField = `${GroupDomainVO.field}[${index}].${DomainVO.field}`;\r\n        }\r\n\r\n        const value = this._builder.formApi.getValue(valueField);\r\n\r\n        const initValue =\r\n          this._initialValues[`${GroupDomainVO.field}`] &&\r\n          this._initialValues[`${GroupDomainVO.field}`][index];\r\n\r\n        const behavior = new Behavior({\r\n          ...behaviors[DomainVO.field],\r\n          initialFieldDomain: {\r\n            value: value || (initValue && initValue[DomainVO.field])\r\n          }\r\n        });\r\n        const { width } = appearance;\r\n        return (\r\n          <div className=\"group left\" style={{ width }}>\r\n            {inputBuilder(GroupDomainVO, DomainVO, index, behavior, appearance)()}\r\n          </div>\r\n        );\r\n      });\r\n    };\r\n    const groupInputs = fields => {\r\n      let labelIndex = fields.length + 1;\r\n      const straightFieldsArray = fields.map((field, index) => {\r\n        labelIndex--;\r\n        return (\r\n          <li key={field.key} className={appearance.customClasses}>\r\n            {this._builder.getLabel(\r\n              labelIndex,\r\n              new Behavior({ isRequired: false }),\r\n              new Appearance({ align: RIGHT })\r\n            )}\r\n            <div className=\"group\" key={`${field.key}_group`}>\r\n              {createElement(GroupDomainVO, index, fields)}\r\n              <div className=\"group right\" key={`${field.key}_delete`}>\r\n                {deleteBtn(field.remove)}\r\n              </div>\r\n            </div>\r\n          </li>\r\n        );\r\n      });\r\n      return straightFieldsArray.reverse();\r\n    };\r\n\r\n    const group = () => (\r\n      <ArrayField\r\n        field={GroupDomainVO.field}\r\n        key={GroupDomainVO.field}\r\n        initialValue={this._initialValues[GroupDomainVO.field]}\r\n      >\r\n        {({ fields, add }) => {\r\n          return (\r\n            <React.Fragment>\r\n              {groupStartInput(add)}\r\n              {groupInputs(fields)}\r\n            </React.Fragment>\r\n          );\r\n        }}\r\n      </ArrayField>\r\n    );\r\n    this._content.push(group);\r\n  }\r\n\r\n  buildArrayGroupInput(GroupDomainVO, DomainVO, groupIndex, behavior, appearance) {\r\n    const { isRequired, initialFieldDomain, onChange, showErrorMsg } = this._builder.handleBehavior(\r\n      behavior\r\n    );\r\n    const { customClasses } = this._builder.handleAppearance(appearance);\r\n\r\n    let errorMsg = '';\r\n    const groupErrors = get(this._builder.component.state.errors, GroupDomainVO.field);\r\n    if (groupErrors) {\r\n      const obj = groupErrors[groupIndex];\r\n      const field = DomainVO.field;\r\n      const errors = obj && obj[`${field}`];\r\n      errorMsg = errors && errors.errors[0];\r\n    }\r\n\r\n    let input, field;\r\n    if (groupIndex !== undefined) {\r\n      this.handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex);\r\n      field = `${GroupDomainVO.field}[${groupIndex}].${DomainVO.field}`;\r\n      if (isRequired && !this._builder._requiredFields.includes(field)) {\r\n        this._builder._requiredFields.push(field);\r\n      }\r\n      input = (\r\n        <React.Fragment>\r\n          <Text\r\n            type=\"text\"\r\n            field={field}\r\n            title={DomainVO.hint}\r\n            initialValue={initialFieldDomain && initialFieldDomain.value}\r\n            className={this._BuilderClass.createInputClasses(\r\n              this._builder.formApi,\r\n              field,\r\n              customClasses\r\n            )}\r\n            placeholder={DomainVO.placeholder}\r\n            mask={DomainVO.mask}\r\n            validate={DomainVO.validate}\r\n            validateOnChange\r\n            validateOnBlur\r\n            onChange={onChange}\r\n            autoComplete=\"off\"\r\n          />\r\n          {showErrorMsg && <span className=\"ds-field-name bottom error\">{errorMsg}</span>}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      field = `start_${GroupDomainVO.field}_${DomainVO.field}`;\r\n      input = (\r\n        <React.Fragment>\r\n          {this._builder.getLabel(\r\n            DomainVO.name,\r\n            new Behavior({ isRequired }),\r\n            new Appearance({ align: TOP })\r\n          )}\r\n          <Text\r\n            type=\"text\"\r\n            field={field}\r\n            title={DomainVO.hint}\r\n            initialValue={initialFieldDomain && initialFieldDomain.value}\r\n            className={this._BuilderClass.createInputClasses(\r\n              this._builder.formApi,\r\n              null,\r\n              customClasses\r\n            )}\r\n            placeholder={DomainVO.placeholder}\r\n            mask={DomainVO.mask}\r\n            validate={DomainVO.validate}\r\n            validateOnChange\r\n            validateOnBlur\r\n            onChange={onChange}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return () => input;\r\n  }\r\n\r\n  buildArrayGroupDateInput(GroupDomainVO, DomainVO, groupIndex, behavior, appearance) {\r\n    const { isRequired, initialFieldDomain, onChange, showErrorMsg } = this._builder.handleBehavior(\r\n      behavior\r\n    );\r\n    let errorMsg = '';\r\n    const groupErrors = get(this._builder.component.state.errors, GroupDomainVO.field);\r\n    if (groupErrors) {\r\n      const obj = groupErrors[groupIndex];\r\n      const field = DomainVO.field;\r\n      const errors = obj && obj[`${field}`];\r\n      errorMsg = errors && errors.errors[0];\r\n    }\r\n    let input, field;\r\n    if (groupIndex !== undefined) {\r\n      this.handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex);\r\n      field = `${GroupDomainVO.field}[${groupIndex}].${DomainVO.field}`;\r\n      if (isRequired && !this._builder._requiredFields.includes(field)) {\r\n        this._builder._requiredFields.push(field);\r\n      }\r\n      input = (\r\n        <React.Fragment>\r\n          <DateInput\r\n            field={field}\r\n            title={DomainVO.hint}\r\n            initialValue={initialFieldDomain && initialFieldDomain.value}\r\n            className={this._BuilderClass.createInputClasses(\r\n              this._builder.formApi,\r\n              field,\r\n              `ds-input date ${this._styles.width100}`\r\n            )}\r\n            placeholder={DomainVO.placeholder}\r\n            validate={DomainVO.validate}\r\n            validateOnChange\r\n            validateOnBlur\r\n            onChange={onChange}\r\n          />\r\n          {showErrorMsg && <span className=\"ds-field-name bottom error\">{errorMsg}</span>}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      field = `start_${GroupDomainVO.field}_${DomainVO.field}`;\r\n      input = (\r\n        <React.Fragment>\r\n          {this._builder.getLabel(\r\n            DomainVO.name,\r\n            new Behavior({ isRequired }),\r\n            new Appearance({ align: TOP })\r\n          )}\r\n          <DateInput\r\n            field={field}\r\n            title={DomainVO.hint}\r\n            initialValue={initialFieldDomain && initialFieldDomain.value}\r\n            className={this._BuilderClass.createInputClasses(\r\n              this._builder.formApi,\r\n              null,\r\n              `ds-input date ${this._styles.width100}`\r\n            )}\r\n            placeholder={DomainVO.placeholder}\r\n            validate={DomainVO.validate}\r\n            validateOnChange\r\n            validateOnBlur\r\n            onChange={onChange}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return () => input;\r\n  }\r\n\r\n  buildArrayGroupAutocomplete(GroupDomainVO, DomainVO, groupIndex, behavior, appearance) {\r\n    const {\r\n      initialFieldDomain,\r\n      onChange,\r\n      scope,\r\n      componentStateAdditionalDataConfig,\r\n      showErrorMsg\r\n    } = this._builder.handleBehavior(behavior);\r\n\r\n    const { width, customClasses } = this._builder.handleAppearance(appearance);\r\n    let errorMsg = '';\r\n    const groupErrors = get(this._builder.component.state.errors, GroupDomainVO.field);\r\n\r\n    if (groupErrors) {\r\n      const obj = groupErrors[groupIndex];\r\n      const field = DomainVO.field;\r\n      const errors = obj && obj[`${field}`];\r\n      errorMsg = errors && errors.errors[0];\r\n    }\r\n\r\n    let autocomplete;\r\n    const acService = AutocompleteService[DomainVO.field];\r\n    const fieldName = scope || DomainVO.field;\r\n\r\n    const handleItemSelect = (field, fieldName) => ajaxResponseValues => selectedValue => {\r\n      const formattedData = {};\r\n\r\n      const updateFormattedData = selectedItem => {\r\n        if (componentStateAdditionalDataConfig && componentStateAdditionalDataConfig.length) {\r\n          componentStateAdditionalDataConfig.forEach(({ objectPath, acSelector }) => {\r\n            const dataToAdd = get(selectedItem, acSelector) || null;\r\n            set(formattedData, objectPath, dataToAdd);\r\n          });\r\n        } else {\r\n          formattedData[fieldName] = selectedItem ? selectedItem.title : null;\r\n        }\r\n      };\r\n\r\n      if (ajaxResponseValues) {\r\n        const selectedItem = ajaxResponseValues.rows.find(item => item.title === selectedValue);\r\n        updateFormattedData(selectedItem);\r\n        this._builder.formApi.setValue(field, selectedItem.title);\r\n      } else {\r\n        updateFormattedData();\r\n      }\r\n\r\n      const fieldState = this._builder.component.state[GroupDomainVO.field] || [];\r\n\r\n      if (fieldState[groupIndex]) {\r\n        fieldState[groupIndex] = deepmerge(fieldState[groupIndex], formattedData);\r\n      } else {\r\n        fieldState[groupIndex] = formattedData;\r\n      }\r\n\r\n      this._builder.component.setState({\r\n        [GroupDomainVO.field]: fieldState\r\n      });\r\n    };\r\n\r\n    if (groupIndex !== undefined) {\r\n      const field = `${GroupDomainVO.field}[${groupIndex}].${fieldName}`;\r\n\r\n      this.handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex);\r\n      autocomplete = (\r\n        <React.Fragment>\r\n          <Autocomplete\r\n            doAjax={acService.request}\r\n            formatAjaxRes={res => res.rows.map(row => row[acService.field])}\r\n            handleItemSelect={handleItemSelect(field, fieldName)}\r\n            width={240}\r\n          >\r\n            <Text\r\n              type=\"text\"\r\n              field={field}\r\n              title={DomainVO.hint}\r\n              initialValue={initialFieldDomain && initialFieldDomain.value}\r\n              className={this._BuilderClass.createInputClasses(\r\n                this._builder.formApi,\r\n                DomainVO.field,\r\n                customClasses\r\n              )}\r\n              placeholder={DomainVO.placeholder}\r\n              mask={DomainVO.mask}\r\n              validate={DomainVO.validate}\r\n              validateOnChange\r\n              validateOnBlur\r\n              onChange={onChange}\r\n            />\r\n          </Autocomplete>\r\n          {showErrorMsg && <span className=\"ds-field-name bottom error\">{errorMsg}</span>}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      // TODO протестить работоспособность этой части (вне таблицы)\r\n      const field = `start_${GroupDomainVO.field}_${fieldName}`;\r\n      autocomplete = (\r\n        <React.Fragment>\r\n          {this._builder.getLabel(\r\n            DomainVO.name,\r\n            new Behavior({ isRequired: false }),\r\n            new Appearance({ align: TOP })\r\n          )}\r\n          <Autocomplete\r\n            doAjax={acService.request}\r\n            formatAjaxRes={res => res.rows.map(row => row[acService.field])}\r\n            handleItemSelect={handleItemSelect(field, fieldName)}\r\n            width={width}\r\n          >\r\n            <Text\r\n              type=\"text\"\r\n              field={field}\r\n              title={DomainVO.hint}\r\n              initialValue={initialFieldDomain && initialFieldDomain.value}\r\n              className={this._BuilderClass.createInputClasses(\r\n                this._builder.formApi,\r\n                null,\r\n                customClasses\r\n              )}\r\n              placeholder={DomainVO.placeholder}\r\n              mask={DomainVO.mask}\r\n              validate={DomainVO.validate}\r\n              validateOnChange\r\n              validateOnBlur\r\n            />\r\n          </Autocomplete>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return () => autocomplete;\r\n  }\r\n\r\n  buildArrayGroupSelect(GroupDomainVO, DomainVO, groupIndex, behavior, appearance) {\r\n    const { initialFieldDomain, onChange, showErrorMsg } = this._builder.handleBehavior(behavior);\r\n    const { width, customClasses } = this._builder.handleAppearance(appearance);\r\n    let errorMsg = '';\r\n    const groupErrors = get(this._builder.component.state.errors, GroupDomainVO.field);\r\n    if (groupErrors) {\r\n      const obj = groupErrors[groupIndex];\r\n      const field = DomainVO.field;\r\n      const errors = obj && obj[`${field}`];\r\n      errorMsg = errors && errors.errors[0];\r\n    }\r\n    let select;\r\n    const options = DomainVO.options.map(({ value, title }, index) => (\r\n      <Option value={value} key={`${GroupDomainVO.field}[${groupIndex}].${DomainVO.field}${index}`}>\r\n        {title}\r\n      </Option>\r\n    ));\r\n    const placeholderOption = DomainVO.placeholder && (\r\n      <Option\r\n        value=\"\"\r\n        disabled\r\n        key={`${GroupDomainVO.field}[${groupIndex}].${DomainVO.field}.placeholder`}\r\n      >\r\n        {DomainVO.placeholder}\r\n      </Option>\r\n    );\r\n    const initialValue =\r\n      initialFieldDomain && initialFieldDomain.value !== ''\r\n        ? initialFieldDomain.value\r\n        : DomainVO.options[0].value;\r\n\r\n    if (groupIndex !== undefined) {\r\n      const field = `${GroupDomainVO.field}[${groupIndex}].${DomainVO.field}`;\r\n      this.handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex);\r\n      select = (\r\n        <React.Fragment>\r\n          <Select\r\n            field={field}\r\n            title={DomainVO.hint}\r\n            initialValue={initialValue}\r\n            style={{ width }}\r\n            className={this._BuilderClass.createInputClasses(\r\n              this._builder.formApi,\r\n              DomainVO.field,\r\n              customClasses\r\n            )}\r\n            mask={DomainVO.mask}\r\n            validate={DomainVO.validate}\r\n            validateOnChange\r\n            validateOnBlur\r\n            onChange={onChange}\r\n          >\r\n            {placeholderOption}\r\n            {options}\r\n          </Select>\r\n          {showErrorMsg && <span className=\"ds-field-name bottom error\">{errorMsg}</span>}\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      const field = `start_${GroupDomainVO.field}_${DomainVO.field}`;\r\n      select = (\r\n        <React.Fragment>\r\n          {this._builder.getLabel(\r\n            DomainVO.name,\r\n            new Behavior({ isRequired: false }),\r\n            new Appearance({ align: TOP })\r\n          )}\r\n          <Select\r\n            field={field}\r\n            title={DomainVO.hint}\r\n            initialValue={initialValue}\r\n            style={{ width }}\r\n            className={this._BuilderClass.createInputClasses(\r\n              this._builder.formApi,\r\n              DomainVO.field,\r\n              customClasses\r\n            )}\r\n            mask={DomainVO.mask}\r\n            validate={DomainVO.validate}\r\n            validateOnChange\r\n            validateOnBlur\r\n            onChange={onChange}\r\n          >\r\n            {placeholderOption}\r\n            {options}\r\n          </Select>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return () => select;\r\n  }\r\n\r\n  buildArrayGroupComponent(component) {\r\n    return (GroupDomainVO, DomainVO, groupIndex, behavior, appearance) => {\r\n      const { initialFieldDomain, customFieldName } = this._builder.handleBehavior(behavior);\r\n      let arrayGroupComponent;\r\n      if (groupIndex !== undefined) {\r\n        this.handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex);\r\n        const scope = `${GroupDomainVO.field}.${groupIndex}`;\r\n        const domainFieldName = customFieldName || DomainVO.field;\r\n        const initialValue = get(\r\n          this._builder._component.state,\r\n          `${GroupDomainVO.field}.${groupIndex}.${domainFieldName}`\r\n        );\r\n        const componentBehavior = Behavior.mixin(behavior, {\r\n          scope,\r\n          initialFieldDomain: { value: initialValue }\r\n        });\r\n        arrayGroupComponent = this._builder.buildComponent(component)(\r\n          DomainVO,\r\n          componentBehavior,\r\n          appearance\r\n        );\r\n      }\r\n      return () => arrayGroupComponent;\r\n    };\r\n  }\r\n\r\n  buildArrayGroupModal(GroupDomainVO, DomainVO, groupIndex, behavior, appearance) {\r\n    const { initialFieldDomain, modalBuilder } = this._builder.handleBehavior(behavior);\r\n    let modal;\r\n    if (groupIndex !== undefined) {\r\n      const scope = `${GroupDomainVO.field}[${groupIndex}].${DomainVO.field}`;\r\n      this.handleGroup(GroupDomainVO, DomainVO, initialFieldDomain, groupIndex);\r\n      modal = modalBuilder(this._builder, scope);\r\n    } else {\r\n      const scope = `start_${GroupDomainVO.field}_${DomainVO.field}`;\r\n      modal = (\r\n        <React.Fragment>\r\n          {this._builder.getLabel(DomainVO.name, new Behavior(), new Appearance({ align: TOP }))}\r\n          {modalBuilder(this._builder, scope)}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    return () => modal;\r\n  }\r\n}\r\n\r\nexport default DocumentGroup;\r\n"]},"metadata":{},"sourceType":"module"}