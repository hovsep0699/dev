{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _get from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport RegisterHandlerBase from './RegisterHandlerBase';\nimport RegisterRequest from '../RegisterRequest';\nimport UserAgreement from '../../../domain/register/UserAgreement';\n\nvar UserInputHandler = /*#__PURE__*/function (_RegisterHandlerBase) {\n  _inherits(UserInputHandler, _RegisterHandlerBase);\n\n  var _super = _createSuper(UserInputHandler);\n\n  function UserInputHandler() {\n    _classCallCheck(this, UserInputHandler);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(UserInputHandler, [{\n    key: \"register\",\n    value: function register(request) {\n      var _this = this;\n\n      _get(_getPrototypeOf(UserInputHandler.prototype), \"register\", this).call(this, request);\n\n      if (this.canHandle(request)) {\n        var agree = function agree() {\n          return _this.doNextHandler(request);\n        };\n\n        var disagree = function disagree() {\n          var errorRequest = RegisterRequest.clone(request);\n          errorRequest.error = _get(_getPrototypeOf(UserInputHandler.prototype), \"createRegisterError\", _this).call(_this, 'Пользователь инициировал вызов метода disagree.', new Error('Пользователь отказался'));\n          return _this.doNextHandler(errorRequest);\n        };\n\n        return new UserAgreement(request.parameters, agree, disagree);\n      }\n\n      return this.doNextHandler(request);\n    }\n  }, {\n    key: \"canHandle\",\n    value: function canHandle(request) {\n      _get(_getPrototypeOf(UserInputHandler.prototype), \"canHandle\", this).call(this, request);\n\n      return !!(request.parameters && request.parameters.agreement_url);\n    }\n  }]);\n\n  return UserInputHandler;\n}(RegisterHandlerBase);\n\nexport default UserInputHandler;","map":{"version":3,"sources":["../../../../src/application/register/handlers/UserInputHandler.js"],"names":[],"mappings":";;;;;;AAAA,OAAO,mBAAP,MAAgC,uBAAhC;AACA,OAAO,eAAP,MAA4B,oBAA5B;AACA,OAAO,aAAP,MAA0B,wCAA1B;;IAEM,gB;;;;;;;;;;;;;6BACK,O,EAAO;AAAA;;AACd,qFAAe,OAAf;;AACA,UAAI,KAAK,SAAL,CAAe,OAAf,CAAJ,EAA6B;AAC3B,YAAM,KAAK,GAAG,SAAR,KAAQ;AAAA,iBAAM,KAAI,CAAC,aAAL,CAAmB,OAAnB,CAAN;AAAA,SAAd;;AAEA,YAAM,QAAQ,GAAG,SAAX,QAAW,GAAK;AACpB,cAAM,YAAY,GAAG,eAAe,CAAC,KAAhB,CAAsB,OAAtB,CAArB;AACA,UAAA,YAAY,CAAC,KAAb,+FAA+C,iDAA/C,EAAkG,IAAI,KAAJ,CAAU,wBAAV,CAAlG;AACA,iBAAO,KAAI,CAAC,aAAL,CAAmB,YAAnB,CAAP;AACD,SAJD;;AAMA,eAAO,IAAI,aAAJ,CAAkB,OAAO,CAAC,UAA1B,EAAsC,KAAtC,EAA6C,QAA7C,CAAP;AACD;;AACD,aAAO,KAAK,aAAL,CAAmB,OAAnB,CAAP;AACD;;;8BAES,O,EAAO;AACf,sFAAgB,OAAhB;;AACA,aAAO,CAAC,EAAE,OAAO,CAAC,UAAR,IAAsB,OAAO,CAAC,UAAR,CAAmB,aAA3C,CAAR;AACD;;;;EApB4B,mB;;AAuB/B,eAAe,gBAAf","sourceRoot":"","sourcesContent":["import RegisterHandlerBase from './RegisterHandlerBase';\r\nimport RegisterRequest from '../RegisterRequest';\r\nimport UserAgreement from '../../../domain/register/UserAgreement';\r\nclass UserInputHandler extends RegisterHandlerBase {\r\n    register(request) {\r\n        super.register(request);\r\n        if (this.canHandle(request)) {\r\n            const agree = () => this.doNextHandler(request);\r\n            const disagree = () => {\r\n                const errorRequest = RegisterRequest.clone(request);\r\n                errorRequest.error = super.createRegisterError('Пользователь инициировал вызов метода disagree.', new Error('Пользователь отказался'));\r\n                return this.doNextHandler(errorRequest);\r\n            };\r\n            return new UserAgreement(request.parameters, agree, disagree);\r\n        }\r\n        return this.doNextHandler(request);\r\n    }\r\n    canHandle(request) {\r\n        super.canHandle(request);\r\n        return !!(request.parameters && request.parameters.agreement_url);\r\n    }\r\n}\r\nexport default UserInputHandler;\r\n//# sourceMappingURL=UserInputHandler.js.map"]},"metadata":{},"sourceType":"module"}