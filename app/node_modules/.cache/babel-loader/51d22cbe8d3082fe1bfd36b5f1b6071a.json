{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import get from'lodash.get';import React,{memo,useState}from'react';import{ThemeProvider}from'styled-components';import Modal from'@distate/components/dist/Modal';import{IconCheck}from'@distate/components/dist/icons';import{FormSchema}from'@distate/components/dist/FormSchema';import{CheckBox}from'@distate/components/dist/CheckBox';import{TableBody}from'./body';import{TableFooter}from'./footer';import{TableHeader}from'./header';import{TableContext}from'./context';import{HTMLTable}from'./styles/table';import{Numbers}from'./components/numbers';import{Tracking}from'./components/tracking';import{schema as schemaInformation,uiSchema as uiSchemaInformation}from'./schemas/information';import{HTMLTitle}from'./styles/body';import{HTMLButtonAppend}from'./styles/footer';var theme={bg:'#f3f3f3',text:'#212122',border:'#d7d7d7'};export var defaultGood={count:{before:'0',after:'0'},price:{before:'0.00',after:'0.00'},excise:{before:'без акциза',after:'без акциза'},amountOfTax:{before:'0.00',after:'0.00'},costAfterTax:{before:'0.00',after:'0.00'},costBeforeTax:{before:'0.00',after:'0.00'},measurement:{before:'',after:''},taxRate:{},rowType:'edit',title:'',row:''};export var defaultData={goods:[_objectSpread({},defaultGood)],total:{}};export var ModalType;(function(ModalType){ModalType[\"information\"]=\"information\";ModalType[\"tracking\"]=\"trackings\";ModalType[\"numbers\"]=\"numbers\";ModalType[\"empty\"]=\"empty\";ModalType[\"stamp\"]=\"stamp\";ModalType[\"close\"]=\"close\";})(ModalType||(ModalType={}));export var defaultModal={type:ModalType.close,index:0};export var TableUniversalCorrection=memo(function(_ref){var _ref$values=_ref.values,values=_ref$values===void 0?defaultData:_ref$values,defaultValue=_ref.defaultValue,_ref$errors=_ref.errors,errors=_ref$errors===void 0?{}:_ref$errors,onChange=_ref.onChange;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),authCalculated=_useState2[0],setAutoCalculated=_useState2[1];var _useState3=useState(defaultModal),_useState4=_slicedToArray(_useState3,2),stateModal=_useState4[0],setStateModal=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),removedGoods=_useState6[0],setRemovedGoods=_useState6[1];// const errorTable = useMemo(() => {\n//   // получаем ошибки относящиеся только\n//   // к таблице\n//   const tables = errors.filter((error: Error) => {\n//     const pathNameFirst = error.paths.shift();\n//     return pathNameFirst === 'table';\n//   });\n//   return tables;\n// }, [errors]);\nvar onCloseModal=function onCloseModal(){return setStateModal(function(state){return _objectSpread(_objectSpread({},state),{},{type:ModalType.close});});};var onChangeAutoCalculated=function onChangeAutoCalculated(e){setAutoCalculated(e.target.checked);};var tableOnChange=function tableOnChange(data){onChange===null||onChange===void 0?void 0:onChange(data);};var tableOnChangeInformation=function tableOnChangeInformation(information){var index=stateModal.index;var newValues=_objectSpread({},values);newValues.goods[index].information=information;onChange===null||onChange===void 0?void 0:onChange(newValues);onCloseModal();};var tableOnChangeTracking=function tableOnChangeTracking(tracking){var index=stateModal.index;var newValues=_objectSpread({},values);newValues.goods[index].trackings=tracking;onChange===null||onChange===void 0?void 0:onChange(newValues);onCloseModal();};var tableOnChangeNumbers=function tableOnChangeNumbers(numbers){var index=stateModal.index;var newValues=_objectSpread({},values);newValues.goods[index].identificationNumbers=numbers;onChange===null||onChange===void 0?void 0:onChange(newValues);onCloseModal();};var renderContentModal=function renderContentModal(){if(stateModal.type===ModalType.information){var data=get(values,\"goods[\".concat(stateModal.index,\"].information\"),{});return/*#__PURE__*/React.createElement(FormSchema,{isCenterFooter:true,formData:data,schema:schemaInformation,uiSchema:uiSchemaInformation,onSubmit:tableOnChangeInformation,children:/*#__PURE__*/React.createElement(HTMLButtonAppend,{icon:/*#__PURE__*/React.createElement(IconCheck,null),onClick:onCloseModal},\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\")});}if(stateModal.type===ModalType.tracking){var _data=get(values,\"goods[\".concat(stateModal.index,\"].trackings\"),[]);return/*#__PURE__*/React.createElement(Tracking,{data:_data,onSubmit:tableOnChangeTracking});}if(stateModal.type===ModalType.numbers){var _data2=get(values,\"goods[\".concat(stateModal.index,\"].identificationNumbers\"),[]);return/*#__PURE__*/React.createElement(Numbers,{rows:_data2,onSubmit:tableOnChangeNumbers});}if(stateModal.type===ModalType.empty){return/*#__PURE__*/React.createElement(HTMLTitle,null,\"\\u0422\\u043E\\u0432\\u0430\\u0440 \\u043D\\u0435 \\u043F\\u043E\\u0434\\u043B\\u0435\\u0436\\u0438\\u0442 \\u043C\\u0430\\u0440\\u043A\\u0438\\u0440\\u043E\\u0432\\u043A\\u0435 \\u0438\\u043B\\u0438 \\u043F\\u0440\\u043E\\u0441\\u043B\\u0435\\u0436\\u0438\\u0432\\u0430\\u0435\\u043C\\u043E\\u0441\\u0442\\u0438\");}return null;};return/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(TableContext.Provider,{value:{errors:errors,values:values,defaultValue:defaultValue,authCalculated:authCalculated,removedGoods:removedGoods,setRemovedGoods:setRemovedGoods,setStateModal:setStateModal,setValues:tableOnChange}},/*#__PURE__*/React.createElement(CheckBox,{label:\"\\u0410\\u0432\\u0442\\u043E\\u043C\\u0430\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0439 \\u043F\\u043E\\u0434\\u0441\\u0447\\u0435\\u0442 \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B\",onChange:onChangeAutoCalculated,checked:authCalculated}),/*#__PURE__*/React.createElement(HTMLTable,null,/*#__PURE__*/React.createElement(\"colgroup\",null,/*#__PURE__*/React.createElement(\"col\",{width:\"150\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"150\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"150\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"80\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"30\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"30\"}),/*#__PURE__*/React.createElement(\"col\",{width:\"30\"})),/*#__PURE__*/React.createElement(TableHeader,null),/*#__PURE__*/React.createElement(TableBody,null),/*#__PURE__*/React.createElement(TableFooter,null)),/*#__PURE__*/React.createElement(Modal,{isVisible:stateModal.type!==ModalType.close,hide:onCloseModal},renderContentModal())));});","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/common/TableUniversalCorrection/table-universal-correction.tsx"],"names":["get","React","memo","useState","ThemeProvider","Modal","IconCheck","FormSchema","CheckBox","TableBody","TableFooter","TableHeader","TableContext","HTMLTable","Numbers","Tracking","schema","schemaInformation","uiSchema","uiSchemaInformation","HTMLTitle","HTMLButtonAppend","theme","bg","text","border","defaultGood","count","before","after","price","excise","amountOfTax","costAfterTax","costBeforeTax","measurement","taxRate","rowType","title","row","defaultData","goods","total","ModalType","defaultModal","type","close","index","TableUniversalCorrection","values","defaultValue","errors","onChange","authCalculated","setAutoCalculated","stateModal","setStateModal","removedGoods","setRemovedGoods","onCloseModal","state","onChangeAutoCalculated","e","target","checked","tableOnChange","data","tableOnChangeInformation","information","newValues","tableOnChangeTracking","tracking","trackings","tableOnChangeNumbers","numbers","identificationNumbers","renderContentModal","empty","setValues"],"mappings":"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","sourcesContent":["import get from 'lodash.get';\r\nimport React, { FC, memo, useState } from 'react';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport Modal from '@distate/components/dist/Modal';\r\nimport { IconCheck } from '@distate/components/dist/icons';\r\nimport { FormSchema } from '@distate/components/dist/FormSchema';\r\nimport { CheckBox } from '@distate/components/dist/CheckBox';\r\n\r\nimport { TableBody } from './body';\r\nimport { TableFooter } from './footer';\r\nimport { TableHeader } from './header';\r\nimport { TableContext } from './context';\r\nimport { HTMLTable } from './styles/table';\r\nimport { Numbers } from './components/numbers';\r\nimport { Tracking } from './components/tracking';\r\nimport {\r\n  schema as schemaInformation,\r\n  uiSchema as uiSchemaInformation\r\n} from './schemas/information';\r\nimport { HTMLTitle } from './styles/body';\r\nimport { HTMLButtonAppend } from './styles/footer';\r\n\r\nconst theme = {\r\n  bg: '#f3f3f3',\r\n  text: '#212122',\r\n  border: '#d7d7d7'\r\n};\r\n\r\nexport const defaultGood = {\r\n  count: { before: '0', after: '0' },\r\n  price: { before: '0.00', after: '0.00' },\r\n  excise: { before: 'без акциза', after: 'без акциза' },\r\n  amountOfTax: { before: '0.00', after: '0.00' },\r\n  costAfterTax: { before: '0.00', after: '0.00' },\r\n  costBeforeTax: { before: '0.00', after: '0.00' },\r\n  measurement: { before: '', after: '' },\r\n  taxRate: {},\r\n  rowType: 'edit',\r\n  title: '',\r\n  row: ''\r\n};\r\n\r\nexport const defaultData = {\r\n  goods: [{ ...defaultGood }],\r\n  total: {}\r\n};\r\n\r\nexport enum ModalType {\r\n  information = 'information',\r\n  tracking = 'trackings',\r\n  numbers = 'numbers',\r\n  empty = 'empty',\r\n  stamp = 'stamp',\r\n  close = 'close'\r\n}\r\n\r\nexport const defaultModal = { type: ModalType.close, index: 0 };\r\n\r\nexport type StateModal = { type: ModalType; index: number };\r\n\r\nexport interface TableUniversalCorrectionProps {\r\n  values?: any;\r\n  defaultValue?: Record<string, unknown>;\r\n  errors?: any;\r\n  onChange?: (values: any) => void;\r\n}\r\n\r\nexport const TableUniversalCorrection: FC<TableUniversalCorrectionProps> = memo(\r\n  ({ values = defaultData, defaultValue, errors = {}, onChange }) => {\r\n    const [authCalculated, setAutoCalculated] = useState(true);\r\n    const [stateModal, setStateModal] = useState<StateModal>(defaultModal);\r\n    const [removedGoods, setRemovedGoods] = useState<any[]>([]);\r\n\r\n    // const errorTable = useMemo(() => {\r\n    //   // получаем ошибки относящиеся только\r\n    //   // к таблице\r\n    //   const tables = errors.filter((error: Error) => {\r\n    //     const pathNameFirst = error.paths.shift();\r\n    //     return pathNameFirst === 'table';\r\n    //   });\r\n\r\n    //   return tables;\r\n    // }, [errors]);\r\n\r\n    const onCloseModal = () => setStateModal(state => ({ ...state, type: ModalType.close }));\r\n    const onChangeAutoCalculated = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      setAutoCalculated(e.target.checked);\r\n    };\r\n\r\n    const tableOnChange = (data: any) => {\r\n      onChange?.(data);\r\n    };\r\n\r\n    const tableOnChangeInformation = (information: Record<string, unknown>) => {\r\n      const { index } = stateModal;\r\n      const newValues = { ...values };\r\n      newValues.goods[index].information = information;\r\n      onChange?.(newValues);\r\n      onCloseModal();\r\n    };\r\n\r\n    const tableOnChangeTracking = (tracking: Record<string, unknown>[]) => {\r\n      const { index } = stateModal;\r\n      const newValues = { ...values };\r\n      newValues.goods[index].trackings = tracking;\r\n      onChange?.(newValues);\r\n      onCloseModal();\r\n    };\r\n\r\n    const tableOnChangeNumbers = (numbers: Record<string, unknown>[]) => {\r\n      const { index } = stateModal;\r\n      const newValues = { ...values };\r\n      newValues.goods[index].identificationNumbers = numbers;\r\n      onChange?.(newValues);\r\n      onCloseModal();\r\n    };\r\n\r\n    const renderContentModal = () => {\r\n      if (stateModal.type === ModalType.information) {\r\n        const data = get(values, `goods[${stateModal.index}].information`, {});\r\n        return (\r\n          <FormSchema\r\n            isCenterFooter\r\n            formData={data}\r\n            schema={schemaInformation}\r\n            uiSchema={uiSchemaInformation}\r\n            onSubmit={tableOnChangeInformation}\r\n            children={\r\n              <HTMLButtonAppend icon={<IconCheck />} onClick={onCloseModal}>\r\n                Закрыть\r\n              </HTMLButtonAppend>\r\n            }\r\n          />\r\n        );\r\n      }\r\n\r\n      if (stateModal.type === ModalType.tracking) {\r\n        const data = get(values, `goods[${stateModal.index}].trackings`, []);\r\n        return <Tracking data={data} onSubmit={tableOnChangeTracking} />;\r\n      }\r\n\r\n      if (stateModal.type === ModalType.numbers) {\r\n        const data = get(values, `goods[${stateModal.index}].identificationNumbers`, []);\r\n        return <Numbers rows={data} onSubmit={tableOnChangeNumbers} />;\r\n      }\r\n\r\n      if (stateModal.type === ModalType.empty) {\r\n        return <HTMLTitle>Товар не подлежит маркировке или прослеживаемости</HTMLTitle>;\r\n      }\r\n\r\n      return null;\r\n    };\r\n\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <TableContext.Provider\r\n          value={{\r\n            errors,\r\n            values,\r\n            defaultValue,\r\n            authCalculated,\r\n            removedGoods,\r\n            setRemovedGoods,\r\n            setStateModal,\r\n            setValues: tableOnChange\r\n          }}\r\n        >\r\n          <CheckBox\r\n            label=\"Автоматический подсчет таблицы\"\r\n            onChange={onChangeAutoCalculated}\r\n            checked={authCalculated}\r\n          />\r\n          <HTMLTable>\r\n            <colgroup>\r\n              <col width=\"150\" />\r\n              <col width=\"150\" />\r\n              <col width=\"150\" />\r\n              <col width=\"80\" />\r\n              <col width=\"80\" />\r\n              <col width=\"80\" />\r\n              <col width=\"80\" />\r\n              <col width=\"80\" />\r\n              <col width=\"80\" />\r\n              <col width=\"80\" />\r\n              <col width=\"30\" />\r\n              <col width=\"30\" />\r\n              <col width=\"30\" />\r\n            </colgroup>\r\n            <TableHeader />\r\n            <TableBody />\r\n            <TableFooter />\r\n          </HTMLTable>\r\n          <Modal isVisible={stateModal.type !== ModalType.close} hide={onCloseModal}>\r\n            {renderContentModal()}\r\n          </Modal>\r\n        </TableContext.Provider>\r\n      </ThemeProvider>\r\n    );\r\n  }\r\n);\r\n"]},"metadata":{},"sourceType":"module"}