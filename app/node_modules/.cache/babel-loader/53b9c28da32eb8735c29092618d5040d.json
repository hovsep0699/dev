{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React,{useState,useEffect}from'react';import cn from'classnames';import{HTMLContainer,HTMLContent,HTMLInput,HTMLLabel,HTMLIcon,HTMLError}from'./Input.style';import{getValueFloat}from'./utils';export var Input=React.forwardRef(function(_ref,ref){var className=_ref.className,contentClassName=_ref.contentClassName,name=_ref.name,label=_ref.label,disabled=_ref.disabled,error=_ref.error,_ref$errors=_ref.errors,errors=_ref$errors===void 0?[]:_ref$errors,_ref$border=_ref.border,border=_ref$border===void 0?true:_ref$border,_ref$autocomplete=_ref.autocomplete,autocomplete=_ref$autocomplete===void 0?true:_ref$autocomplete,_ref$value=_ref.value,value=_ref$value===void 0?'':_ref$value,required=_ref.required,iconBefore=_ref.iconBefore,iconAfter=_ref.iconAfter,width=_ref.width,float=_ref.float,placeHolder=_ref.placeHolder,onChange=_ref.onChange,onFocus=_ref.onFocus,onBlur=_ref.onBlur,type=_ref.type,maxLength=_ref.maxLength,props=_objectWithoutProperties(_ref,[\"className\",\"contentClassName\",\"name\",\"label\",\"disabled\",\"error\",\"errors\",\"border\",\"autocomplete\",\"value\",\"required\",\"iconBefore\",\"iconAfter\",\"width\",\"float\",\"placeHolder\",\"onChange\",\"onFocus\",\"onBlur\",\"type\",\"maxLength\"]);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isFocus=_React$useState2[0],setFocus=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showError=_useState2[0],setShowError=_useState2[1];useEffect(function(){if(!errors.length)return;setShowError(true);},[errors]);var mask=function mask(){var str=value||'';if(typeof placeHolder!=='undefined'){if(!str||str==='0.00'||str===placeHolder){return\"\";}}if(typeof float!=='undefined'){str=String(str).replace(/[^\\d.]/g,'').replace(/^([^.]*[.])|[.]/g,'$1');if(!str){str=Number.parseFloat(str).toFixed(float);}if(str==='NaN'){str=Number.parseFloat('0').toFixed(float);}}return str;};var onBlurHandler=function onBlurHandler(e){setFocus(false);if(typeof float!=='undefined'){var targetValue=Number.parseFloat(e.target.value).toFixed(float);e.target.value=targetValue;onChange===null||onChange===void 0?void 0:onChange(e);}if(onBlur)onBlur===null||onBlur===void 0?void 0:onBlur(e);};var onFocusHandler=function onFocusHandler(e){setFocus(true);e.target.select();if(onFocus)onFocus===null||onFocus===void 0?void 0:onFocus(e);};/** првоерка длины текста */var isLimitAllows=function isLimitAllows(e){/** если не задана длина или она меньше указанной - вернется true */return!maxLength||e.target.value.length<maxLength;};var onChangeHandler=function onChangeHandler(e){setShowError(false);if(typeof float!=='undefined'&&isLimitAllows(e)){var _e$target$selectionSt;var cursor=(_e$target$selectionSt=e.target.selectionStart)!==null&&_e$target$selectionSt!==void 0?_e$target$selectionSt:0;var _getValueFloat=getValueFloat(e.target.value,float),_value=_getValueFloat.value,offset=_getValueFloat.offset;e.target.value=_value;e.target.selectionStart=cursor+offset;e.target.selectionEnd=cursor+offset;}onChange===null||onChange===void 0?void 0:onChange(e);};var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isHover=_React$useState4[0],setHover=_React$useState4[1];var onMouseEnterHandler=function onMouseEnterHandler(){return setHover(true);};var onMouseLeaveHandler=function onMouseLeaveHandler(){return setHover(false);};var renderIcon=function renderIcon(icon){if(!icon)return null;return/*#__PURE__*/React.createElement(HTMLIcon,null,icon);};return/*#__PURE__*/React.createElement(HTMLContainer,{$width:width!==null&&width!==void 0?width:0,className:className},label&&/*#__PURE__*/React.createElement(HTMLLabel,{$required:!!required},label),/*#__PURE__*/React.createElement(HTMLContent,{$isFocus:isFocus,$isHover:isHover,$border:border,$error:error,$hasBeforeIcon:!!iconBefore,$hasAfterIcon:!!iconAfter,className:cn(contentClassName)},renderIcon(iconBefore),/*#__PURE__*/React.createElement(HTMLInput,Object.assign({},props,{ref:ref,placeholder:placeHolder,type:type,name:name,value:mask(),disabled:Boolean(disabled),autoComplete:autocomplete?'on':'off',$border:border,$hasBeforeIcon:!!iconBefore,$hasAfterIcon:!!iconAfter,$paddingLefg:!iconBefore,$paddingRight:!iconAfter,onBlur:onBlurHandler,onFocus:onFocusHandler,onChange:onChangeHandler,onMouseEnter:onMouseEnterHandler,onMouseLeave:onMouseLeaveHandler,maxLength:maxLength})),renderIcon(iconAfter)),showError&&errors.length?/*#__PURE__*/React.createElement(HTMLError,null,errors[0]):null);});","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/POA/MCHD_ROOT/common/Input/Input.tsx"],"names":["React","useState","useEffect","cn","HTMLContainer","HTMLContent","HTMLInput","HTMLLabel","HTMLIcon","HTMLError","getValueFloat","Input","forwardRef","ref","className","contentClassName","name","label","disabled","error","errors","border","autocomplete","value","required","iconBefore","iconAfter","width","float","placeHolder","onChange","onFocus","onBlur","type","maxLength","props","isFocus","setFocus","showError","setShowError","length","mask","str","String","replace","Number","parseFloat","toFixed","onBlurHandler","e","targetValue","target","onFocusHandler","select","isLimitAllows","onChangeHandler","cursor","selectionStart","offset","selectionEnd","isHover","setHover","onMouseEnterHandler","onMouseLeaveHandler","renderIcon","icon","Boolean"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport cn from 'classnames';\r\n\r\nimport {\r\n  HTMLContainer,\r\n  HTMLContent,\r\n  HTMLInput,\r\n  HTMLLabel,\r\n  HTMLIcon,\r\n  HTMLError\r\n} from './Input.style';\r\nimport { getValueFloat } from './utils';\r\n\r\nexport type InputProps = {\r\n  value?: string | number;\r\n  float?: number;\r\n  placeHolder?: string;\r\n  label?: string;\r\n  error?: boolean;\r\n  errors?: string[];\r\n  disabled?: boolean;\r\n  width?: number;\r\n  border?: boolean;\r\n  touched?: boolean;\r\n  required?: boolean;\r\n  className?: string;\r\n  iconAfter?: React.ReactNode;\r\n  hideErrors?: boolean;\r\n  iconBefore?: React.ReactNode;\r\n  autocomplete?: boolean;\r\n  contentClassName?: string;\r\n  maxLength?: number;\r\n} & React.InputHTMLAttributes<HTMLInputElement>;\r\n\r\nexport const Input = React.forwardRef<any, InputProps>(\r\n  (\r\n    {\r\n      className,\r\n      contentClassName,\r\n      name,\r\n      label,\r\n      disabled,\r\n      error,\r\n      errors = [],\r\n      border = true,\r\n      autocomplete = true,\r\n      value = '',\r\n      required,\r\n      iconBefore,\r\n      iconAfter,\r\n      width,\r\n      float,\r\n      placeHolder,\r\n      onChange,\r\n      onFocus,\r\n      onBlur,\r\n      type,\r\n      maxLength,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const [isFocus, setFocus] = React.useState(false);\r\n    const [showError, setShowError] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (!errors.length) return;\r\n      setShowError(true);\r\n    }, [errors]);\r\n\r\n    const mask = () => {\r\n      let str = value || '';\r\n\r\n      if (typeof placeHolder !== 'undefined') {\r\n        if (!str || str === '0.00' || str === placeHolder) {\r\n          return \"\";\r\n        }\r\n      }\r\n\r\n      if (typeof float !== 'undefined') {\r\n        str = String(str)\r\n          .replace(/[^\\d.]/g, '')\r\n          .replace(/^([^.]*[.])|[.]/g, '$1');\r\n\r\n        if (!str) {\r\n          str = Number.parseFloat(str).toFixed(float);\r\n        }\r\n\r\n        if (str === 'NaN') {\r\n          str = Number.parseFloat('0').toFixed(float);\r\n        }\r\n      }\r\n\r\n      return str;\r\n    };\r\n\r\n    const onBlurHandler = (e: React.FocusEvent<HTMLInputElement>) => {\r\n      setFocus(false);\r\n\r\n      if (typeof float !== 'undefined') {\r\n        const targetValue = Number.parseFloat(e.target.value).toFixed(float);\r\n        e.target.value = targetValue;\r\n        onChange?.(e);\r\n      }\r\n\r\n      if (onBlur) onBlur?.(e);\r\n    };\r\n\r\n    const onFocusHandler = (e: React.FocusEvent<HTMLInputElement>) => {\r\n      setFocus(true);\r\n      e.target.select();\r\n      if (onFocus) onFocus?.(e);\r\n    };\r\n\r\n    /** првоерка длины текста */\r\n    const isLimitAllows = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      /** если не задана длина или она меньше указанной - вернется true */\r\n      return !maxLength || e.target.value.length < maxLength;\r\n    };\r\n\r\n    const onChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      setShowError(false);\r\n      if (typeof float !== 'undefined' && isLimitAllows(e)) {\r\n        const cursor = e.target.selectionStart ?? 0;\r\n        const { value, offset } = getValueFloat(e.target.value, float);\r\n\r\n        e.target.value = value;\r\n        e.target.selectionStart = cursor + offset;\r\n        e.target.selectionEnd = cursor + offset;\r\n      }\r\n\r\n      onChange?.(e);\r\n    };\r\n\r\n    const [isHover, setHover] = React.useState(false);\r\n\r\n    const onMouseEnterHandler = () => setHover(true);\r\n    const onMouseLeaveHandler = () => setHover(false);\r\n\r\n    const renderIcon = (icon: React.ReactNode) => {\r\n      if (!icon) return null;\r\n\r\n      return <HTMLIcon>{icon}</HTMLIcon>;\r\n    };\r\n\r\n    return (\r\n      <HTMLContainer $width={width ?? 0} className={className}>\r\n        {label && <HTMLLabel $required={!!required}>{label}</HTMLLabel>}\r\n        <HTMLContent\r\n          $isFocus={isFocus}\r\n          $isHover={isHover}\r\n          $border={border}\r\n          $error={error}\r\n          $hasBeforeIcon={!!iconBefore}\r\n          $hasAfterIcon={!!iconAfter}\r\n          className={cn(contentClassName)}\r\n        >\r\n          {renderIcon(iconBefore)}\r\n          <HTMLInput\r\n            {...props}\r\n            ref={ref}\r\n            placeholder={placeHolder}\r\n            type={type}\r\n            name={name}\r\n            value={mask()}\r\n            disabled={Boolean(disabled)}\r\n            autoComplete={autocomplete ? 'on' : 'off'}\r\n            $border={border}\r\n            $hasBeforeIcon={!!iconBefore}\r\n            $hasAfterIcon={!!iconAfter}\r\n            $paddingLefg={!iconBefore}\r\n            $paddingRight={!iconAfter}\r\n            onBlur={onBlurHandler}\r\n            onFocus={onFocusHandler}\r\n            onChange={onChangeHandler}\r\n            onMouseEnter={onMouseEnterHandler}\r\n            onMouseLeave={onMouseLeaveHandler}\r\n            maxLength={maxLength}\r\n          />\r\n          {renderIcon(iconAfter)}\r\n        </HTMLContent>\r\n        {showError && errors.length ? <HTMLError>{errors[0]}</HTMLError> : null}\r\n      </HTMLContainer>\r\n    );\r\n  }\r\n);\r\n"]},"metadata":{},"sourceType":"module"}