{"ast":null,"code":"import _construct from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/construct\";import _classCallCheck from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _applyDecoratedDescriptor from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/applyDecoratedDescriptor\";var _class,_class2,_temp;import autobind from\"autobind-decorator\";export var ServiceLocator=(_class=(_temp=_class2=/*#__PURE__*/function(){function ServiceLocator(){_classCallCheck(this,ServiceLocator);this.services=new Map();}_createClass(ServiceLocator,[{key:\"registerSingleton\",value:function registerSingleton(key,keyName){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key];}var keyString=keyName;console.log(\"registerSingleton\",keyString);if(!this.services.has(keyString)){var instance=_construct(key,args);this.services.set(keyString,{instance:instance});}}},{key:\"register\",value:function register(key,keyName,factory){var keyString=key.name;this.services.set(keyString,{factory:factory,instance:undefined});}},{key:\"get\",value:function get(keyName){var keyString=keyName;var service=this.services.get(keyString);if(!service){throw new Error(\"Service not found for key: \".concat(keyString));}if(service.instance){return service.instance;}if(service.factory){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}var instance=service.factory.apply(service,args);service.instance=instance;// Store instance for future calls\nreturn instance;}throw new Error(\"No instance or factory found for key: \".concat(keyString));}}],[{key:\"getInstance\",value:function getInstance(){if(!ServiceLocator.instance){ServiceLocator.instance=new ServiceLocator();}return ServiceLocator.instance;}}]);return ServiceLocator;}(),_class2.instance=void 0,_temp),(_applyDecoratedDescriptor(_class.prototype,\"registerSingleton\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"registerSingleton\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"register\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"register\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"get\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"get\"),_class.prototype)),_class);","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/POA/MCHD_ROOT/di/ServiceLocator.ts"],"names":["autobind","ServiceLocator","services","Map","key","keyName","args","keyString","console","log","has","instance","set","factory","name","undefined","service","get","Error"],"mappings":"itBAAA,MAAOA,CAAAA,QAAP,KAAqB,oBAArB,CAIA,UAAaC,CAAAA,cAAb,gDAGI,yBAAsB,2CASdC,QATc,CAS2E,GAAIC,CAAAA,GAAJ,EAT3E,CAAE,CAH5B,uFAegCC,GAfhC,CAegEC,OAfhE,CAeuG,+BAAnBC,IAAmB,qDAAnBA,IAAmB,0BAC/F,GAAMC,CAAAA,SAAS,CAAGF,OAAlB,CACAG,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCF,SAAjC,EACA,GAAI,CAAC,KAAKL,QAAL,CAAcQ,GAAd,CAAkBH,SAAlB,CAAL,CAAmC,CAC/B,GAAMI,CAAAA,QAAW,YAAOP,GAAP,CAAcE,IAAd,CAAjB,CACA,KAAKJ,QAAL,CAAcU,GAAd,CAAkBL,SAAlB,CAA6B,CAAEI,QAAQ,CAARA,QAAF,CAA7B,EACH,CACJ,CAtBL,0CAyBuBP,GAzBvB,CAyBuDC,OAzBvD,CAyBwEQ,OAzBxE,CAyB0G,CAClG,GAAMN,CAAAA,SAAS,CAAGH,GAAG,CAACU,IAAtB,CACA,KAAKZ,QAAL,CAAcU,GAAd,CAAkBL,SAAlB,CAA6B,CAAEM,OAAO,CAAPA,OAAF,CAAWF,QAAQ,CAAEI,SAArB,CAA7B,EACH,CA5BL,gCA+BkBV,OA/BlB,CA+BsD,CAC9C,GAAME,CAAAA,SAAS,CAAGF,OAAlB,CACA,GAAMW,CAAAA,OAAO,CAAG,KAAKd,QAAL,CAAce,GAAd,CAAkBV,SAAlB,CAAhB,CACA,GAAI,CAACS,OAAL,CAAc,CACV,KAAM,IAAIE,CAAAA,KAAJ,sCAAwCX,SAAxC,EAAN,CACH,CACD,GAAIS,OAAO,CAACL,QAAZ,CAAsB,CAClB,MAAOK,CAAAA,OAAO,CAACL,QAAf,CACH,CACD,GAAIK,OAAO,CAACH,OAAZ,CAAqB,gCATSP,IAST,2DATSA,IAST,4BACjB,GAAMK,CAAAA,QAAQ,CAAGK,OAAO,CAACH,OAAR,OAAAG,OAAO,CAAYV,IAAZ,CAAxB,CACAU,OAAO,CAACL,QAAR,CAAmBA,QAAnB,CAA6B;AAC7B,MAAOA,CAAAA,QAAP,CACH,CACD,KAAM,IAAIO,CAAAA,KAAJ,iDAAmDX,SAAnD,EAAN,CACH,CA9CL,mDAKgD,CACxC,GAAI,CAACN,cAAc,CAACU,QAApB,CAA8B,CAC1BV,cAAc,CAACU,QAAf,CAA0B,GAAIV,CAAAA,cAAJ,EAA1B,CACH,CACD,MAAOA,CAAAA,cAAc,CAACU,QAAtB,CACH,CAVL,sCACmBA,QADnB,gFAcKX,QAdL,iJAwBKA,QAxBL,mIA8BKA,QA9BL","sourcesContent":["import autobind from \"autobind-decorator\";\r\n\r\ntype ServiceFactory<T> = (...args: any[]) => T;\r\n\r\nexport class ServiceLocator {\r\n    private static instance?: ServiceLocator | null;\r\n\r\n    private constructor() {}\r\n\r\n    public static getInstance(): ServiceLocator {\r\n        if (!ServiceLocator.instance) {\r\n            ServiceLocator.instance = new ServiceLocator();\r\n        }\r\n        return ServiceLocator.instance!;\r\n    }\r\n\r\n    private services: Map<string, { instance?: any; factory?: ServiceFactory<any>; args?: any[] }> = new Map();\r\n\r\n    @autobind\r\n    public registerSingleton<T>(key: new (...args: any[]) => T, keyName: string, ...args: any[]): void {\r\n        const keyString = keyName;\r\n        console.log(\"registerSingleton\", keyString);\r\n        if (!this.services.has(keyString)) {\r\n            const instance: T = new key(...args);\r\n            this.services.set(keyString, { instance });\r\n        }\r\n    }\r\n\r\n    @autobind\r\n    public register<T>(key: new (...args: any[]) => T, keyName: string, factory: ServiceFactory<T>): void {\r\n        const keyString = key.name;\r\n        this.services.set(keyString, { factory, instance: undefined });\r\n    }\r\n\r\n    @autobind\r\n    public get<T>(keyName: string, ...args: any[]): T {\r\n        const keyString = keyName;\r\n        const service = this.services.get(keyString);\r\n        if (!service) {\r\n            throw new Error(`Service not found for key: ${keyString}`);\r\n        }\r\n        if (service.instance) {\r\n            return service.instance as T;\r\n        }\r\n        if (service.factory) {\r\n            const instance = service.factory(...args);\r\n            service.instance = instance; // Store instance for future calls\r\n            return instance as T;\r\n        }\r\n        throw new Error(`No instance or factory found for key: ${keyString}`);\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}