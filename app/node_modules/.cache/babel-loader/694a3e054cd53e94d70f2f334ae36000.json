{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import React from\"react\";import ObservableComponent from\"../../../observableComponent/observableComponent\";import GeneralSectionHeaderAction from\"./GeneralSectionHeaderAction\";import{Tax}from\"../../../../domain/model/Tax\";var GeneralSectionHeaderActions=function GeneralSectionHeaderActions(_ref){var baseWidth=_ref.baseWidth,presenter=_ref.presenter;var handleAdd=function handleAdd(index){var state=presenter.getState();var prevTaxes=state.info.validForTaxAuthorities;var tax=new Tax(index.toString(),\"\");presenter.onInfoChanged(state.info.copyWith({validForTaxAuthorities:[tax].concat(_toConsumableArray(prevTaxes))}));};var handleRemove=function handleRemove(index,isRemovable){var _state$info$validForT;var state=presenter.getState();if(isRemovable&&((_state$info$validForT=state.info.validForTaxAuthorities)===null||_state$info$validForT===void 0?void 0:_state$info$validForT.length)!==1){var updatedTaxes=_toConsumableArray(presenter.getState().info.validForTaxAuthorities);updatedTaxes.splice(index,1);presenter.onInfoChanged(state.info.copyWith({validForTaxAuthorities:updatedTaxes}));}};var handleChange=function handleChange(value,index){var state=presenter.getState();console.log(value);var prevTaxes=state.info.validForTaxAuthorities;var updatedTax=prevTaxes.map(function(tax,elemIndex){var currentTax=new Tax(elemIndex.toString(),value);return index===elemIndex?currentTax:tax;});presenter.onInfoChanged(state.info.copyWith({validForTaxAuthorities:updatedTax}));};return/*#__PURE__*/React.createElement(ObservableComponent,{builder:function builder(state){return/*#__PURE__*/React.createElement(React.Fragment,null,state.info.validForTaxAuthorities.map(function(tax,index){return/*#__PURE__*/React.createElement(GeneralSectionHeaderAction,{currentTax:tax,onAdd:function onAdd(){return handleAdd(index);},onChange:function onChange(value){return handleChange(value,index);},onRemove:function onRemove(){return handleRemove(index,index!==0);},key:index,baseWidth:baseWidth,index:index,isRemovable:index!==0});}));},create:function create(){return presenter;},buildWhen:function buildWhen(oldState,newState){return!oldState.compare(newState);}});};export default GeneralSectionHeaderActions;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/POA/MCHD_ROOT/presentation/pages/Sections/page/GeneralSectionHeaderActions.tsx"],"names":["React","ObservableComponent","GeneralSectionHeaderAction","Tax","GeneralSectionHeaderActions","baseWidth","presenter","handleAdd","index","state","getState","prevTaxes","info","validForTaxAuthorities","tax","toString","onInfoChanged","copyWith","handleRemove","isRemovable","length","updatedTaxes","splice","handleChange","value","console","log","updatedTax","map","elemIndex","currentTax","oldState","newState","compare"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {SectionPresenter} from \"../presenter/SectionPresenter\";\r\nimport ObservableComponent from \"../../../observableComponent/observableComponent\";\r\nimport {SectionPresenterState} from \"../presenter/SectionPresenterState\";\r\nimport GeneralSectionHeaderAction from \"./GeneralSectionHeaderAction\";\r\nimport {Tax} from \"../../../../domain/model/Tax\";\r\nimport {SectionPresenterViewModel} from \"../presenter/SectionPresenterViewModel\";\r\n\r\ninterface GeneralSectionHeaderActionsProps {\r\n    baseWidth?: string;\r\n    presenter: SectionPresenter;\r\n}\r\n\r\n\r\nconst GeneralSectionHeaderActions: React.FC<GeneralSectionHeaderActionsProps> = ({\r\n        baseWidth,\r\n        presenter,\r\n    }: GeneralSectionHeaderActionsProps) => {\r\n\r\n    const handleAdd = (index: number) => {\r\n        const state = presenter.getState();\r\n        const prevTaxes = state.info.validForTaxAuthorities;\r\n        const tax = new Tax(index.toString(), \"\");\r\n        presenter.onInfoChanged(state.info.copyWith({validForTaxAuthorities: [ tax, ...prevTaxes]}));\r\n    }\r\n\r\n    const handleRemove = (index: number, isRemovable: boolean) => {\r\n        const state = presenter.getState();\r\n        if (isRemovable && state.info.validForTaxAuthorities?.length !== 1) {\r\n            const updatedTaxes: Tax[] = [...presenter.getState().info.validForTaxAuthorities];\r\n            updatedTaxes.splice(index, 1);\r\n            presenter.onInfoChanged(state.info.copyWith({validForTaxAuthorities: updatedTaxes}));\r\n        }\r\n    }\r\n\r\n    const handleChange = (value: string, index: number) => {\r\n        const state = presenter.getState();\r\n        console.log(value);\r\n        const prevTaxes = state.info.validForTaxAuthorities;\r\n        const updatedTax = prevTaxes.map((tax, elemIndex) => {\r\n                const currentTax = new Tax(elemIndex.toString(), value);\r\n                return index === elemIndex ? currentTax : tax;\r\n            }\r\n        );\r\n        presenter.onInfoChanged(state.info.copyWith({validForTaxAuthorities: updatedTax}));\r\n    }\r\n\r\n    return (\r\n        <ObservableComponent<SectionPresenterViewModel, SectionPresenterState, SectionPresenter>\r\n            builder={(state: SectionPresenterState)=> (\r\n                <>\r\n                    {state.info.validForTaxAuthorities.map((tax: any, index: number) => (\r\n                        <GeneralSectionHeaderAction\r\n                            currentTax={tax}\r\n                            onAdd={() => handleAdd(index)}\r\n                            onChange={(value)=>handleChange(value, index)}\r\n                            onRemove={()=>handleRemove(index, index !== 0)}\r\n                            key={index}\r\n                            baseWidth={baseWidth}\r\n                            index={index}\r\n                            isRemovable={index !== 0}\r\n                        />\r\n                    ))}\r\n                </>\r\n            )}\r\n            create={()=>presenter}\r\n            buildWhen={(oldState, newState)=>{\r\n                return !oldState.compare(newState)\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default GeneralSectionHeaderActions;"]},"metadata":{},"sourceType":"module"}