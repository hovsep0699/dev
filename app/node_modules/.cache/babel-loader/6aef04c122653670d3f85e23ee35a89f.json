{"ast":null,"code":"import _objectWithoutProperties from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import styled from'styled-components';import{IconCheck}from'@distate/components/dist/icons';import{ButtonKinds}from'@distate/components/dist/Button';import{FormSchema}from'@distate/components/dist/FormSchema';import Layout from'../../common/Layout';import SaveDocumentModal from'../documents/modals/SaveDocumentModal';import{TableUniversalCorrection}from'../../common/TableUniversalCorrection';import{schemaFooter,uischemaFooter}from'./helpers/schema.ucd';import{CorrectionDocumentSkeleton}from'./universal-correction-document.skeleton';import{useUCDCreate}from'./hooks/use-ucd-create';import{useUCD}from'./hooks/use-ucd';import{HTMLButtonTrue}from'./page.styles';var HTMLForm=styled(FormSchema).withConfig({displayName:\"universal-correction-documentpage__HTMLForm\",componentId:\"ycboo7-0\"})([\"max-width:900px;\"]);export var UniversalCorrectionDocumentPage=function UniversalCorrectionDocumentPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useUCDCreate=useUCDCreate(),isLoadingCreate=_useUCDCreate.isLoadingCreate,createErrors=_useUCDCreate.createErrors,createUCD=_useUCDCreate.createUCD;var _useUCD=useUCD(),rawUCD=_useUCD.rawUCD,title=_useUCD.title,schema=_useUCD.schema,uischema=_useUCD.uischema,formData=_useUCD.formData,isLoading=_useUCD.isLoading,formTable=_useUCD.formTable,formTableDefault=_useUCD.formTableDefault,setFormData=_useUCD.setFormData,setFormTable=_useUCD.setFormTable;useEffect(function(){if(createErrors.length){setVisible(true);}},[createErrors]);var onSubmitForm=function onSubmitForm(){return createUCD({UCD:rawUCD,formData:formData,formTable:formTable});};var onSaveCancel=function onSaveCancel(){return setVisible(false);};var onSaveForce=function onSaveForce(){setVisible(false);createUCD({UCD:rawUCD,formData:formData,formTable:formTable,force:true});};if(isLoading)return/*#__PURE__*/React.createElement(CorrectionDocumentSkeleton,null);var basisDocuments=formData.basisDocuments,transferDocuments=formData.transferDocuments,operationInformation=formData.operationInformation,additionalInformation=formData.additionalInformation,formDataMain=_objectWithoutProperties(formData,[\"basisDocuments\",\"transferDocuments\",\"operationInformation\",\"additionalInformation\"]);var formDataFooter={basisDocuments:basisDocuments,transferDocuments:transferDocuments,operationInformation:operationInformation,additionalInformation:additionalInformation};return/*#__PURE__*/React.createElement(Layout,{title:title,isLoading:isLoadingCreate},/*#__PURE__*/React.createElement(HTMLForm,{schema:schema,formData:formDataMain,uiSchema:uischema,errorSchema:createErrors,onChange:setFormData,children:null}),/*#__PURE__*/React.createElement(TableUniversalCorrection,{values:formTable,errors:createErrors,onChange:setFormTable,defaultValue:formTableDefault}),/*#__PURE__*/React.createElement(HTMLForm,{schema:schemaFooter,formData:formDataFooter,uiSchema:uischemaFooter,errorSchema:createErrors,onChange:setFormData,children:null}),/*#__PURE__*/React.createElement(HTMLButtonTrue,{kind:ButtonKinds.Primary,icon:/*#__PURE__*/React.createElement(IconCheck,{style:{fill:'currentcolor'}}),onClick:onSubmitForm,toogleTheme:true},\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0443\"),/*#__PURE__*/React.createElement(SaveDocumentModal,{visible:visible,hide:onSaveCancel,agree:onSaveForce}));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/upd/universal-correction-document.page.tsx"],"names":["React","useState","useEffect","styled","IconCheck","ButtonKinds","FormSchema","Layout","SaveDocumentModal","TableUniversalCorrection","schemaFooter","uischemaFooter","CorrectionDocumentSkeleton","useUCDCreate","useUCD","HTMLButtonTrue","HTMLForm","UniversalCorrectionDocumentPage","visible","setVisible","isLoadingCreate","createErrors","createUCD","rawUCD","title","schema","uischema","formData","isLoading","formTable","formTableDefault","setFormData","setFormTable","length","onSubmitForm","UCD","onSaveCancel","onSaveForce","force","basisDocuments","transferDocuments","operationInformation","additionalInformation","formDataMain","formDataFooter","Primary","fill"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { IconCheck } from '@distate/components/dist/icons';\r\nimport { ButtonKinds } from '@distate/components/dist/Button';\r\nimport { FormSchema } from '@distate/components/dist/FormSchema';\r\n\r\nimport Layout from '../../common/Layout';\r\nimport SaveDocumentModal from '../documents/modals/SaveDocumentModal';\r\nimport { TableUniversalCorrection } from '../../common/TableUniversalCorrection';\r\n\r\nimport { schemaFooter, uischemaFooter } from './helpers/schema.ucd';\r\nimport { CorrectionDocumentSkeleton } from './universal-correction-document.skeleton';\r\nimport { useUCDCreate } from './hooks/use-ucd-create';\r\nimport { useUCD } from './hooks/use-ucd';\r\nimport { HTMLButtonTrue } from './page.styles';\r\n\r\nconst HTMLForm = styled(FormSchema)`\r\n  max-width: 900px;\r\n`;\r\n\r\nexport interface UniversalCorrectionDocumentProps {}\r\n\r\nexport const UniversalCorrectionDocumentPage: React.FC<UniversalCorrectionDocumentProps> = () => {\r\n  const [visible, setVisible] = useState(false);\r\n  const { isLoadingCreate, createErrors, createUCD } = useUCDCreate();\r\n  const {\r\n    rawUCD,\r\n    title,\r\n    schema,\r\n    uischema,\r\n    formData,\r\n    isLoading,\r\n    formTable,\r\n    formTableDefault,\r\n    setFormData,\r\n    setFormTable\r\n  } = useUCD();\r\n\r\n  useEffect(() => {\r\n    if (createErrors.length) {\r\n      setVisible(true);\r\n    }\r\n  }, [createErrors]);\r\n\r\n  const onSubmitForm = () => createUCD({ UCD: rawUCD, formData, formTable });\r\n  const onSaveCancel = () => setVisible(false);\r\n  const onSaveForce = () => {\r\n    setVisible(false);\r\n    createUCD({ UCD: rawUCD, formData, formTable, force: true });\r\n  };\r\n\r\n  if (isLoading) return <CorrectionDocumentSkeleton />;\r\n\r\n  const {\r\n    basisDocuments,\r\n    transferDocuments,\r\n    operationInformation,\r\n    additionalInformation,\r\n    ...formDataMain\r\n  } = formData;\r\n\r\n  const formDataFooter = {\r\n    basisDocuments,\r\n    transferDocuments,\r\n    operationInformation,\r\n    additionalInformation\r\n  };\r\n\r\n  return (\r\n    <Layout title={title} isLoading={isLoadingCreate}>\r\n      <HTMLForm\r\n        schema={schema}\r\n        formData={formDataMain}\r\n        uiSchema={uischema}\r\n        errorSchema={createErrors}\r\n        onChange={setFormData}\r\n        children={null}\r\n      />\r\n      <TableUniversalCorrection\r\n        values={formTable}\r\n        errors={createErrors}\r\n        onChange={setFormTable}\r\n        defaultValue={formTableDefault}\r\n      />\r\n      <HTMLForm\r\n        schema={schemaFooter}\r\n        formData={formDataFooter}\r\n        uiSchema={uischemaFooter}\r\n        errorSchema={createErrors}\r\n        onChange={setFormData}\r\n        children={null}\r\n      />\r\n      <HTMLButtonTrue\r\n        kind={ButtonKinds.Primary}\r\n        icon={<IconCheck style={{ fill: 'currentcolor' }} />}\r\n        onClick={onSubmitForm}\r\n        toogleTheme\r\n      >\r\n        Создать корректировку\r\n      </HTMLButtonTrue>\r\n      <SaveDocumentModal visible={visible} hide={onSaveCancel} agree={onSaveForce} />\r\n    </Layout>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}