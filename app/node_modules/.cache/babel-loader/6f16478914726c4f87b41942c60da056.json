{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NavLink}from'react-router-dom';import{Form,Text}from'informed';import Core from'@distate/core/dist/application/Core';import{capitalize}from'../../../utils/StringUtil';import classNames from'classnames';import{validateOGRN,validateEmail,validateNewPassword,validateMatchPasswords,validatePosition,validateCaptcha,validateSurname,validateName}from'../../../utils/ValidateUtil';import Flash from'../../../common/flash/Flash';import MessageSuccessRegistration from'../messages/MessageSuccessRegistration';import styles from'./RegisterForm.module.css';import{AUTH_LOGIN,UPDATE_PNG}from'../../../common/Url';import{GO_TO_LOGIN_FORM,REG,UPDATE_IMG,OGRN_OGRNIP,FIO,SURNAME,NAME,PATRONYMIC,EMAIL,PASSWORD,WORK_POSITION,IMG_CODE,ENTER_PASSWORD,REPEAT_PASSWORD,ENTER_OGRN,ENTER_EMAIL_FOR_NOTIFICATIONS,ENTER_WORK_POSITION,ENTER_IMG_CODE,SERVER_500}from'../../../common/Lbl';var RegisterForm=/*#__PURE__*/function(_Component){_inherits(RegisterForm,_Component);var _super=_createSuper(RegisterForm);function RegisterForm(props){var _this;_classCallCheck(this,RegisterForm);_this=_super.call(this,props);_this.state={captchaUrl:'',isOGRNInvalid:false,isEmailInvalid:false,isFIOInvalid:false,isPositionInvalid:false,isPasswordInvalid:false,isConfirmPasswordInvalid:false,isCaptchaInvalid:false,isInvalid:false,isComplete:false,isFormSentSuccessfully:false};_this.refreshCaptcha=_this.refreshCaptcha.bind(_assertThisInitialized(_this));_this.submit=_this.submit.bind(_assertThisInitialized(_this));_this.setFormApi=_this.setFormApi.bind(_assertThisInitialized(_this));_this.checkCompleteness=_this.checkCompleteness.bind(_assertThisInitialized(_this));return _this;}_createClass(RegisterForm,[{key:\"checkCompleteness\",value:function checkCompleteness(){var formState=this.formApi.getState();var formValues=_objectSpread({},formState.values);var isComplete=formValues.ogrn&&formValues.email&&formValues.surname&&formValues.position&&formValues.password&&formValues.captcha;this.setState({isComplete:!!isComplete});}},{key:\"refreshCaptcha\",value:function refreshCaptcha(){var captchaUrl=\"/front/captcha?\".concat(new Date().getTime());this.setState({captchaUrl:captchaUrl});return captchaUrl;}},{key:\"showServerErrorsInForm\",value:function showServerErrorsInForm(data){if(data[0]){Flash.error(data[0]);}var invalidState={};if(data.company){invalidState.isOGRNInvalid=true;this.formApi.setError('ogrn',capitalize(data.company[0]));}if(data.email){invalidState.isEmailInvalid=true;this.formApi.setError('email',capitalize(data.email[0]));}if(data.password){invalidState.isPasswordInvalid=true;this.formApi.setError('password',capitalize(data.password[0]));}if(data.person){invalidState.isFIOInvalid=true;if(data.person.surname){this.formApi.setError('surname',capitalize(data.person.surname[0]));}if(data.person.name){this.formApi.setError('name',capitalize(data.person.name[0]));}if(data.person.patronymic){this.formApi.setError('patronymic',capitalize(data.person.patronymic[0]));}}if(data.captcha){invalidState.isCaptchaInvalid=true;this.formApi.setError('captcha',capitalize(data.captcha[0]));}this.setState(_objectSpread({},invalidState));}},{key:\"submit\",value:function submit(){var _this2=this;var formState=this.formApi.getState();this.checkCompleteness();if(formState.invalid||!this.state.isComplete)return;var handleSuccess=function handleSuccess(){_this2.setState({isFormSentSuccessfully:true});};var handleError=function handleError(error){if(error.jsError&&error.jsError.response){var status=error.jsError.response.status;switch(status){case 400:_this2.showServerErrorsInForm(error.jsError.response.data);break;case 500:Flash.error(SERVER_500);break;default:throw new Error(\"\\u041D\\u0435 \\u043E\\u0431\\u0440\\u0430\\u0431\\u0430\\u0442\\u044B\\u0432\\u0430\\u0435\\u0442\\u0441\\u044F \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441 \".concat(status));}}else{Flash.error(error);}};Core.register({ogrn:formState.values.ogrn,email:formState.values.email,surname:formState.values.surname,name:formState.values.name,patronymic:formState.values.patronymic,password:formState.values.password,position:formState.values.position,captcha:formState.values.captcha}).then(handleSuccess).catch(handleError);}},{key:\"setFormApi\",value:function setFormApi(formApi){this.formApi=formApi;}},{key:\"componentDidMount\",value:function componentDidMount(){this.refreshCaptcha();}},{key:\"render\",value:function render(){var _this3=this;var submitBtnClasses=classNames({'ds-button':true,'height-large':true,'color-primary':true,'width-fluid-full':true});var inputOGRNClasses=classNames({'ds-input':true,error:this.state.isOGRNInvalid});var maskOGRN=function maskOGRN(value){return value&&value.replace(/\\D/g,'').slice(0,15);};var inputEmailClasses=classNames({'ds-input':true,error:this.state.isEmailInvalid});var inputFIOClasses=classNames(_defineProperty({'ds-input-block-vertical':true},styles.inputBlockError,this.state.isFIOInvalid));var inputPositionClasses=classNames({'ds-input':true,error:this.state.isPositionInvalid});var inputPasswordClasses=classNames({'ds-input':true,error:this.state.isPasswordInvalid});var inputConfirmPasswordClasses=classNames({'ds-input':true,error:this.state.isConfirmPasswordInvalid});var inputCaptchaClasses=classNames({'ds-input':true,error:this.state.isCaptchaInvalid});return this.state.isFormSentSuccessfully?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MessageSuccessRegistration,null),/*#__PURE__*/React.createElement(\"footer\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"ds-button-block width-fluid-full\"},/*#__PURE__*/React.createElement(NavLink,{className:\"ds-button height-large width-fluid-full\",to:AUTH_LOGIN},GO_TO_LOGIN_FORM)))):/*#__PURE__*/React.createElement(Form,{getApi:this.setFormApi,onChange:function onChange(formState){_this3.setState({isInvalid:formState.invalid,isOGRNInvalid:formState.errors.ogrn,isEmailInvalid:formState.errors.email,isFIOInvalid:formState.errors.surname||formState.errors.name,isPositionInvalid:formState.errors.position,isPasswordInvalid:formState.errors.password,isConfirmPasswordInvalid:formState.errors.confirmPassword,isCaptchaInvalid:formState.errors.captcha});_this3.checkCompleteness();}},function(_ref){var formState=_ref.formState;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"ul\",{className:\"form text-center\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_company\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,OGRN_OGRNIP),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.ogrn)),/*#__PURE__*/React.createElement(Text,{id:\"registration_company\",field:\"ogrn\",validate:validateOGRN,validateOnChange:true,validateOnBlur:true,className:inputOGRNClasses,type:\"text\",placeholder:ENTER_OGRN,maintainCursor:true,mask:maskOGRN,pattern:\"^([0-9]{13}|[0-9]{15})$\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_company\",className:\"ds-field-name top error\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_email\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,EMAIL),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.email)),/*#__PURE__*/React.createElement(Text,{id:\"registration_email\",field:\"email\",validate:validateEmail,validateOnChange:true,validateOnBlur:true,className:inputEmailClasses,type:\"email\",autoComplete:\"username email\",placeholder:ENTER_EMAIL_FOR_NOTIFICATIONS}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_email\",className:\"ds-field-name top error\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_surname\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,FIO),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.surname||formState.errors.name||formState.errors.patronymic)),/*#__PURE__*/React.createElement(\"div\",{className:inputFIOClasses},/*#__PURE__*/React.createElement(Text,{field:\"surname\",validate:validateSurname,validateOnChange:true,validateOnBlur:true,notify:['name'],className:\"ds-input\",type:\"text\",placeholder:SURNAME}),/*#__PURE__*/React.createElement(Text,{field:\"name\",validate:validateName,validateOnChange:true,validateOnBlur:true,notify:['surname'],className:\"ds-input\",type:\"text\",placeholder:NAME}),/*#__PURE__*/React.createElement(Text,{field:\"patronymic\",validateOnChange:true,validateOnBlur:true,notify:['surname'],className:\"ds-input\",type:\"text\",placeholder:PATRONYMIC})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration-surname\",className:\"ds-field-name top error\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration-name\",className:\"ds-field-name top error\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_position\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,WORK_POSITION),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.position)),/*#__PURE__*/React.createElement(Text,{id:\"registration_position\",field:\"position\",validate:validatePosition,validateOnChange:true,validateOnBlur:true,className:inputPositionClasses,type:\"text\",placeholder:ENTER_WORK_POSITION}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_position\",className:\"ds-field-name top error\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_password\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,PASSWORD),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.password)),/*#__PURE__*/React.createElement(Text,{id:\"registration_password\",field:\"password\",validate:validateNewPassword,validateOnChange:true,validateOnBlur:true,notify:['confirmPassword'],className:inputPasswordClasses,type:\"password\",placeholder:ENTER_PASSWORD,autoComplete:\"new-password\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_position\",className:\"ds-field-name top error\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_password_repeat\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,REPEAT_PASSWORD),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.confirmPassword)),/*#__PURE__*/React.createElement(Text,{id:\"registration_password_repeat\",field:\"confirmPassword\",validate:validateMatchPasswords,validateOnChange:true,validateOnBlur:true,notify:['password'],className:inputConfirmPasswordClasses,type:\"password\",autoComplete:\"new-password\",placeholder:REPEAT_PASSWORD}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"group block\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"captcha\",className:\"ds-field-name top\"},/*#__PURE__*/React.createElement(\"span\",null,IMG_CODE),/*#__PURE__*/React.createElement(\"span\",{className:\"right error\"},formState.errors.captcha)),/*#__PURE__*/React.createElement(Text,{id:\"captcha\",field:\"captcha\",validate:validateCaptcha,validateOnChange:true,validateOnBlur:true,className:inputCaptchaClasses,type:\"text\",placeholder:ENTER_IMG_CODE}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"registration_company\",className:\"ds-field-name top error\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"captcha\"},/*#__PURE__*/React.createElement(\"img\",{id:\"registrationCatpcha\",className:\"pointer\",src:_this3.state.captchaUrl,alt:\"\",onClick:_this3.refreshCaptcha}),/*#__PURE__*/React.createElement(\"img\",{className:\"refresh\",src:UPDATE_PNG,alt:UPDATE_IMG,onClick:_this3.refreshCaptcha})))),/*#__PURE__*/React.createElement(\"footer\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"ds-button-block width-fluid-full\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:submitBtnClasses,onClick:_this3.submit},REG),/*#__PURE__*/React.createElement(NavLink,{className:\"ds-button height-large width-fluid-full\",to:AUTH_LOGIN},GO_TO_LOGIN_FORM))));});}}]);return RegisterForm;}(Component);export default RegisterForm;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/auth/forms/RegisterForm.js"],"names":["React","Component","NavLink","Form","Text","Core","capitalize","classNames","validateOGRN","validateEmail","validateNewPassword","validateMatchPasswords","validatePosition","validateCaptcha","validateSurname","validateName","Flash","MessageSuccessRegistration","styles","AUTH_LOGIN","UPDATE_PNG","GO_TO_LOGIN_FORM","REG","UPDATE_IMG","OGRN_OGRNIP","FIO","SURNAME","NAME","PATRONYMIC","EMAIL","PASSWORD","WORK_POSITION","IMG_CODE","ENTER_PASSWORD","REPEAT_PASSWORD","ENTER_OGRN","ENTER_EMAIL_FOR_NOTIFICATIONS","ENTER_WORK_POSITION","ENTER_IMG_CODE","SERVER_500","RegisterForm","props","state","captchaUrl","isOGRNInvalid","isEmailInvalid","isFIOInvalid","isPositionInvalid","isPasswordInvalid","isConfirmPasswordInvalid","isCaptchaInvalid","isInvalid","isComplete","isFormSentSuccessfully","refreshCaptcha","bind","submit","setFormApi","checkCompleteness","formState","formApi","getState","formValues","values","ogrn","email","surname","position","password","captcha","setState","Date","getTime","data","error","invalidState","company","setError","person","name","patronymic","invalid","handleSuccess","handleError","jsError","response","status","showServerErrorsInForm","Error","register","then","catch","submitBtnClasses","inputOGRNClasses","maskOGRN","value","replace","slice","inputEmailClasses","inputFIOClasses","inputBlockError","inputPositionClasses","inputPasswordClasses","inputConfirmPasswordClasses","inputCaptchaClasses","errors","confirmPassword"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Form, Text } from 'informed';\r\nimport Core from '@distate/core/dist/application/Core';\r\nimport { capitalize } from '../../../utils/StringUtil';\r\nimport classNames from 'classnames';\r\nimport {\r\n  validateOGRN,\r\n  validateEmail,\r\n  validateNewPassword,\r\n  validateMatchPasswords,\r\n  validatePosition,\r\n  validateCaptcha,\r\n  validateSurname,\r\n  validateName\r\n} from '../../../utils/ValidateUtil';\r\nimport Flash from '../../../common/flash/Flash';\r\nimport MessageSuccessRegistration from '../messages/MessageSuccessRegistration';\r\nimport styles from './RegisterForm.module.css';\r\nimport { AUTH_LOGIN, UPDATE_PNG } from '../../../common/Url';\r\nimport {\r\n  GO_TO_LOGIN_FORM,\r\n  REG,\r\n  UPDATE_IMG,\r\n  OGRN_OGRNIP,\r\n  FIO,\r\n  SURNAME,\r\n  NAME,\r\n  PATRONYMIC,\r\n  EMAIL,\r\n  PASSWORD,\r\n  WORK_POSITION,\r\n  IMG_CODE,\r\n  ENTER_PASSWORD,\r\n  REPEAT_PASSWORD,\r\n  ENTER_OGRN,\r\n  ENTER_EMAIL_FOR_NOTIFICATIONS,\r\n  ENTER_WORK_POSITION,\r\n  ENTER_IMG_CODE,\r\n  SERVER_500\r\n} from '../../../common/Lbl';\r\n\r\nclass RegisterForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      captchaUrl: '',\r\n      isOGRNInvalid: false,\r\n      isEmailInvalid: false,\r\n      isFIOInvalid: false,\r\n      isPositionInvalid: false,\r\n      isPasswordInvalid: false,\r\n      isConfirmPasswordInvalid: false,\r\n      isCaptchaInvalid: false,\r\n      isInvalid: false,\r\n      isComplete: false,\r\n      isFormSentSuccessfully: false\r\n    };\r\n    this.refreshCaptcha = this.refreshCaptcha.bind(this);\r\n    this.submit = this.submit.bind(this);\r\n    this.setFormApi = this.setFormApi.bind(this);\r\n    this.checkCompleteness = this.checkCompleteness.bind(this);\r\n  }\r\n  checkCompleteness() {\r\n    const formState = this.formApi.getState();\r\n    let formValues = { ...formState.values };\r\n    const isComplete =\r\n      formValues.ogrn &&\r\n      formValues.email &&\r\n      formValues.surname &&\r\n      formValues.position &&\r\n      formValues.password &&\r\n      formValues.captcha;\r\n    this.setState({ isComplete: !!isComplete });\r\n  }\r\n  refreshCaptcha() {\r\n    const captchaUrl = `/front/captcha?${new Date().getTime()}`;\r\n    this.setState({ captchaUrl });\r\n    return captchaUrl;\r\n  }\r\n  showServerErrorsInForm(data) {\r\n    if (data[0]) {\r\n      Flash.error(data[0]);\r\n    }\r\n    const invalidState = {};\r\n    if (data.company) {\r\n      invalidState.isOGRNInvalid = true;\r\n      this.formApi.setError('ogrn', capitalize(data.company[0]));\r\n    }\r\n    if (data.email) {\r\n      invalidState.isEmailInvalid = true;\r\n      this.formApi.setError('email', capitalize(data.email[0]));\r\n    }\r\n    if (data.password) {\r\n      invalidState.isPasswordInvalid = true;\r\n      this.formApi.setError('password', capitalize(data.password[0]));\r\n    }\r\n    if (data.person) {\r\n      invalidState.isFIOInvalid = true;\r\n      if (data.person.surname) {\r\n        this.formApi.setError('surname', capitalize(data.person.surname[0]));\r\n      }\r\n      if (data.person.name) {\r\n        this.formApi.setError('name', capitalize(data.person.name[0]));\r\n      }\r\n      if (data.person.patronymic) {\r\n        this.formApi.setError('patronymic', capitalize(data.person.patronymic[0]));\r\n      }\r\n    }\r\n    if (data.captcha) {\r\n      invalidState.isCaptchaInvalid = true;\r\n      this.formApi.setError('captcha', capitalize(data.captcha[0]));\r\n    }\r\n    this.setState({ ...invalidState });\r\n  }\r\n\r\n  submit() {\r\n    const formState = this.formApi.getState();\r\n    this.checkCompleteness();\r\n    if (formState.invalid || !this.state.isComplete) return;\r\n\r\n    const handleSuccess = () => {\r\n      this.setState({ isFormSentSuccessfully: true });\r\n    };\r\n    const handleError = error => {\r\n      if (error.jsError && error.jsError.response) {\r\n        const status = error.jsError.response.status;\r\n        switch (status) {\r\n          case 400:\r\n            this.showServerErrorsInForm(error.jsError.response.data);\r\n            break;\r\n          case 500:\r\n            Flash.error(SERVER_500);\r\n            break;\r\n          default:\r\n            throw new Error(`Не обрабатывается статус ${status}`);\r\n        }\r\n      } else {\r\n        Flash.error(error);\r\n      }\r\n    };\r\n    Core.register({\r\n      ogrn: formState.values.ogrn,\r\n      email: formState.values.email,\r\n      surname: formState.values.surname,\r\n      name: formState.values.name,\r\n      patronymic: formState.values.patronymic,\r\n      password: formState.values.password,\r\n      position: formState.values.position,\r\n      captcha: formState.values.captcha\r\n    })\r\n      .then(handleSuccess)\r\n      .catch(handleError);\r\n  }\r\n  setFormApi(formApi) {\r\n    this.formApi = formApi;\r\n  }\r\n  componentDidMount() {\r\n    this.refreshCaptcha();\r\n  }\r\n  render() {\r\n    const submitBtnClasses = classNames({\r\n      'ds-button': true,\r\n      'height-large': true,\r\n      'color-primary': true,\r\n      'width-fluid-full': true\r\n    });\r\n\r\n    const inputOGRNClasses = classNames({\r\n      'ds-input': true,\r\n      error: this.state.isOGRNInvalid\r\n    });\r\n\r\n    const maskOGRN = value => {\r\n      return value && value.replace(/\\D/g, '').slice(0, 15);\r\n    };\r\n\r\n    const inputEmailClasses = classNames({\r\n      'ds-input': true,\r\n      error: this.state.isEmailInvalid\r\n    });\r\n\r\n    const inputFIOClasses = classNames({\r\n      'ds-input-block-vertical': true,\r\n      [styles.inputBlockError]: this.state.isFIOInvalid\r\n    });\r\n\r\n    const inputPositionClasses = classNames({\r\n      'ds-input': true,\r\n      error: this.state.isPositionInvalid\r\n    });\r\n\r\n    const inputPasswordClasses = classNames({\r\n      'ds-input': true,\r\n      error: this.state.isPasswordInvalid\r\n    });\r\n\r\n    const inputConfirmPasswordClasses = classNames({\r\n      'ds-input': true,\r\n      error: this.state.isConfirmPasswordInvalid\r\n    });\r\n\r\n    const inputCaptchaClasses = classNames({\r\n      'ds-input': true,\r\n      error: this.state.isCaptchaInvalid\r\n    });\r\n\r\n    return this.state.isFormSentSuccessfully ? (\r\n      <React.Fragment>\r\n        <MessageSuccessRegistration />\r\n        <footer>\r\n          <div className=\"ds-button-block width-fluid-full\">\r\n            <NavLink className=\"ds-button height-large width-fluid-full\" to={AUTH_LOGIN}>\r\n              {GO_TO_LOGIN_FORM}\r\n            </NavLink>\r\n          </div>\r\n        </footer>\r\n      </React.Fragment>\r\n    ) : (\r\n      <Form\r\n        getApi={this.setFormApi}\r\n        onChange={formState => {\r\n          this.setState({\r\n            isInvalid: formState.invalid,\r\n            isOGRNInvalid: formState.errors.ogrn,\r\n            isEmailInvalid: formState.errors.email,\r\n            isFIOInvalid: formState.errors.surname || formState.errors.name,\r\n            isPositionInvalid: formState.errors.position,\r\n            isPasswordInvalid: formState.errors.password,\r\n            isConfirmPasswordInvalid: formState.errors.confirmPassword,\r\n            isCaptchaInvalid: formState.errors.captcha\r\n          });\r\n          this.checkCompleteness();\r\n        }}\r\n      >\r\n        {({ formState }) => (\r\n          <React.Fragment>\r\n            <ul className=\"form text-center\">\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"registration_company\" className=\"ds-field-name top\">\r\n                    <span>{OGRN_OGRNIP}</span>\r\n                    <span className=\"right error\">{formState.errors.ogrn}</span>\r\n                  </label>\r\n                  <Text\r\n                    id=\"registration_company\"\r\n                    field=\"ogrn\"\r\n                    validate={validateOGRN}\r\n                    validateOnChange\r\n                    validateOnBlur\r\n                    className={inputOGRNClasses}\r\n                    type=\"text\"\r\n                    placeholder={ENTER_OGRN}\r\n                    maintainCursor\r\n                    mask={maskOGRN}\r\n                    pattern=\"^([0-9]{13}|[0-9]{15})$\"\r\n                  />\r\n                  <label htmlFor=\"registration_company\" className=\"ds-field-name top error\" />\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"registration_email\" className=\"ds-field-name top\">\r\n                    <span>{EMAIL}</span>\r\n                    <span className=\"right error\">{formState.errors.email}</span>\r\n                  </label>\r\n                  <Text\r\n                    id=\"registration_email\"\r\n                    field=\"email\"\r\n                    validate={validateEmail}\r\n                    validateOnChange\r\n                    validateOnBlur\r\n                    className={inputEmailClasses}\r\n                    type=\"email\"\r\n                    autoComplete=\"username email\"\r\n                    placeholder={ENTER_EMAIL_FOR_NOTIFICATIONS}\r\n                  />\r\n                  <label htmlFor=\"registration_email\" className=\"ds-field-name top error\" />\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"registration_surname\" className=\"ds-field-name top\">\r\n                    <span>{FIO}</span>\r\n                    <span className=\"right error\">\r\n                      {formState.errors.surname ||\r\n                        formState.errors.name ||\r\n                        formState.errors.patronymic}\r\n                    </span>\r\n                  </label>\r\n                  <div className={inputFIOClasses}>\r\n                    <Text\r\n                      field=\"surname\"\r\n                      validate={validateSurname}\r\n                      validateOnChange\r\n                      validateOnBlur\r\n                      notify={['name']}\r\n                      className=\"ds-input\"\r\n                      type=\"text\"\r\n                      placeholder={SURNAME}\r\n                    />\r\n                    <Text\r\n                      field=\"name\"\r\n                      validate={validateName}\r\n                      validateOnChange\r\n                      validateOnBlur\r\n                      notify={['surname']}\r\n                      className=\"ds-input\"\r\n                      type=\"text\"\r\n                      placeholder={NAME}\r\n                    />\r\n                    <Text\r\n                      field=\"patronymic\"\r\n                      validateOnChange\r\n                      validateOnBlur\r\n                      notify={['surname']}\r\n                      className=\"ds-input\"\r\n                      type=\"text\"\r\n                      placeholder={PATRONYMIC}\r\n                    />\r\n                  </div>\r\n                  <label htmlFor=\"registration-surname\" className=\"ds-field-name top error\" />\r\n                  <label htmlFor=\"registration-name\" className=\"ds-field-name top error\" />\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"registration_position\" className=\"ds-field-name top\">\r\n                    <span>{WORK_POSITION}</span>\r\n                    <span className=\"right error\">{formState.errors.position}</span>\r\n                  </label>\r\n                  <Text\r\n                    id=\"registration_position\"\r\n                    field=\"position\"\r\n                    validate={validatePosition}\r\n                    validateOnChange\r\n                    validateOnBlur\r\n                    className={inputPositionClasses}\r\n                    type=\"text\"\r\n                    placeholder={ENTER_WORK_POSITION}\r\n                  />\r\n                  <label htmlFor=\"registration_position\" className=\"ds-field-name top error\" />\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"registration_password\" className=\"ds-field-name top\">\r\n                    <span>{PASSWORD}</span>\r\n                    <span className=\"right error\">{formState.errors.password}</span>\r\n                  </label>\r\n                  <Text\r\n                    id=\"registration_password\"\r\n                    field=\"password\"\r\n                    validate={validateNewPassword}\r\n                    validateOnChange\r\n                    validateOnBlur\r\n                    notify={['confirmPassword']}\r\n                    className={inputPasswordClasses}\r\n                    type=\"password\"\r\n                    placeholder={ENTER_PASSWORD}\r\n                    autoComplete=\"new-password\"\r\n                  />\r\n                  <label htmlFor=\"registration_position\" className=\"ds-field-name top error\" />\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"registration_password_repeat\" className=\"ds-field-name top\">\r\n                    <span>{REPEAT_PASSWORD}</span>\r\n                    <span className=\"right error\">{formState.errors.confirmPassword}</span>\r\n                  </label>\r\n                  <Text\r\n                    id=\"registration_password_repeat\"\r\n                    field=\"confirmPassword\"\r\n                    validate={validateMatchPasswords}\r\n                    validateOnChange\r\n                    validateOnBlur\r\n                    notify={['password']}\r\n                    className={inputConfirmPasswordClasses}\r\n                    type=\"password\"\r\n                    autoComplete=\"new-password\"\r\n                    placeholder={REPEAT_PASSWORD}\r\n                  />\r\n                </div>\r\n              </li>\r\n              <li>\r\n                <div className=\"group block\">\r\n                  <label htmlFor=\"captcha\" className=\"ds-field-name top\">\r\n                    <span>{IMG_CODE}</span>\r\n                    <span className=\"right error\">{formState.errors.captcha}</span>\r\n                  </label>\r\n                  <Text\r\n                    id=\"captcha\"\r\n                    field=\"captcha\"\r\n                    validate={validateCaptcha}\r\n                    validateOnChange\r\n                    validateOnBlur\r\n                    className={inputCaptchaClasses}\r\n                    type=\"text\"\r\n                    placeholder={ENTER_IMG_CODE}\r\n                  />\r\n                  <label htmlFor=\"registration_company\" className=\"ds-field-name top error\" />\r\n                </div>\r\n                <div className=\"captcha\">\r\n                  <img\r\n                    id=\"registrationCatpcha\"\r\n                    className=\"pointer\"\r\n                    src={this.state.captchaUrl}\r\n                    alt=\"\"\r\n                    onClick={this.refreshCaptcha}\r\n                  />\r\n                  <img\r\n                    className=\"refresh\"\r\n                    src={UPDATE_PNG}\r\n                    alt={UPDATE_IMG}\r\n                    onClick={this.refreshCaptcha}\r\n                  />\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <footer>\r\n              <div className=\"ds-button-block width-fluid-full\">\r\n                <button type=\"submit\" className={submitBtnClasses} onClick={this.submit}>\r\n                  {REG}\r\n                </button>\r\n                <NavLink className=\"ds-button height-large width-fluid-full\" to={AUTH_LOGIN}>\r\n                  {GO_TO_LOGIN_FORM}\r\n                </NavLink>\r\n              </div>\r\n            </footer>\r\n          </React.Fragment>\r\n        )}\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RegisterForm;\r\n"]},"metadata":{},"sourceType":"module"}