{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useDispatch,useSelector}from'react-redux';import{Modal,Button,Icons}from'@distate/components';import{Pagination}from'../../../../common/pagination';import{getNoContractorGroups,addContractorToGroup}from'../../store/actions';import{currentContractor as currentContractorSelector}from'../../store/selectors';/** Список групп, в которых еще нет пользователя */export var SubModalGroups=function SubModalGroups(_ref){var _currentContractor$ne,_currentContractor$ne2;var _hide=_ref.hide,isVisible=_ref.isVisible,contractorId=_ref.contractorId;var dispatch=useDispatch();var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),offset=_React$useState2[0],setOffset=_React$useState2[1];React.useEffect(function(){isVisible&&dispatch(getNoContractorGroups({id:contractorId,offset:offset,limit:10}));},[contractorId,dispatch,isVisible,offset]);var currentContractor=useSelector(currentContractorSelector);var rows=(currentContractor===null||currentContractor===void 0?void 0:(_currentContractor$ne=currentContractor.newGroups)===null||_currentContractor$ne===void 0?void 0:_currentContractor$ne.rows)||[];/** добавление текущего контрагента в группу */var onAddToGroup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(groupId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(addContractorToGroup({contractorId:contractorId,groupId:groupId}));case 2:_context.next=4;return dispatch(getNoContractorGroups({id:contractorId,offset:offset,limit:10}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function onAddToGroup(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Modal,{hide:function hide(){return _hide();},isVisible:isVisible},/*#__PURE__*/React.createElement(Modal.Header,{title:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\"}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,rows.map(function(item){return/*#__PURE__*/React.createElement(\"tr\",{key:item.id},/*#__PURE__*/React.createElement(\"td\",null,item.title),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconPlus,{fill:\"currentColor\"}),onClick:function onClick(){return onAddToGroup(item.id);}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{listLength:currentContractor===null||currentContractor===void 0?void 0:(_currentContractor$ne2=currentContractor.newGroups)===null||_currentContractor$ne2===void 0?void 0:_currentContractor$ne2.recordsTotal,setOffset:setOffset}))))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/natural-entity/SubModalGroups.tsx"],"names":["React","useDispatch","useSelector","Modal","Button","Icons","Pagination","getNoContractorGroups","addContractorToGroup","currentContractor","currentContractorSelector","SubModalGroups","hide","isVisible","contractorId","dispatch","useState","offset","setOffset","useEffect","id","limit","rows","newGroups","onAddToGroup","groupId","map","item","title","recordsTotal"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { Modal, Button, Icons } from '@distate/components';\r\nimport { Pagination } from '../../../../common/pagination';\r\nimport { getNoContractorGroups, addContractorToGroup } from '../../store/actions';\r\nimport { currentContractor as currentContractorSelector } from '../../store/selectors';\r\n\r\ntype Props = { contractorId: number; hide: () => void; isVisible: boolean };\r\n\r\n/** Список групп, в которых еще нет пользователя */\r\nexport const SubModalGroups = ({ hide, isVisible, contractorId }: Props) => {\r\n  const dispatch = useDispatch();\r\n  const [offset, setOffset] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    isVisible && dispatch(getNoContractorGroups({ id: contractorId, offset, limit: 10 }));\r\n  }, [contractorId, dispatch, isVisible, offset]);\r\n\r\n  const currentContractor = useSelector(currentContractorSelector);\r\n  const rows = currentContractor?.newGroups?.rows || [];\r\n\r\n  /** добавление текущего контрагента в группу */\r\n  const onAddToGroup = async (groupId: number) => {\r\n    await dispatch(addContractorToGroup({ contractorId, groupId }));\r\n    await dispatch(getNoContractorGroups({ id: contractorId, offset, limit: 10 }));\r\n  };\r\n\r\n  return (\r\n    <Modal hide={() => hide()} isVisible={isVisible}>\r\n      <Modal.Header title=\"Добавление элементов\" />\r\n      <Modal.Body>\r\n        <table className=\"table\">\r\n          <thead className=\"common-table-head\">\r\n            <tr>\r\n              <td>Название</td>\r\n              <td></td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows.map(item => (\r\n              <tr key={item.id}>\r\n                <td>{item.title}</td>\r\n                <td align=\"right\">\r\n                  <Button\r\n                    icon={<Icons.IconPlus fill=\"currentColor\" />}\r\n                    onClick={() => onAddToGroup(item.id)}\r\n                  >\r\n                    Добавить\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td></td>\r\n              <td>\r\n                <div className=\"pagination-right\">\r\n                  <Pagination\r\n                    listLength={currentContractor?.newGroups?.recordsTotal}\r\n                    setOffset={setOffset}\r\n                  />\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}