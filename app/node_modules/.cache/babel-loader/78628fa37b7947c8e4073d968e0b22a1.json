{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useSelector,useDispatch}from'react-redux';import{Button,Icons}from'@distate/components';import{NaturalEntityInfo as NaturalEntityInfoSelector,naturalEntityInfoAdded}from'../../../store/selectors';import{RelationStatus}from'../../../helpers/contractors.typings';import{addNaturalEntityToGroup,getNaturalEntityGroup,getAddedGroupNaturalEntity}from'../../../store/actions';import{Pagination}from'../../../../../common/pagination';import{NaturalEntityFilter}from'./filters';export var SubModalNaturalEntityTable=function SubModalNaturalEntityTable(_ref){var _useSelector;var groupId=_ref.groupId;var dispatch=useDispatch();var naturalEntityInfo=useSelector(NaturalEntityInfoSelector);/** список добавленных ФЛ */var naturalEntityList=(naturalEntityInfo===null||naturalEntityInfo===void 0?void 0:naturalEntityInfo.rows)||[];var isEmty=naturalEntityList.length===0;var naturalEntityAddedOffset=(_useSelector=useSelector(naturalEntityInfoAdded))===null||_useSelector===void 0?void 0:_useSelector.offset;var _React$useState=React.useState(naturalEntityAddedOffset),_React$useState2=_slicedToArray(_React$useState,2),offset=_React$useState2[0],setOffset=_React$useState2[1];var onAdd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(contractorId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(addNaturalEntityToGroup({groupId:groupId,contractorId:contractorId}));case 2:dispatch(getNaturalEntityGroup({id:groupId,offset:offset}));dispatch(getAddedGroupNaturalEntity({id:groupId,offset:offset}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function onAdd(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0424\\u0418\\u041E\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u041D\\u0418\\u041B\\u0421\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,isEmty&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043F\\u0443\\u0441\\u0442.\"),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null)),!isEmty&&naturalEntityList.map(function(item){return/*#__PURE__*/React.createElement(\"tr\",{key:item.id},/*#__PURE__*/React.createElement(\"td\",null,item.name),/*#__PURE__*/React.createElement(\"td\",null,item.status===RelationStatus.Active?'активный':'заблокированный'),/*#__PURE__*/React.createElement(\"td\",null,item.socialNumber),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconPlus,{fill:\"currentColor\"}),onClick:function onClick(){return onAdd(item.contractorId);}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:4},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(NaturalEntityFilter,{id:groupId}),/*#__PURE__*/React.createElement(Pagination,{listLength:naturalEntityInfo===null||naturalEntityInfo===void 0?void 0:naturalEntityInfo.recordsTotal,setOffset:setOffset}))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/groups/modal/SubModalNaturalEntityTable.tsx"],"names":["React","useSelector","useDispatch","Button","Icons","NaturalEntityInfo","NaturalEntityInfoSelector","naturalEntityInfoAdded","RelationStatus","addNaturalEntityToGroup","getNaturalEntityGroup","getAddedGroupNaturalEntity","Pagination","NaturalEntityFilter","SubModalNaturalEntityTable","groupId","dispatch","naturalEntityInfo","naturalEntityList","rows","isEmty","length","naturalEntityAddedOffset","offset","useState","setOffset","onAdd","contractorId","id","map","item","name","status","Active","socialNumber","recordsTotal"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { Button, Icons } from '@distate/components';\r\n\r\nimport {\r\n  NaturalEntityInfo as NaturalEntityInfoSelector,\r\n  naturalEntityInfoAdded\r\n} from '../../../store/selectors';\r\nimport { RelationStatus } from '../../../helpers/contractors.typings';\r\nimport {\r\n  addNaturalEntityToGroup,\r\n  getNaturalEntityGroup,\r\n  getAddedGroupNaturalEntity\r\n} from '../../../store/actions';\r\nimport { Pagination } from '../../../../../common/pagination';\r\nimport { NaturalEntityFilter } from './filters';\r\n\r\nexport const SubModalNaturalEntityTable = ({ groupId }: { groupId: number }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const naturalEntityInfo = useSelector(NaturalEntityInfoSelector);\r\n  /** список добавленных ФЛ */\r\n  const naturalEntityList = naturalEntityInfo?.rows || [];\r\n  const isEmty = naturalEntityList.length === 0;\r\n\r\n  const naturalEntityAddedOffset = useSelector(naturalEntityInfoAdded)?.offset;\r\n\r\n  const [offset, setOffset] = React.useState(naturalEntityAddedOffset);\r\n\r\n  const onAdd = async (contractorId: number) => {\r\n    await dispatch(addNaturalEntityToGroup({ groupId, contractorId }));\r\n    dispatch(getNaturalEntityGroup({ id: groupId, offset }));\r\n    dispatch(getAddedGroupNaturalEntity({ id: groupId, offset }));\r\n  };\r\n\r\n  return (\r\n    <table className=\"table\">\r\n      <thead className=\"common-table-head\">\r\n        <tr>\r\n          <td>ФИО</td>\r\n          <td>Статус</td>\r\n          <td>СНИЛС</td>\r\n          <td></td>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {isEmty && (\r\n          <tr>\r\n            <td>Список пуст.</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n          </tr>\r\n        )}\r\n        {!isEmty &&\r\n          naturalEntityList.map(item => (\r\n            <tr key={item.id}>\r\n              <td>{item.name}</td>\r\n              <td>{item.status === RelationStatus.Active ? 'активный' : 'заблокированный'}</td>\r\n              <td>{item.socialNumber}</td>\r\n              <td>\r\n                <Button\r\n                  icon={<Icons.IconPlus fill=\"currentColor\" />}\r\n                  onClick={() => onAdd(item.contractorId)}\r\n                >\r\n                  Добавить\r\n                </Button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colSpan={4}>\r\n            <div className=\"pagination-right\">\r\n              <NaturalEntityFilter id={groupId} />\r\n              <Pagination listLength={naturalEntityInfo?.recordsTotal} setOffset={setOffset} />\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}