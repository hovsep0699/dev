{"ast":null,"code":";\n\n(function () {\n  //already loaded\n  if (window.cadesplugin) return;\n  var pluginObject;\n  var plugin_resolved = 0;\n  var plugin_reject;\n  var plugin_resolve;\n  var isOpera = 0;\n  var isFireFox = 0;\n  var isSafari = 0;\n  var isYandex = 0;\n  var canPromise = !!window.Promise;\n  var cadesplugin;\n\n  if (canPromise) {\n    cadesplugin = new Promise(function (resolve, reject) {\n      plugin_resolve = resolve;\n      plugin_reject = reject;\n    });\n  } else {\n    cadesplugin = {};\n  }\n\n  function check_browser() {\n    var ua = navigator.userAgent,\n        tem,\n        M = ua.match(/(opera|yabrowser|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return {\n        name: 'IE',\n        version: tem[1] || ''\n      };\n    }\n\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\b(OPR|Edg|YaBrowser)\\/(\\d+)/);\n      if (tem != null) return {\n        name: tem[1].replace('OPR', 'Opera'),\n        version: tem[2]\n      };\n    }\n\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) M.splice(1, 1, tem[1]);\n    return {\n      name: M[0],\n      version: M[1]\n    };\n  }\n\n  var browserSpecs = check_browser();\n\n  function cpcsp_console_log(level, msg) {\n    //IE9 не может писать в консоль если не открыта вкладка developer tools\n    if (typeof console === 'undefined') return;\n\n    if (level <= cadesplugin.current_log_level) {\n      if (level === cadesplugin.LOG_LEVEL_DEBUG) console.log(\"DEBUG: %s\", msg);\n      if (level === cadesplugin.LOG_LEVEL_INFO) console.info(\"INFO: %s\", msg);\n      if (level === cadesplugin.LOG_LEVEL_ERROR) console.error(\"ERROR: %s\", msg);\n      return;\n    }\n  }\n\n  function set_log_level(level) {\n    if (!(level === cadesplugin.LOG_LEVEL_DEBUG || level === cadesplugin.LOG_LEVEL_INFO || level === cadesplugin.LOG_LEVEL_ERROR)) {\n      cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR, \"cadesplugin_api.js: Incorrect log_level: \" + level);\n      return;\n    }\n\n    cadesplugin.current_log_level = level;\n    if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_DEBUG) cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO, \"cadesplugin_api.js: log_level = DEBUG\");\n    if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_INFO) cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO, \"cadesplugin_api.js: log_level = INFO\");\n    if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_ERROR) cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO, \"cadesplugin_api.js: log_level = ERROR\");\n\n    if (isNativeMessageSupported()) {\n      if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_DEBUG) window.postMessage(\"set_log_level=debug\", \"*\");\n      if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_INFO) window.postMessage(\"set_log_level=info\", \"*\");\n      if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_ERROR) window.postMessage(\"set_log_level=error\", \"*\");\n    }\n  }\n\n  function set_constantValues() {\n    cadesplugin.CAPICOM_MEMORY_STORE = 0;\n    cadesplugin.CAPICOM_LOCAL_MACHINE_STORE = 1;\n    cadesplugin.CAPICOM_CURRENT_USER_STORE = 2;\n    cadesplugin.CADESCOM_MEMORY_STORE = 0;\n    cadesplugin.CADESCOM_LOCAL_MACHINE_STORE = 1;\n    cadesplugin.CADESCOM_CURRENT_USER_STORE = 2;\n    cadesplugin.CADESCOM_CONTAINER_STORE = 100;\n    cadesplugin.CAPICOM_MY_STORE = \"My\";\n    cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED = 2;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME = 1;\n    cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED = 0;\n    cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING = 1;\n    cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE = 2;\n    cadesplugin.CADESCOM_XADES_DEFAULT = 0x00000010;\n    cadesplugin.CADESCOM_XADES_BES = 0x00000020;\n    cadesplugin.CADESCOM_XADES_T = 0x00000050;\n    cadesplugin.CADESCOM_XADES_X_LONG_TYPE_1 = 0x000005d0;\n    cadesplugin.CADESCOM_XMLDSIG_TYPE = 0x00000000;\n    cadesplugin.XmlDsigGost3410UrlObsolete = \"http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411\";\n    cadesplugin.XmlDsigGost3411UrlObsolete = \"http://www.w3.org/2001/04/xmldsig-more#gostr3411\";\n    cadesplugin.XmlDsigGost3410Url = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411\";\n    cadesplugin.XmlDsigGost3411Url = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411\";\n    cadesplugin.XmlDsigGost3411Url2012256 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-256\";\n    cadesplugin.XmlDsigGost3410Url2012256 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-256\";\n    cadesplugin.XmlDsigGost3411Url2012512 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-512\";\n    cadesplugin.XmlDsigGost3410Url2012512 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-512\";\n    cadesplugin.CADESCOM_CADES_DEFAULT = 0;\n    cadesplugin.CADESCOM_CADES_BES = 1;\n    cadesplugin.CADESCOM_CADES_T = 0x5;\n    cadesplugin.CADESCOM_CADES_X_LONG_TYPE_1 = 0x5d;\n    cadesplugin.CADESCOM_PKCS7_TYPE = 0xffff;\n    cadesplugin.CADESCOM_ENCODE_BASE64 = 0;\n    cadesplugin.CADESCOM_ENCODE_BINARY = 1;\n    cadesplugin.CADESCOM_ENCODE_ANY = -1;\n    cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT = 0;\n    cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN = 1;\n    cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY = 2;\n    cadesplugin.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME = 0;\n    cadesplugin.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME = 1;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH = 0;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME = 1;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME = 2;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_ROOT_NAME = 3;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME = 4;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENSION = 5;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY = 6;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY = 7;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY = 8;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_VALID = 9;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID = 10;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED = 11;\n    cadesplugin.CAPICOM_CERTIFICATE_FIND_KEY_USAGE = 12;\n    cadesplugin.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE = 128;\n    cadesplugin.CAPICOM_PROPID_ENHKEY_USAGE = 9;\n    cadesplugin.CAPICOM_OID_OTHER = 0;\n    cadesplugin.CAPICOM_OID_KEY_USAGE_EXTENSION = 10;\n    cadesplugin.CAPICOM_EKU_CLIENT_AUTH = 2;\n    cadesplugin.CAPICOM_EKU_SMARTCARD_LOGON = 5;\n    cadesplugin.CAPICOM_EKU_OTHER = 0;\n    cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME = 0;\n    cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME = 1;\n    cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION = 2;\n    cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME = 0;\n    cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME = 1;\n    cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION = 2;\n    cadesplugin.CADESCOM_ATTRIBUTE_OTHER = -1;\n    cadesplugin.CADESCOM_STRING_TO_UCS2LE = 0;\n    cadesplugin.CADESCOM_BASE64_TO_BINARY = 1;\n    cadesplugin.CADESCOM_DISPLAY_DATA_NONE = 0;\n    cadesplugin.CADESCOM_DISPLAY_DATA_CONTENT = 1;\n    cadesplugin.CADESCOM_DISPLAY_DATA_ATTRIBUTE = 2;\n    cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC2 = 0;\n    cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC4 = 1;\n    cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_DES = 2;\n    cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_3DES = 3;\n    cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_AES = 4;\n    cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89 = 25;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_SHA1 = 0;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_MD2 = 1;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_MD4 = 2;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_MD5 = 3;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_256 = 4;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_384 = 5;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_512 = 6;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411 = 100;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256 = 101;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512 = 102;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_HMAC = 110;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256_HMAC = 111;\n    cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512_HMAC = 112;\n    cadesplugin.LOG_LEVEL_DEBUG = 4;\n    cadesplugin.LOG_LEVEL_INFO = 2;\n    cadesplugin.LOG_LEVEL_ERROR = 1;\n    cadesplugin.CADESCOM_AllowNone = 0;\n    cadesplugin.CADESCOM_AllowNoOutstandingRequest = 0x1;\n    cadesplugin.CADESCOM_AllowUntrustedCertificate = 0x2;\n    cadesplugin.CADESCOM_AllowUntrustedRoot = 0x4;\n    cadesplugin.CADESCOM_SkipInstallToStore = 0x10000000;\n    cadesplugin.ENABLE_CARRIER_TYPE_CSP = 0x01;\n    cadesplugin.ENABLE_CARRIER_TYPE_FKC_NO_SM = 0x02;\n    cadesplugin.ENABLE_CARRIER_TYPE_FKC_SM = 0x04;\n    cadesplugin.ENABLE_ANY_CARRIER_TYPE = 0x07;\n    cadesplugin.DISABLE_EVERY_CARRIER_OPERATION = 0x00;\n    cadesplugin.ENABLE_CARRIER_OPEN_ENUM = 0x01;\n    cadesplugin.ENABLE_CARRIER_CREATE = 0x02;\n    cadesplugin.ENABLE_ANY_OPERATION = 0x03;\n    cadesplugin.CADESCOM_PRODUCT_CSP = 0;\n    cadesplugin.CADESCOM_PRODUCT_OCSP = 1;\n    cadesplugin.CADESCOM_PRODUCT_TSP = 2;\n    cadesplugin.MEDIA_TYPE_REGISTRY = 0x00000001;\n    cadesplugin.MEDIA_TYPE_HDIMAGE = 0x00000002;\n    cadesplugin.MEDIA_TYPE_CLOUD = 0x00000004;\n    cadesplugin.MEDIA_TYPE_SCARD = 0x00000008;\n  }\n\n  function async_spawn(generatorFunc) {\n    function continuer(verb, arg) {\n      var result;\n\n      try {\n        result = generator[verb](arg);\n      } catch (err) {\n        return Promise.reject(err);\n      }\n\n      if (result.done) {\n        return result.value;\n      } else {\n        return Promise.resolve(result.value).then(onFulfilled, onRejected);\n      }\n    }\n\n    var generator = generatorFunc(Array.prototype.slice.call(arguments, 1));\n    var onFulfilled = continuer.bind(continuer, \"next\");\n    var onRejected = continuer.bind(continuer, \"throw\");\n    return onFulfilled();\n  }\n\n  function isIE() {\n    // var retVal = ((\"Microsoft Internet Explorer\" == navigator.appName) || // IE < 11\n    //     navigator.userAgent.match(/Trident\\/./i)); // IE 11\n    return browserSpecs.name === 'IE' || browserSpecs.name === 'MSIE';\n  }\n\n  function isIOS() {\n    return navigator.userAgent.match(/ipod/i) || navigator.userAgent.match(/ipad/i) || navigator.userAgent.match(/iphone/i);\n  }\n\n  function isNativeMessageSupported() {\n    // В IE работаем через NPAPI\n    if (isIE()) return false; // В Edge работаем через NativeMessage\n\n    if (browserSpecs.name === 'Edg') {\n      return true;\n    }\n\n    if (browserSpecs.name === 'YaBrowser') {\n      isYandex = true;\n      return true;\n    } // В Chrome, Firefox, Safari и Opera работаем через асинхронную версию в зависимости от версии\n\n\n    if (browserSpecs.name === 'Opera') {\n      isOpera = true;\n\n      if (browserSpecs.version >= 33) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    if (browserSpecs.name === 'Firefox') {\n      isFireFox = true;\n\n      if (browserSpecs.version >= 52) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    if (browserSpecs.name === 'Chrome') {\n      if (browserSpecs.version >= 42) {\n        return true;\n      } else {\n        return false;\n      }\n    } //В Сафари начиная с 12 версии нет NPAPI\n\n\n    if (browserSpecs.name === 'Safari') {\n      isSafari = true;\n\n      if (browserSpecs.version >= 12) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  } // Функция активации объектов КриптоПро ЭЦП Browser plug-in\n\n\n  function CreateObject(name) {\n    if (isIOS()) {\n      // На iOS для создания объектов используется функция\n      // call_ru_cryptopro_npcades_10_native_bridge, определенная в IOS_npcades_supp.js\n      return call_ru_cryptopro_npcades_10_native_bridge(\"CreateObject\", [name]);\n    }\n\n    if (isIE()) {\n      // В Internet Explorer создаются COM-объекты\n      if (name.match(/X509Enrollment/i)) {\n        try {\n          // Объекты CertEnroll пробуем создавать через нашу фабрику,\n          // если не получилось то через CX509EnrollmentWebClassFactory\n          var objCertEnrollClassFactory = document.getElementById(\"webClassFactory\");\n          return objCertEnrollClassFactory.CreateObject(name);\n        } catch (e) {\n          try {\n            var objWebClassFactory = document.getElementById(\"certEnrollClassFactory\");\n            return objWebClassFactory.CreateObject(name);\n          } catch (err) {\n            throw \"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS\";\n          }\n        }\n      } // Объекты CAPICOM и CAdESCOM создаются через CAdESCOM.WebClassFactory\n\n\n      try {\n        var objWebClassFactory = document.getElementById(\"webClassFactory\");\n        return objWebClassFactory.CreateObject(name);\n      } catch (e) {\n        // Для версий плагина ниже 2.0.12538\n        return new ActiveXObject(name);\n      }\n    } // создаются объекты NPAPI\n\n\n    return pluginObject.CreateObject(name);\n  }\n\n  function decimalToHexString(number) {\n    if (number < 0) {\n      number = 0xFFFFFFFF + number + 1;\n    }\n\n    return number.toString(16).toUpperCase();\n  }\n\n  function GetMessageFromException(e) {\n    var err = e.message;\n\n    if (!err) {\n      err = e;\n    } else if (e.number) {\n      err += \" (0x\" + decimalToHexString(e.number) + \")\";\n    }\n\n    return err;\n  }\n\n  function getLastError(exception) {\n    if (isNativeMessageSupported() || isIE() || isIOS()) {\n      return GetMessageFromException(exception);\n    }\n\n    try {\n      return pluginObject.getLastError();\n    } catch (e) {\n      return GetMessageFromException(exception);\n    }\n  } // Функция для удаления созданных объектов\n\n\n  function ReleasePluginObjects() {\n    return cpcsp_chrome_nmcades.ReleasePluginObjects();\n  } // Функция активации асинхронных объектов КриптоПро ЭЦП Browser plug-in\n\n\n  function CreateObjectAsync(name) {\n    return pluginObject.CreateObjectAsync(name);\n  } //Функции для IOS\n\n\n  var ru_cryptopro_npcades_10_native_bridge = {\n    callbacksCount: 1,\n    callbacks: {},\n    // Automatically called by native layer when a result is available\n    resultForCallback: function resultForCallback(callbackId, resultArray) {\n      var callback = ru_cryptopro_npcades_10_native_bridge.callbacks[callbackId];\n      if (!callback) return;\n      callback.apply(null, resultArray);\n    },\n    // Use this in javascript to request native objective-c code\n    // functionName : string (I think the name is explicit :p)\n    // args : array of arguments\n    // callback : function with n-arguments that is going to be called when the native code returned\n    call: function call(functionName, args, callback) {\n      var hasCallback = callback && typeof callback === \"function\";\n      var callbackId = hasCallback ? ru_cryptopro_npcades_10_native_bridge.callbacksCount++ : 0;\n      if (hasCallback) ru_cryptopro_npcades_10_native_bridge.callbacks[callbackId] = callback;\n      var iframe = document.createElement(\"IFRAME\");\n      var arrObjs = new Array(\"_CPNP_handle\");\n\n      try {\n        iframe.setAttribute(\"src\", \"cpnp-js-call:\" + functionName + \":\" + callbackId + \":\" + encodeURIComponent(JSON.stringify(args, arrObjs)));\n      } catch (e) {\n        alert(e);\n      }\n\n      document.documentElement.appendChild(iframe);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }\n  };\n\n  function call_ru_cryptopro_npcades_10_native_bridge(functionName, array) {\n    var tmpobj;\n    var ex;\n    ru_cryptopro_npcades_10_native_bridge.call(functionName, array, function (e, response) {\n      ex = e;\n      var str = 'tmpobj=' + response;\n      eval(str);\n\n      if (typeof tmpobj === \"string\") {\n        tmpobj = tmpobj.replace(/\\\\\\n/gm, \"\\n\");\n        tmpobj = tmpobj.replace(/\\\\\\r/gm, \"\\r\");\n      }\n    });\n    if (ex) throw ex;\n    return tmpobj;\n  }\n\n  function show_firefox_missing_extension_dialog() {\n    if (!window.cadesplugin_skip_extension_install) {\n      var ovr = document.createElement('div');\n      ovr.id = \"cadesplugin_ovr\";\n      ovr.style = \"visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)\";\n      ovr.innerHTML = \"<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'>\" + \"<button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button>\" + \"<p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо расширение для браузера. Убедитесь, что оно у Вас включено или установите его.\" + \"<p><a href='https://www.cryptopro.ru/sites/default/files/products/cades/extensions/firefox_cryptopro_extension_latest.xpi'>Скачать расширение</a></p>\" + \"</div>\";\n      document.getElementsByTagName(\"Body\")[0].appendChild(ovr);\n      document.getElementById(\"cadesplugin_close_install\").addEventListener('click', function () {\n        plugin_loaded_error(\"Плагин недоступен\");\n        document.getElementById(\"cadesplugin_ovr\").style.visibility = 'hidden';\n      });\n      ovr.addEventListener('click', function () {\n        plugin_loaded_error(\"Плагин недоступен\");\n        document.getElementById(\"cadesplugin_ovr\").style.visibility = 'hidden';\n      });\n      ovr.style.visibility = \"visible\";\n    }\n  }\n\n  function firefox_or_safari_nmcades_onload() {\n    cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded, plugin_loaded_error);\n  }\n\n  function nmcades_api_onload() {\n    window.postMessage(\"cadesplugin_echo_request\", \"*\");\n    window.addEventListener(\"message\", function (event) {\n      if (typeof event.data !== \"string\" || !event.data.match(\"cadesplugin_loaded\")) return;\n\n      if (isFireFox || isSafari) {\n        // Для Firefox, Сафари вместе с сообщением cadesplugin_loaded прилетает url для загрузки nmcades_plugin_api.js\n        var url = event.data.substring(event.data.indexOf(\"url:\") + 4);\n        var fileref = document.createElement('script');\n        fileref.setAttribute(\"type\", \"text/javascript\");\n        fileref.setAttribute(\"src\", url);\n        fileref.onerror = plugin_loaded_error;\n        fileref.onload = firefox_or_safari_nmcades_onload;\n        document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n      } else {\n        cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded, plugin_loaded_error);\n      }\n    }, false);\n  } //Загружаем расширения для Chrome, Opera, YaBrowser, FireFox, Edge, Safari\n\n\n  function load_extension() {\n    if (isFireFox || isSafari) {\n      // вызываем callback руками т.к. нам нужно узнать ID расширения. Он уникальный для браузера.\n      nmcades_api_onload();\n    } else {\n      // в асинхронном варианте для Yandex и Opera подключаем расширение из Opera store.\n      if (isOpera || isYandex) {\n        var fileref = document.createElement('script');\n        fileref.setAttribute(\"type\", \"text/javascript\");\n        fileref.setAttribute(\"src\", \"chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js\");\n        fileref.onerror = plugin_loaded_error;\n        fileref.onload = nmcades_api_onload;\n        document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n      } else {\n        // для Chrome, Chromium, Chromium Edge расширение из Chrome store\n        var fileref = document.createElement('script');\n        fileref.setAttribute(\"type\", \"text/javascript\");\n        fileref.setAttribute(\"src\", \"chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js\");\n        fileref.onerror = plugin_loaded_error;\n        fileref.onload = nmcades_api_onload;\n        document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n      }\n    }\n  } //Загружаем плагин для NPAPI\n\n\n  function load_npapi_plugin() {\n    var elem = document.createElement('object');\n    elem.setAttribute(\"id\", \"cadesplugin_object\");\n    elem.setAttribute(\"type\", \"application/x-cades\");\n    elem.setAttribute(\"style\", \"visibility: hidden\");\n    document.getElementsByTagName(\"body\")[0].appendChild(elem);\n    pluginObject = document.getElementById(\"cadesplugin_object\");\n\n    if (isIE()) {\n      var elem1 = document.createElement('object');\n      elem1.setAttribute(\"id\", \"certEnrollClassFactory\");\n      elem1.setAttribute(\"classid\", \"clsid:884e2049-217d-11da-b2a4-000e7bbb2b09\");\n      elem1.setAttribute(\"style\", \"visibility: hidden\");\n      document.getElementsByTagName(\"body\")[0].appendChild(elem1);\n      var elem2 = document.createElement('object');\n      elem2.setAttribute(\"id\", \"webClassFactory\");\n      elem2.setAttribute(\"classid\", \"clsid:B04C8637-10BD-484E-B0DA-B8A039F60024\");\n      elem2.setAttribute(\"style\", \"visibility: hidden\");\n      document.getElementsByTagName(\"body\")[0].appendChild(elem2);\n    }\n  } //Отправляем событие что все ок.\n\n\n  function plugin_loaded() {\n    plugin_resolved = 1;\n\n    if (canPromise) {\n      plugin_resolve();\n    } else {\n      window.postMessage(\"cadesplugin_loaded\", \"*\");\n    }\n  } //Отправляем событие что сломались.\n\n\n  function plugin_loaded_error(msg) {\n    if (typeof msg === 'undefined' || typeof msg === 'object') msg = \"Плагин недоступен\";\n    plugin_resolved = 1;\n\n    if (canPromise) {\n      plugin_reject(msg);\n    } else {\n      window.postMessage(\"cadesplugin_load_error\", \"*\");\n    }\n  } //проверяем что у нас хоть какое то событие ушло, и если не уходило кидаем еще раз ошибку\n\n\n  function check_load_timeout() {\n    if (plugin_resolved === 1) return;\n\n    if (isFireFox) {\n      show_firefox_missing_extension_dialog();\n    }\n\n    plugin_resolved = 1;\n\n    if (canPromise) {\n      plugin_reject(\"Истекло время ожидания загрузки плагина\");\n    } else {\n      window.postMessage(\"cadesplugin_load_error\", \"*\");\n    }\n  } //Вспомогательная функция для NPAPI\n\n\n  function createPromise(arg) {\n    return new Promise(arg);\n  }\n\n  function check_npapi_plugin() {\n    try {\n      var oAbout = CreateObject(\"CAdESCOM.About\");\n      plugin_loaded();\n    } catch (err) {\n      document.getElementById(\"cadesplugin_object\").style.display = 'none'; // Объект создать не удалось, проверим, установлен ли\n      // вообще плагин. Такая возможность есть не во всех браузерах\n\n      var mimetype = navigator.mimeTypes[\"application/x-cades\"];\n\n      if (mimetype) {\n        var plugin = mimetype.enabledPlugin;\n\n        if (plugin) {\n          plugin_loaded_error(\"Плагин загружен, но не создаются обьекты\");\n        } else {\n          plugin_loaded_error(\"Ошибка при загрузке плагина\");\n        }\n      } else {\n        plugin_loaded_error(\"Плагин недоступен\");\n      }\n    }\n  } //Проверяем работает ли плагин\n\n\n  function check_plugin_working() {\n    var div = document.createElement(\"div\");\n    div.innerHTML = \"<!--[if lt IE 9]><i></i><![endif]-->\";\n    var isIeLessThan9 = div.getElementsByTagName(\"i\").length === 1;\n\n    if (isIeLessThan9) {\n      plugin_loaded_error(\"Internet Explorer версии 8 и ниже не поддерживается\");\n      return;\n    }\n\n    if (isNativeMessageSupported()) {\n      load_extension();\n    } else if (!canPromise) {\n      window.addEventListener(\"message\", function (event) {\n        if (event.data !== \"cadesplugin_echo_request\") return;\n        load_npapi_plugin();\n        check_npapi_plugin();\n      }, false);\n    } else {\n      if (document.readyState === \"complete\") {\n        load_npapi_plugin();\n        check_npapi_plugin();\n      } else {\n        window.addEventListener(\"load\", function (event) {\n          load_npapi_plugin();\n          check_npapi_plugin();\n        }, false);\n      }\n    }\n  }\n\n  function set_pluginObject(obj) {\n    pluginObject = obj;\n  }\n\n  function is_capilite_enabled() {\n    if (typeof cadesplugin.EnableInternalCSP !== 'undefined' && cadesplugin.EnableInternalCSP) return true;\n    return false;\n  }\n\n  ; //Export\n\n  cadesplugin.JSModuleVersion = \"2.3.0\";\n  cadesplugin.async_spawn = async_spawn;\n  cadesplugin.set = set_pluginObject;\n  cadesplugin.set_log_level = set_log_level;\n  cadesplugin.getLastError = getLastError;\n  cadesplugin.is_capilite_enabled = is_capilite_enabled;\n\n  if (isNativeMessageSupported()) {\n    cadesplugin.CreateObjectAsync = CreateObjectAsync;\n    cadesplugin.ReleasePluginObjects = ReleasePluginObjects;\n  }\n\n  if (!isNativeMessageSupported()) {\n    cadesplugin.CreateObject = CreateObject;\n  }\n\n  if (window.cadesplugin_load_timeout) {\n    setTimeout(check_load_timeout, window.cadesplugin_load_timeout);\n  } else {\n    setTimeout(check_load_timeout, 20000);\n  }\n\n  set_constantValues();\n  cadesplugin.current_log_level = cadesplugin.LOG_LEVEL_ERROR;\n  window.cadesplugin = cadesplugin;\n  check_plugin_working();\n})();","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/node_modules/ruscryptojs/src/CryptoPro/cadesplugin_api.js"],"names":["window","cadesplugin","pluginObject","plugin_resolved","plugin_reject","plugin_resolve","isOpera","isFireFox","isSafari","isYandex","canPromise","Promise","resolve","reject","check_browser","ua","navigator","userAgent","tem","M","match","test","exec","name","version","replace","appName","appVersion","splice","browserSpecs","cpcsp_console_log","level","msg","console","current_log_level","LOG_LEVEL_DEBUG","log","LOG_LEVEL_INFO","info","LOG_LEVEL_ERROR","error","set_log_level","isNativeMessageSupported","postMessage","set_constantValues","CAPICOM_MEMORY_STORE","CAPICOM_LOCAL_MACHINE_STORE","CAPICOM_CURRENT_USER_STORE","CADESCOM_MEMORY_STORE","CADESCOM_LOCAL_MACHINE_STORE","CADESCOM_CURRENT_USER_STORE","CADESCOM_CONTAINER_STORE","CAPICOM_MY_STORE","CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED","CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME","CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED","CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING","CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE","CADESCOM_XADES_DEFAULT","CADESCOM_XADES_BES","CADESCOM_XADES_T","CADESCOM_XADES_X_LONG_TYPE_1","CADESCOM_XMLDSIG_TYPE","XmlDsigGost3410UrlObsolete","XmlDsigGost3411UrlObsolete","XmlDsigGost3410Url","XmlDsigGost3411Url","XmlDsigGost3411Url2012256","XmlDsigGost3410Url2012256","XmlDsigGost3411Url2012512","XmlDsigGost3410Url2012512","CADESCOM_CADES_DEFAULT","CADESCOM_CADES_BES","CADESCOM_CADES_T","CADESCOM_CADES_X_LONG_TYPE_1","CADESCOM_PKCS7_TYPE","CADESCOM_ENCODE_BASE64","CADESCOM_ENCODE_BINARY","CADESCOM_ENCODE_ANY","CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT","CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN","CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY","CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME","CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME","CAPICOM_CERTIFICATE_FIND_SHA1_HASH","CAPICOM_CERTIFICATE_FIND_ISSUER_NAME","CAPICOM_CERTIFICATE_FIND_ROOT_NAME","CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME","CAPICOM_CERTIFICATE_FIND_EXTENSION","CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY","CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY","CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY","CAPICOM_CERTIFICATE_FIND_TIME_VALID","CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID","CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED","CAPICOM_CERTIFICATE_FIND_KEY_USAGE","CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE","CAPICOM_PROPID_ENHKEY_USAGE","CAPICOM_OID_OTHER","CAPICOM_OID_KEY_USAGE_EXTENSION","CAPICOM_EKU_CLIENT_AUTH","CAPICOM_EKU_SMARTCARD_LOGON","CAPICOM_EKU_OTHER","CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME","CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME","CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION","CADESCOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME","CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME","CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION","CADESCOM_ATTRIBUTE_OTHER","CADESCOM_STRING_TO_UCS2LE","CADESCOM_BASE64_TO_BINARY","CADESCOM_DISPLAY_DATA_NONE","CADESCOM_DISPLAY_DATA_CONTENT","CADESCOM_DISPLAY_DATA_ATTRIBUTE","CADESCOM_ENCRYPTION_ALGORITHM_RC2","CADESCOM_ENCRYPTION_ALGORITHM_RC4","CADESCOM_ENCRYPTION_ALGORITHM_DES","CADESCOM_ENCRYPTION_ALGORITHM_3DES","CADESCOM_ENCRYPTION_ALGORITHM_AES","CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89","CADESCOM_HASH_ALGORITHM_SHA1","CADESCOM_HASH_ALGORITHM_MD2","CADESCOM_HASH_ALGORITHM_MD4","CADESCOM_HASH_ALGORITHM_MD5","CADESCOM_HASH_ALGORITHM_SHA_256","CADESCOM_HASH_ALGORITHM_SHA_384","CADESCOM_HASH_ALGORITHM_SHA_512","CADESCOM_HASH_ALGORITHM_CP_GOST_3411","CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256","CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512","CADESCOM_HASH_ALGORITHM_CP_GOST_3411_HMAC","CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256_HMAC","CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512_HMAC","CADESCOM_AllowNone","CADESCOM_AllowNoOutstandingRequest","CADESCOM_AllowUntrustedCertificate","CADESCOM_AllowUntrustedRoot","CADESCOM_SkipInstallToStore","ENABLE_CARRIER_TYPE_CSP","ENABLE_CARRIER_TYPE_FKC_NO_SM","ENABLE_CARRIER_TYPE_FKC_SM","ENABLE_ANY_CARRIER_TYPE","DISABLE_EVERY_CARRIER_OPERATION","ENABLE_CARRIER_OPEN_ENUM","ENABLE_CARRIER_CREATE","ENABLE_ANY_OPERATION","CADESCOM_PRODUCT_CSP","CADESCOM_PRODUCT_OCSP","CADESCOM_PRODUCT_TSP","MEDIA_TYPE_REGISTRY","MEDIA_TYPE_HDIMAGE","MEDIA_TYPE_CLOUD","MEDIA_TYPE_SCARD","async_spawn","generatorFunc","continuer","verb","arg","result","generator","err","done","value","then","onFulfilled","onRejected","Array","prototype","slice","call","arguments","bind","isIE","isIOS","CreateObject","call_ru_cryptopro_npcades_10_native_bridge","objCertEnrollClassFactory","document","getElementById","e","objWebClassFactory","ActiveXObject","decimalToHexString","number","toString","toUpperCase","GetMessageFromException","message","getLastError","exception","ReleasePluginObjects","cpcsp_chrome_nmcades","CreateObjectAsync","ru_cryptopro_npcades_10_native_bridge","callbacksCount","callbacks","resultForCallback","callbackId","resultArray","callback","apply","functionName","args","hasCallback","iframe","createElement","arrObjs","setAttribute","encodeURIComponent","JSON","stringify","alert","documentElement","appendChild","parentNode","removeChild","array","tmpobj","ex","response","str","eval","show_firefox_missing_extension_dialog","cadesplugin_skip_extension_install","ovr","id","style","innerHTML","getElementsByTagName","addEventListener","plugin_loaded_error","visibility","firefox_or_safari_nmcades_onload","check_chrome_plugin","plugin_loaded","nmcades_api_onload","event","data","url","substring","indexOf","fileref","onerror","onload","load_extension","load_npapi_plugin","elem","elem1","elem2","check_load_timeout","createPromise","check_npapi_plugin","oAbout","display","mimetype","mimeTypes","plugin","enabledPlugin","check_plugin_working","div","isIeLessThan9","length","readyState","set_pluginObject","obj","is_capilite_enabled","EnableInternalCSP","JSModuleVersion","set","cadesplugin_load_timeout","setTimeout"],"mappings":"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","sourcesContent":[";(function () {\n    //already loaded\n    if(window.cadesplugin)\n        return;\n\n    var pluginObject;\n    var plugin_resolved = 0;\n    var plugin_reject;\n    var plugin_resolve;\n    var isOpera = 0;\n    var isFireFox = 0;\n    var isSafari = 0;\n    var isYandex = 0;\n    var canPromise = !!window.Promise;\n    var cadesplugin;\n\n    if(canPromise)\n    {\n        cadesplugin = new Promise(function(resolve, reject)\n        {\n            plugin_resolve = resolve;\n            plugin_reject = reject;\n        });\n    } else\n    {\n        cadesplugin = {};\n    }\n\n    function check_browser() {\n        var ua= navigator.userAgent, tem, M= ua.match(/(opera|yabrowser|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n        if(/trident/i.test(M[1])){\n            tem =  /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n            return { name:'IE', version:(tem[1] || '')};\n        }\n        if(M[1] === 'Chrome'){\n            tem = ua.match(/\\b(OPR|Edg|YaBrowser)\\/(\\d+)/);\n            if (tem != null)\n                return { name: tem[1].replace('OPR', 'Opera'), version: tem[2] };\n        }\n        M= M[2]? [M[1], M[2]]: [navigator.appName, navigator.appVersion, '-?'];\n        if ((tem = ua.match(/version\\/(\\d+)/i)) != null)\n            M.splice(1, 1, tem[1]);\n        return {name:M[0],version:M[1]};\n    }\n    var browserSpecs = check_browser();\n\n    function cpcsp_console_log(level, msg){\n        //IE9 не может писать в консоль если не открыта вкладка developer tools\n        if(typeof(console) === 'undefined')\n            return;\n        if (level <= cadesplugin.current_log_level ){\n            if (level === cadesplugin.LOG_LEVEL_DEBUG)\n                console.log(\"DEBUG: %s\", msg);\n            if (level === cadesplugin.LOG_LEVEL_INFO)\n                console.info(\"INFO: %s\", msg);\n            if (level === cadesplugin.LOG_LEVEL_ERROR)\n                console.error(\"ERROR: %s\", msg);\n            return;\n        }\n    }\n\n    function set_log_level(level){\n        if (!((level === cadesplugin.LOG_LEVEL_DEBUG) ||\n            (level === cadesplugin.LOG_LEVEL_INFO) ||\n            (level === cadesplugin.LOG_LEVEL_ERROR))){\n            cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR, \"cadesplugin_api.js: Incorrect log_level: \" + level);\n            return;\n        }\n        cadesplugin.current_log_level = level;\n        if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_DEBUG)\n            cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO, \"cadesplugin_api.js: log_level = DEBUG\");\n        if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_INFO)\n            cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO, \"cadesplugin_api.js: log_level = INFO\");\n        if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_ERROR)\n            cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO, \"cadesplugin_api.js: log_level = ERROR\");\n        if(isNativeMessageSupported())\n        {\n            if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_DEBUG)\n                window.postMessage(\"set_log_level=debug\", \"*\");\n            if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_INFO)\n                window.postMessage(\"set_log_level=info\", \"*\");\n            if (cadesplugin.current_log_level === cadesplugin.LOG_LEVEL_ERROR)\n                window.postMessage(\"set_log_level=error\", \"*\");\n        }\n    }\n\n    function set_constantValues()\n    {\n        cadesplugin.CAPICOM_MEMORY_STORE = 0;\n        cadesplugin.CAPICOM_LOCAL_MACHINE_STORE = 1;\n        cadesplugin.CAPICOM_CURRENT_USER_STORE = 2;\n        cadesplugin.CADESCOM_MEMORY_STORE = 0;\n        cadesplugin.CADESCOM_LOCAL_MACHINE_STORE = 1;\n        cadesplugin.CADESCOM_CURRENT_USER_STORE = 2;\n        cadesplugin.CADESCOM_CONTAINER_STORE = 100;\n\n        cadesplugin.CAPICOM_MY_STORE = \"My\";\n\n        cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED = 2;\n\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME = 1;\n\n        cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED = 0;\n        cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING = 1;\n        cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE = 2;\n        \n        cadesplugin.CADESCOM_XADES_DEFAULT = 0x00000010;\n        cadesplugin.CADESCOM_XADES_BES = 0x00000020;\n        cadesplugin.CADESCOM_XADES_T = 0x00000050;\n        cadesplugin.CADESCOM_XADES_X_LONG_TYPE_1 = 0x000005d0;\n        cadesplugin.CADESCOM_XMLDSIG_TYPE = 0x00000000;\n\n        cadesplugin.XmlDsigGost3410UrlObsolete = \"http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411\";\n        cadesplugin.XmlDsigGost3411UrlObsolete = \"http://www.w3.org/2001/04/xmldsig-more#gostr3411\";\n        cadesplugin.XmlDsigGost3410Url = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411\";\n        cadesplugin.XmlDsigGost3411Url = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411\";\n        \n        cadesplugin.XmlDsigGost3411Url2012256 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-256\";\n        cadesplugin.XmlDsigGost3410Url2012256 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-256\";\n        cadesplugin.XmlDsigGost3411Url2012512 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-512\";\n        cadesplugin.XmlDsigGost3410Url2012512 = \"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-512\";\n\n        cadesplugin.CADESCOM_CADES_DEFAULT = 0;\n        cadesplugin.CADESCOM_CADES_BES = 1;\n        cadesplugin.CADESCOM_CADES_T = 0x5;\n        cadesplugin.CADESCOM_CADES_X_LONG_TYPE_1 = 0x5d;\n        cadesplugin.CADESCOM_PKCS7_TYPE = 0xffff;\n\n        cadesplugin.CADESCOM_ENCODE_BASE64 = 0;\n        cadesplugin.CADESCOM_ENCODE_BINARY = 1;\n        cadesplugin.CADESCOM_ENCODE_ANY = -1;\n\n        cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT = 0;\n        cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN = 1;\n        cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY = 2;\n\n        cadesplugin.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME = 0;\n        cadesplugin.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME = 1;\n\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH = 0;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME = 1;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME = 2;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_ROOT_NAME = 3;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME = 4;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENSION = 5;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY = 6;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY = 7;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY = 8;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_VALID = 9;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID = 10;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED = 11;\n        cadesplugin.CAPICOM_CERTIFICATE_FIND_KEY_USAGE = 12;\n\n        cadesplugin.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE = 128;\n\n        cadesplugin.CAPICOM_PROPID_ENHKEY_USAGE = 9;\n\n        cadesplugin.CAPICOM_OID_OTHER = 0;\n        cadesplugin.CAPICOM_OID_KEY_USAGE_EXTENSION = 10;\n\n        cadesplugin.CAPICOM_EKU_CLIENT_AUTH = 2;\n        cadesplugin.CAPICOM_EKU_SMARTCARD_LOGON = 5;\n        cadesplugin.CAPICOM_EKU_OTHER = 0;\n\n        cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME = 0;\n        cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME = 1;\n        cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION = 2;\n        cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME = 0;\n        cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME = 1;\n        cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION = 2;\n        cadesplugin.CADESCOM_ATTRIBUTE_OTHER = -1;\n\n        cadesplugin.CADESCOM_STRING_TO_UCS2LE = 0;\n        cadesplugin.CADESCOM_BASE64_TO_BINARY = 1;\n\n        cadesplugin.CADESCOM_DISPLAY_DATA_NONE = 0;\n        cadesplugin.CADESCOM_DISPLAY_DATA_CONTENT = 1;\n        cadesplugin.CADESCOM_DISPLAY_DATA_ATTRIBUTE = 2;\n\n        cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC2 = 0;\n        cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC4 = 1;\n        cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_DES = 2;\n        cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_3DES = 3;\n        cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_AES = 4;\n        cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89 = 25;\n\n        cadesplugin.CADESCOM_HASH_ALGORITHM_SHA1 = 0;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_MD2 = 1;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_MD4 = 2;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_MD5 = 3;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_256 = 4;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_384 = 5;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_512 = 6;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411 = 100;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256 = 101;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512 = 102;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_HMAC = 110;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256_HMAC = 111;\n        cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512_HMAC = 112;\n\n        cadesplugin.LOG_LEVEL_DEBUG = 4;\n        cadesplugin.LOG_LEVEL_INFO = 2;\n        cadesplugin.LOG_LEVEL_ERROR = 1;\n\n        cadesplugin.CADESCOM_AllowNone = 0;\n        cadesplugin.CADESCOM_AllowNoOutstandingRequest = 0x1;\n        cadesplugin.CADESCOM_AllowUntrustedCertificate = 0x2;\n        cadesplugin.CADESCOM_AllowUntrustedRoot = 0x4;\n        cadesplugin.CADESCOM_SkipInstallToStore = 0x10000000;\n\n        cadesplugin.ENABLE_CARRIER_TYPE_CSP = 0x01;\n        cadesplugin.ENABLE_CARRIER_TYPE_FKC_NO_SM = 0x02;\n        cadesplugin.ENABLE_CARRIER_TYPE_FKC_SM = 0x04;\n        cadesplugin.ENABLE_ANY_CARRIER_TYPE = 0x07;\n\n        cadesplugin.DISABLE_EVERY_CARRIER_OPERATION = 0x00;\n        cadesplugin.ENABLE_CARRIER_OPEN_ENUM = 0x01;\n        cadesplugin.ENABLE_CARRIER_CREATE = 0x02;\n        cadesplugin.ENABLE_ANY_OPERATION = 0x03;\n\n        cadesplugin.CADESCOM_PRODUCT_CSP = 0;\n        cadesplugin.CADESCOM_PRODUCT_OCSP = 1;\n        cadesplugin.CADESCOM_PRODUCT_TSP = 2;\n\n        cadesplugin.MEDIA_TYPE_REGISTRY = 0x00000001;\n        cadesplugin.MEDIA_TYPE_HDIMAGE = 0x00000002;\n        cadesplugin.MEDIA_TYPE_CLOUD = 0x00000004;\n        cadesplugin.MEDIA_TYPE_SCARD = 0x00000008;\n    }\n\n    function async_spawn(generatorFunc) {\n        function continuer(verb, arg) {\n            var result;\n            try {\n                result = generator[verb](arg);\n            } catch (err) {\n                return Promise.reject(err);\n            }\n            if (result.done) {\n                return result.value;\n            } else {\n                return Promise.resolve(result.value).then(onFulfilled, onRejected);\n            }\n        }\n        var generator = generatorFunc(Array.prototype.slice.call(arguments, 1));\n        var onFulfilled = continuer.bind(continuer, \"next\");\n        var onRejected = continuer.bind(continuer, \"throw\");\n        return onFulfilled();\n    }\n\n    function isIE() {\n        // var retVal = ((\"Microsoft Internet Explorer\" == navigator.appName) || // IE < 11\n        //     navigator.userAgent.match(/Trident\\/./i)); // IE 11\n        return (browserSpecs.name === 'IE' || browserSpecs.name === 'MSIE');\n    }\n\n    function isIOS() {\n        return (navigator.userAgent.match(/ipod/i) ||\n            navigator.userAgent.match(/ipad/i) ||\n            navigator.userAgent.match(/iphone/i));\n    }\n\n    function isNativeMessageSupported()\n    {\n        // В IE работаем через NPAPI\n        if(isIE())\n            return false;\n        // В Edge работаем через NativeMessage\n        if (browserSpecs.name === 'Edg') {\n            return true;\n        }\n        if (browserSpecs.name === 'YaBrowser') {\n            isYandex = true;\n            return true;\n        }\n        // В Chrome, Firefox, Safari и Opera работаем через асинхронную версию в зависимости от версии\n        if(browserSpecs.name === 'Opera') {\n            isOpera = true;\n            if(browserSpecs.version >= 33){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n        if(browserSpecs.name === 'Firefox') {\n            isFireFox = true;\n            if(browserSpecs.version >= 52){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n        if(browserSpecs.name === 'Chrome') {\n            if(browserSpecs.version >= 42){\n                return true;\n            }\n            else{\n                return false;\n            }\n        }\n        //В Сафари начиная с 12 версии нет NPAPI\n        if(browserSpecs.name === 'Safari') {\n            isSafari = true;\n            if(browserSpecs.version >= 12) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n\n    // Функция активации объектов КриптоПро ЭЦП Browser plug-in\n    function CreateObject(name) {\n        if (isIOS()) {\n            // На iOS для создания объектов используется функция\n            // call_ru_cryptopro_npcades_10_native_bridge, определенная в IOS_npcades_supp.js\n            return call_ru_cryptopro_npcades_10_native_bridge(\"CreateObject\", [name]);\n        }\n        if (isIE()) {\n            // В Internet Explorer создаются COM-объекты\n            if (name.match(/X509Enrollment/i)) {\n                try {\n                    // Объекты CertEnroll пробуем создавать через нашу фабрику,\n                    // если не получилось то через CX509EnrollmentWebClassFactory\n                    var objCertEnrollClassFactory = document.getElementById(\"webClassFactory\");\n                    return objCertEnrollClassFactory.CreateObject(name);\n                }\n                catch (e) {\n                    try {\n                        var objWebClassFactory = document.getElementById(\"certEnrollClassFactory\");\n                        return objWebClassFactory.CreateObject(name);\n                    }\n                    catch (err) {\n                        throw (\"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS\");\n                    }\n                }\n            }\n            // Объекты CAPICOM и CAdESCOM создаются через CAdESCOM.WebClassFactory\n            try {\n                var objWebClassFactory = document.getElementById(\"webClassFactory\");\n                return objWebClassFactory.CreateObject(name);\n            }\n            catch (e) {\n                // Для версий плагина ниже 2.0.12538\n                return new ActiveXObject(name);\n            }\n        }\n        // создаются объекты NPAPI\n        return pluginObject.CreateObject(name);\n    }\n\n    function decimalToHexString(number) {\n        if (number < 0) {\n            number = 0xFFFFFFFF + number + 1;\n        }\n\n        return number.toString(16).toUpperCase();\n    }\n\n    function GetMessageFromException(e) {\n        var err = e.message;\n        if (!err) {\n            err = e;\n        } else if (e.number) {\n            err += \" (0x\" + decimalToHexString(e.number) + \")\";\n        }\n        return err;\n    }\n\n    function getLastError(exception) {\n        if(isNativeMessageSupported() || isIE() || isIOS() ) {\n            return GetMessageFromException(exception);\n        }\n\n        try {\n            return pluginObject.getLastError();\n        } catch(e) {\n            return GetMessageFromException(exception);\n        }\n    }\n\n    // Функция для удаления созданных объектов\n    function ReleasePluginObjects() {\n        return cpcsp_chrome_nmcades.ReleasePluginObjects();\n    }\n\n    // Функция активации асинхронных объектов КриптоПро ЭЦП Browser plug-in\n    function CreateObjectAsync(name) {\n        return pluginObject.CreateObjectAsync(name);\n    }\n\n    //Функции для IOS\n    var ru_cryptopro_npcades_10_native_bridge = {\n        callbacksCount : 1,\n        callbacks : {},\n\n        // Automatically called by native layer when a result is available\n        resultForCallback : function resultForCallback(callbackId, resultArray) {\n            var callback = ru_cryptopro_npcades_10_native_bridge.callbacks[callbackId];\n            if (!callback) return;\n            callback.apply(null,resultArray);\n        },\n\n        // Use this in javascript to request native objective-c code\n        // functionName : string (I think the name is explicit :p)\n        // args : array of arguments\n        // callback : function with n-arguments that is going to be called when the native code returned\n        call : function call(functionName, args, callback) {\n            var hasCallback = callback && typeof callback === \"function\";\n            var callbackId = hasCallback ? ru_cryptopro_npcades_10_native_bridge.callbacksCount++ : 0;\n\n            if (hasCallback)\n                ru_cryptopro_npcades_10_native_bridge.callbacks[callbackId] = callback;\n\n            var iframe = document.createElement(\"IFRAME\");\n            var arrObjs = new Array(\"_CPNP_handle\");\n            try{\n                iframe.setAttribute(\"src\", \"cpnp-js-call:\" + functionName + \":\" + callbackId+ \":\" + encodeURIComponent(JSON.stringify(args, arrObjs)));\n            } catch(e){\n                alert(e);\n            }\n            document.documentElement.appendChild(iframe);\n            iframe.parentNode.removeChild(iframe);\n            iframe = null;\n        }\n    };\n\n    function call_ru_cryptopro_npcades_10_native_bridge(functionName, array){\n        var tmpobj;\n        var ex;\n        ru_cryptopro_npcades_10_native_bridge.call(functionName, array, function(e, response){\n            ex = e;\n            var str='tmpobj='+response;\n            eval(str);\n            if (typeof (tmpobj) === \"string\"){\n                tmpobj = tmpobj.replace(/\\\\\\n/gm, \"\\n\");\n                tmpobj = tmpobj.replace(/\\\\\\r/gm, \"\\r\");\n            }\n        });\n        if(ex)\n            throw ex;\n        return tmpobj;\n    }\n\n    function show_firefox_missing_extension_dialog()\n    {\n        if (!window.cadesplugin_skip_extension_install)\n        {\n            var ovr = document.createElement('div');\n            ovr.id = \"cadesplugin_ovr\";\n            ovr.style = \"visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)\";\n            ovr.innerHTML = \"<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'>\" +\n                \"<button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button>\" +\n                \"<p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо расширение для браузера. Убедитесь, что оно у Вас включено или установите его.\" +\n                \"<p><a href='https://www.cryptopro.ru/sites/default/files/products/cades/extensions/firefox_cryptopro_extension_latest.xpi'>Скачать расширение</a></p>\" +\n                \"</div>\";\n            document.getElementsByTagName(\"Body\")[0].appendChild(ovr);\n            document.getElementById(\"cadesplugin_close_install\").addEventListener('click',function()\n            {\n                plugin_loaded_error(\"Плагин недоступен\");\n                document.getElementById(\"cadesplugin_ovr\").style.visibility = 'hidden';\n            });\n\n            ovr.addEventListener('click',function()\n            {\n                plugin_loaded_error(\"Плагин недоступен\");\n                document.getElementById(\"cadesplugin_ovr\").style.visibility = 'hidden';\n            });\n            ovr.style.visibility=\"visible\";\n        }\n    }\n    function firefox_or_safari_nmcades_onload() {\n        cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded, plugin_loaded_error);\n    }\n\n    function nmcades_api_onload () {\n        window.postMessage(\"cadesplugin_echo_request\", \"*\");\n        window.addEventListener(\"message\", function (event){\n            if (typeof(event.data) !== \"string\" || !event.data.match(\"cadesplugin_loaded\"))\n                return;\n            if(isFireFox || isSafari)\n            {\n                // Для Firefox, Сафари вместе с сообщением cadesplugin_loaded прилетает url для загрузки nmcades_plugin_api.js\n                var url = event.data.substring(event.data.indexOf(\"url:\") + 4);\n                var fileref = document.createElement('script');\n                fileref.setAttribute(\"type\", \"text/javascript\");\n                fileref.setAttribute(\"src\", url);\n                fileref.onerror = plugin_loaded_error;\n                fileref.onload = firefox_or_safari_nmcades_onload;\n                document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n            }else {\n                cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded, plugin_loaded_error);\n            }\n        }, false);\n    }\n\n    //Загружаем расширения для Chrome, Opera, YaBrowser, FireFox, Edge, Safari\n    function load_extension()\n    {\n        if(isFireFox || isSafari){\n            // вызываем callback руками т.к. нам нужно узнать ID расширения. Он уникальный для браузера.\n            nmcades_api_onload();\n        } else {\n            // в асинхронном варианте для Yandex и Opera подключаем расширение из Opera store.\n            if (isOpera || isYandex) {\n                var fileref = document.createElement('script');\n                fileref.setAttribute(\"type\", \"text/javascript\");\n                fileref.setAttribute(\"src\", \"chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js\");\n                fileref.onerror = plugin_loaded_error;\n                fileref.onload = nmcades_api_onload;\n                document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n            } else {\n                // для Chrome, Chromium, Chromium Edge расширение из Chrome store\n                var fileref = document.createElement('script');\n                fileref.setAttribute(\"type\", \"text/javascript\");\n                fileref.setAttribute(\"src\", \"chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js\");\n                fileref.onerror = plugin_loaded_error;\n                fileref.onload = nmcades_api_onload;\n                document.getElementsByTagName(\"head\")[0].appendChild(fileref);\n            }\n        }\n    }\n\n    //Загружаем плагин для NPAPI\n    function load_npapi_plugin()\n    {\n        var elem = document.createElement('object');\n        elem.setAttribute(\"id\", \"cadesplugin_object\");\n        elem.setAttribute(\"type\", \"application/x-cades\");\n        elem.setAttribute(\"style\", \"visibility: hidden\");\n        document.getElementsByTagName(\"body\")[0].appendChild(elem);\n        pluginObject = document.getElementById(\"cadesplugin_object\");\n        if(isIE())\n        {\n            var elem1 = document.createElement('object');\n            elem1.setAttribute(\"id\", \"certEnrollClassFactory\");\n            elem1.setAttribute(\"classid\", \"clsid:884e2049-217d-11da-b2a4-000e7bbb2b09\");\n            elem1.setAttribute(\"style\", \"visibility: hidden\");\n            document.getElementsByTagName(\"body\")[0].appendChild(elem1);\n            var elem2 = document.createElement('object');\n            elem2.setAttribute(\"id\", \"webClassFactory\");\n            elem2.setAttribute(\"classid\", \"clsid:B04C8637-10BD-484E-B0DA-B8A039F60024\");\n            elem2.setAttribute(\"style\", \"visibility: hidden\");\n            document.getElementsByTagName(\"body\")[0].appendChild(elem2);\n        }\n    }\n\n    //Отправляем событие что все ок.\n    function plugin_loaded()\n    {\n        plugin_resolved = 1;\n        if(canPromise)\n        {\n            plugin_resolve();\n        }else {\n            window.postMessage(\"cadesplugin_loaded\", \"*\");\n        }\n    }\n\n    //Отправляем событие что сломались.\n    function plugin_loaded_error(msg)\n    {\n        if(typeof(msg) === 'undefined' || typeof(msg) === 'object')\n            msg = \"Плагин недоступен\";\n        plugin_resolved = 1;\n        if(canPromise)\n        {\n            plugin_reject(msg);\n        } else {\n            window.postMessage(\"cadesplugin_load_error\", \"*\");\n        }\n    }\n\n    //проверяем что у нас хоть какое то событие ушло, и если не уходило кидаем еще раз ошибку\n    function check_load_timeout()\n    {\n        if(plugin_resolved === 1)\n            return;\n        if(isFireFox)\n        {\n            show_firefox_missing_extension_dialog();\n        }\n        plugin_resolved = 1;\n        if(canPromise)\n        {\n            plugin_reject(\"Истекло время ожидания загрузки плагина\");\n        } else {\n            window.postMessage(\"cadesplugin_load_error\", \"*\");\n        }\n\n    }\n\n    //Вспомогательная функция для NPAPI\n    function createPromise(arg)\n    {\n        return new Promise(arg);\n    }\n\n    function check_npapi_plugin (){\n        try {\n            var oAbout = CreateObject(\"CAdESCOM.About\");\n            plugin_loaded();\n        }\n        catch (err) {\n            document.getElementById(\"cadesplugin_object\").style.display = 'none';\n            // Объект создать не удалось, проверим, установлен ли\n            // вообще плагин. Такая возможность есть не во всех браузерах\n            var mimetype = navigator.mimeTypes[\"application/x-cades\"];\n            if (mimetype) {\n                var plugin = mimetype.enabledPlugin;\n                if (plugin) {\n                    plugin_loaded_error(\"Плагин загружен, но не создаются обьекты\");\n                }else\n                {\n                    plugin_loaded_error(\"Ошибка при загрузке плагина\");\n                }\n            }else\n            {\n                plugin_loaded_error(\"Плагин недоступен\");\n            }\n        }\n    }\n\n    //Проверяем работает ли плагин\n    function check_plugin_working()\n    {\n        var div = document.createElement(\"div\");\n        div.innerHTML = \"<!--[if lt IE 9]><i></i><![endif]-->\";\n        var isIeLessThan9 = (div.getElementsByTagName(\"i\").length === 1);\n        if (isIeLessThan9) {\n            plugin_loaded_error(\"Internet Explorer версии 8 и ниже не поддерживается\");\n            return;\n        }\n\n        if(isNativeMessageSupported())\n        {\n            load_extension();\n        }else if(!canPromise) {\n            window.addEventListener(\"message\", function (event){\n                    if (event.data !== \"cadesplugin_echo_request\")\n                        return;\n                    load_npapi_plugin();\n                    check_npapi_plugin();\n                },\n                false);\n        }else\n        {\n            if(document.readyState === \"complete\"){\n                load_npapi_plugin();\n                check_npapi_plugin();\n            } else {\n                window.addEventListener(\"load\", function (event) {\n                    load_npapi_plugin();\n                    check_npapi_plugin();\n                }, false);\n            }\n        }\n    }\n\n    function set_pluginObject(obj)\n    {\n        pluginObject = obj;\n    }\n\n    function is_capilite_enabled()\n    {\n        if ((typeof (cadesplugin.EnableInternalCSP) !== 'undefined') && cadesplugin.EnableInternalCSP)\n            return true;\n        return false;\n    };\n\n    //Export\n    cadesplugin.JSModuleVersion = \"2.3.0\";\n    cadesplugin.async_spawn = async_spawn;\n    cadesplugin.set = set_pluginObject;\n    cadesplugin.set_log_level = set_log_level;\n    cadesplugin.getLastError = getLastError;\n    cadesplugin.is_capilite_enabled = is_capilite_enabled;\n\n    if(isNativeMessageSupported())\n    {\n        cadesplugin.CreateObjectAsync = CreateObjectAsync;\n        cadesplugin.ReleasePluginObjects = ReleasePluginObjects;\n    }\n\n    if(!isNativeMessageSupported())\n    {\n        cadesplugin.CreateObject = CreateObject;\n    }\n\n    if(window.cadesplugin_load_timeout)\n    {\n        setTimeout(check_load_timeout, window.cadesplugin_load_timeout);\n    }\n    else\n    {\n        setTimeout(check_load_timeout, 20000);\n    }\n\n    set_constantValues();\n\n    cadesplugin.current_log_level = cadesplugin.LOG_LEVEL_ERROR;\n    window.cadesplugin = cadesplugin;\n    check_plugin_working();\n}());\n"]},"metadata":{},"sourceType":"script"}