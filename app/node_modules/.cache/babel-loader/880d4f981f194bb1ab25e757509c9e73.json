{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(removeFromGroupEffect),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(removeFromGroupWorker);import{takeLatest,put}from'redux-saga/effects';import{removeFromGroup,getAddedGroupLegalEntity,getAddedGroupNaturalEntity}from'../actions';import{Flash}from'../../../../common/flash/Flash';import{ContractorApiServices}from'../../services/contractors.api';export function removeFromGroupEffect(){return _regeneratorRuntime.wrap(function removeFromGroupEffect$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(removeFromGroup,removeFromGroupWorker);case 2:case\"end\":return _context.stop();}}},_marked);}/** Удаление контрагента из группы */function removeFromGroupWorker(_ref){var payload,message;return _regeneratorRuntime.wrap(function removeFromGroupWorker$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref.payload;_context2.prev=1;_context2.next=4;return ContractorApiServices.removeFromGroup({groupId:payload.groupId,contractorId:payload.contractorId});case 4:_context2.next=6;return put(getAddedGroupLegalEntity({id:payload.groupId}));case 6:_context2.next=8;return put(getAddedGroupNaturalEntity({id:payload.groupId}));case 8:_context2.next=15;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);message=_context2.t0.message;_context2.next=15;return Flash.error(message||'Возникла ошибка');case 15:case\"end\":return _context2.stop();}}},_marked2,null,[[1,10]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/store/sagas/removeFromGroup.effect.ts"],"names":["removeFromGroupEffect","removeFromGroupWorker","takeLatest","put","removeFromGroup","getAddedGroupLegalEntity","getAddedGroupNaturalEntity","Flash","ContractorApiServices","payload","groupId","contractorId","id","message","error"],"mappings":"oNAMiBA,qB,iDAUPC,qB,EAhBV,OAASC,UAAT,CAAqBC,GAArB,KAAgC,oBAAhC,CAEA,OAASC,eAAT,CAA0BC,wBAA1B,CAAoDC,0BAApD,KAAsF,YAAtF,CACA,OAASC,KAAT,KAAsB,gCAAtB,CACA,OAASC,qBAAT,KAAsC,gCAAtC,CAEA,MAAO,SAAUR,CAAAA,qBAAV,iJACL,MAAME,CAAAA,UAAU,CAACE,eAAD,CAAkBH,qBAAlB,CAAhB,CADK,sDASP,qCACA,QAAUA,CAAAA,qBAAV,4JAAkCQ,OAAlC,MAAkCA,OAAlC,mCAEI,MAAMD,CAAAA,qBAAqB,CAACJ,eAAtB,CAAsC,CAC1CM,OAAO,CAAED,OAAO,CAACC,OADyB,CAE1CC,YAAY,CAAEF,OAAO,CAACE,YAFoB,CAAtC,CAAN,CAFJ,wBAMI,MAAMR,CAAAA,GAAG,CAACE,wBAAwB,CAAC,CAAEO,EAAE,CAAEH,OAAO,CAACC,OAAd,CAAD,CAAzB,CAAT,CANJ,wBAOI,MAAMP,CAAAA,GAAG,CAACG,0BAA0B,CAAC,CAAEM,EAAE,CAAEH,OAAO,CAACC,OAAd,CAAD,CAA3B,CAAT,CAPJ,4FAQaG,OARb,cAQaA,OARb,mBASI,MAAMN,CAAAA,KAAK,CAACO,KAAN,CAAYD,OAAO,EAAI,iBAAvB,CAAN,CATJ","sourcesContent":["import { takeLatest, put } from 'redux-saga/effects';\r\n\r\nimport { removeFromGroup, getAddedGroupLegalEntity, getAddedGroupNaturalEntity } from '../actions';\r\nimport { Flash } from '../../../../common/flash/Flash';\r\nimport { ContractorApiServices } from '../../services/contractors.api';\r\n\r\nexport function* removeFromGroupEffect() {\r\n  yield takeLatest(removeFromGroup, removeFromGroupWorker);\r\n}\r\n\r\ninterface Payload {\r\n  groupId: number;\r\n  contractorId: number;\r\n}\r\n\r\n/** Удаление контрагента из группы */\r\nfunction* removeFromGroupWorker({ payload }: { payload: Payload }) {\r\n  try {\r\n    yield ContractorApiServices.removeFromGroup({\r\n      groupId: payload.groupId,\r\n      contractorId: payload.contractorId\r\n    });\r\n    yield put(getAddedGroupLegalEntity({ id: payload.groupId }));\r\n    yield put(getAddedGroupNaturalEntity({ id: payload.groupId }));\r\n  } catch ({ message }) {\r\n    yield Flash.error(message || 'Возникла ошибка');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}