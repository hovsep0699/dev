{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Button,Modal,Icons}from'@distate/components';import{Pagination}from'../../../../common/pagination';import{getEmployeeNoRoles,addRoleToEmployee}from'../../store/actions';import{selectNoRolesRows,selectNoRolesTotal}from'../../store/selectors';/** роли, которые можно добавить сотруднику */export var RolesSubmodal=function RolesSubmodal(props){var hide=props.hide,isVisible=props.isVisible,id=props.id;var rows=useSelector(selectNoRolesRows);var noRolesTotal=useSelector(selectNoRolesTotal);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),offset=_useState2[0],setOffset=_useState2[1];var dispatch=useDispatch();useEffect(function(){var props={offset:offset};id&&dispatch(getEmployeeNoRoles({id:id,props:props}));},[dispatch,id,offset]);var onAddRole=function onAddRole(groupId){dispatch(addRoleToEmployee({employeeId:id,groupId:groupId}));};return/*#__PURE__*/React.createElement(Modal,{hide:hide,isVisible:isVisible,zIndex:1001},/*#__PURE__*/React.createElement(Modal.Header,{title:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432\"}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0420\\u043E\\u043B\\u044C\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,rows===null||rows===void 0?void 0:rows.map(function(row){return/*#__PURE__*/React.createElement(\"tr\",{key:row.id},/*#__PURE__*/React.createElement(\"td\",null,row.title),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconPlus,{fill:\"currentColor\"}),onClick:function onClick(){return onAddRole(row.id);}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{setOffset:setOffset,listLength:noRolesTotal}))))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/company/components/staff/RolesSubmodal.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Button","Modal","Icons","Pagination","getEmployeeNoRoles","addRoleToEmployee","selectNoRolesRows","selectNoRolesTotal","RolesSubmodal","props","hide","isVisible","id","rows","noRolesTotal","offset","setOffset","dispatch","onAddRole","groupId","employeeId","map","row","title"],"mappings":"2KAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,KAAxB,KAAqC,qBAArC,CACA,OAASC,UAAT,KAA2B,+BAA3B,CACA,OAASC,kBAAT,CAA6BC,iBAA7B,KAAsD,qBAAtD,CACA,OAASC,iBAAT,CAA4BC,kBAA5B,KAAsD,uBAAtD,CAOA,8CACA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAkB,IACrCC,CAAAA,IADqC,CACbD,KADa,CACrCC,IADqC,CAC/BC,SAD+B,CACbF,KADa,CAC/BE,SAD+B,CACpBC,EADoB,CACbH,KADa,CACpBG,EADoB,CAE7C,GAAMC,CAAAA,IAAI,CAAGd,WAAW,CAACO,iBAAD,CAAxB,CACA,GAAMQ,CAAAA,YAAY,CAAGf,WAAW,CAACQ,kBAAD,CAAhC,CAH6C,cAIjBV,QAAQ,CAAC,CAAD,CAJS,wCAItCkB,MAJsC,eAI9BC,SAJ8B,eAM7C,GAAMC,CAAAA,QAAQ,CAAGnB,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAM,CACd,GAAMa,CAAAA,KAAK,CAAG,CAAEM,MAAM,CAANA,MAAF,CAAd,CACAH,EAAE,EAAIK,QAAQ,CAACb,kBAAkB,CAAC,CAAEQ,EAAE,CAAFA,EAAF,CAAMH,KAAK,CAALA,KAAN,CAAD,CAAnB,CAAd,CACD,CAHQ,CAGN,CAACQ,QAAD,CAAWL,EAAX,CAAeG,MAAf,CAHM,CAAT,CAKA,GAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,OAAD,CAAqB,CACrCF,QAAQ,CAACZ,iBAAiB,CAAC,CAAEe,UAAU,CAAER,EAAd,CAAkBO,OAAO,CAAPA,OAAlB,CAAD,CAAlB,CAAR,CACD,CAFD,CAIA,mBACE,oBAAC,KAAD,EAAO,IAAI,CAAET,IAAb,CAAmB,SAAS,CAAEC,SAA9B,CAAyC,MAAM,CAAE,IAAjD,eACE,oBAAC,KAAD,CAAO,MAAP,EAAc,KAAK,CAAC,qHAApB,EADF,cAGE,oBAAC,KAAD,CAAO,IAAP,mBACE,6BAAO,SAAS,CAAC,OAAjB,eACE,6BAAO,SAAS,CAAC,mBAAjB,eACE,2CACE,yDADF,cAEE,8BAFF,CADF,CADF,cAOE,iCACGE,IADH,SACGA,IADH,iBACGA,IAAI,CAAEQ,GAAN,CAAU,SAAAC,GAAG,qBACZ,0BAAI,GAAG,CAAEA,GAAG,CAACV,EAAb,eACE,8BAAKU,GAAG,CAACC,KAAT,CADF,cAEE,0BAAI,KAAK,CAAC,OAAV,eACE,oBAAC,MAAD,EACE,IAAI,cAAE,oBAAC,KAAD,CAAO,QAAP,EAAgB,IAAI,CAAC,cAArB,EADR,CAEE,OAAO,CAAE,yBAAML,CAAAA,SAAS,CAACI,GAAG,CAACV,EAAL,CAAf,EAFX,qDADF,CAFF,CADY,EAAb,CADH,CAPF,cAsBE,8CACE,2CACE,8BADF,cAEE,2CACE,2BAAK,SAAS,CAAC,kBAAf,eACE,oBAAC,UAAD,EAAY,SAAS,CAAEI,SAAvB,CAAkC,UAAU,CAAEF,YAA9C,EADF,CADF,CAFF,CADF,CAtBF,CADF,CAHF,CADF,CAyCD,CA1DM","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Modal, Icons } from '@distate/components';\r\nimport { Pagination } from '../../../../common/pagination';\r\nimport { getEmployeeNoRoles, addRoleToEmployee } from '../../store/actions';\r\nimport { selectNoRolesRows, selectNoRolesTotal } from '../../store/selectors';\r\n\r\ntype Props = {\r\n  hide: () => void;\r\n  isVisible: boolean;\r\n  id: number;\r\n};\r\n/** роли, которые можно добавить сотруднику */\r\nexport const RolesSubmodal = (props: Props) => {\r\n  const { hide, isVisible, id } = props;\r\n  const rows = useSelector(selectNoRolesRows);\r\n  const noRolesTotal = useSelector(selectNoRolesTotal);\r\n  const [offset, setOffset] = useState(0);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const props = { offset };\r\n    id && dispatch(getEmployeeNoRoles({ id, props }));\r\n  }, [dispatch, id, offset]);\r\n\r\n  const onAddRole = (groupId: number) => {\r\n    dispatch(addRoleToEmployee({ employeeId: id, groupId }));\r\n  };\r\n\r\n  return (\r\n    <Modal hide={hide} isVisible={isVisible} zIndex={1001}>\r\n      <Modal.Header title=\"Добавление элементов\" />\r\n\r\n      <Modal.Body>\r\n        <table className=\"table\">\r\n          <thead className=\"common-table-head\">\r\n            <tr>\r\n              <td>Роль</td>\r\n              <td></td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {rows?.map(row => (\r\n              <tr key={row.id}>\r\n                <td>{row.title}</td>\r\n                <td align=\"right\">\r\n                  <Button\r\n                    icon={<Icons.IconPlus fill=\"currentColor\" />}\r\n                    onClick={() => onAddRole(row.id)}\r\n                  >\r\n                    Добавить\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td></td>\r\n              <td>\r\n                <div className=\"pagination-right\">\r\n                  <Pagination setOffset={setOffset} listLength={noRolesTotal} />\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}