{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(getFoundCompanyEffect),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(getFoundCompanyWorker);import{takeLatest,call,put}from'redux-saga/effects';import{getFoundLocalCompany,setFoundCompanyContractor}from'../actions';import{ContractorApiServices}from'../../services/contractors.api';import{Flash}from'../../../../common/flash/Flash';export function getFoundCompanyEffect(){return _regeneratorRuntime.wrap(function getFoundCompanyEffect$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(getFoundLocalCompany,getFoundCompanyWorker);case 2:case\"end\":return _context.stop();}}},_marked);}function getFoundCompanyWorker(_ref){var payload,inn,name,offset,company,message;return _regeneratorRuntime.wrap(function getFoundCompanyWorker$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref.payload;_context2.prev=1;inn=payload.inn,name=payload.name,offset=payload.offset;_context2.next=5;return call(ContractorApiServices.searchLocalCompany,{inn:inn,name:name,offset:offset});case 5:company=_context2.sent;_context2.next=8;return put(setFoundCompanyContractor({search:{company:_objectSpread(_objectSpread({},company),{},{offset:offset,searchParams:payload})}}));case 8:_context2.next=15;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);message=_context2.t0.message;_context2.next=15;return Flash.error(message||'Возникла ошибка');case 15:case\"end\":return _context2.stop();}}},_marked2,null,[[1,10]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/store/sagas/getFoundLocalCompany.effect.ts"],"names":["getFoundCompanyEffect","getFoundCompanyWorker","takeLatest","call","put","getFoundLocalCompany","setFoundCompanyContractor","ContractorApiServices","Flash","payload","inn","name","offset","searchLocalCompany","company","search","searchParams","message","error"],"mappings":"8XAMiBA,qB,iDAWPC,qB,EAjBV,OAASC,UAAT,CAAqBC,IAArB,CAA2BC,GAA3B,KAAsC,oBAAtC,CAEA,OAASC,oBAAT,CAA+BC,yBAA/B,KAAgE,YAAhE,CACA,OAASC,qBAAT,KAAsC,gCAAtC,CACA,OAASC,KAAT,KAAsB,gCAAtB,CAEA,MAAO,SAAUR,CAAAA,qBAAV,iJACL,MAAME,CAAAA,UAAU,CAACG,oBAAD,CAAuBJ,qBAAvB,CAAhB,CADK,sDAWP,QAAUA,CAAAA,qBAAV,oLAAkCQ,OAAlC,MAAkCA,OAAlC,kBAEYC,GAFZ,CAEkCD,OAFlC,CAEYC,GAFZ,CAEiBC,IAFjB,CAEkCF,OAFlC,CAEiBE,IAFjB,CAEuBC,MAFvB,CAEkCH,OAFlC,CAEuBG,MAFvB,kBAGoB,MAAMT,CAAAA,IAAI,CAACI,qBAAqB,CAACM,kBAAvB,CAA2C,CACnEH,GAAG,CAAHA,GADmE,CAEnEC,IAAI,CAAJA,IAFmE,CAGnEC,MAAM,CAANA,MAHmE,CAA3C,CAAV,CAHpB,OAGUE,OAHV,iCAQI,MAAMV,CAAAA,GAAG,CACPE,yBAAyB,CAAC,CACxBS,MAAM,CAAE,CAAED,OAAO,gCAAOA,OAAP,MAAgBF,MAAM,CAANA,MAAhB,CAAwBI,YAAY,CAAEP,OAAtC,EAAT,CADgB,CAAD,CADlB,CAAT,CARJ,4FAaaQ,OAbb,cAaaA,OAbb,mBAcI,MAAMT,CAAAA,KAAK,CAACU,KAAN,CAAYD,OAAO,EAAI,iBAAvB,CAAN,CAdJ","sourcesContent":["import { takeLatest, call, put } from 'redux-saga/effects';\r\n\r\nimport { getFoundLocalCompany, setFoundCompanyContractor } from '../actions';\r\nimport { ContractorApiServices } from '../../services/contractors.api';\r\nimport { Flash } from '../../../../common/flash/Flash';\r\n\r\nexport function* getFoundCompanyEffect() {\r\n  yield takeLatest(getFoundLocalCompany, getFoundCompanyWorker);\r\n}\r\n\r\ntype Payload = {\r\n  inn?: string;\r\n  name?: string;\r\n  offset?: number;\r\n  limit?: number;\r\n};\r\n\r\nfunction* getFoundCompanyWorker({ payload }: { payload: Payload }) {\r\n  try {\r\n    const { inn, name, offset } = payload;\r\n    const company = yield call(ContractorApiServices.searchLocalCompany, {\r\n      inn,\r\n      name,\r\n      offset\r\n    });\r\n    yield put(\r\n      setFoundCompanyContractor({\r\n        search: { company: { ...company, offset, searchParams: payload } }\r\n      })\r\n    );\r\n  } catch ({ message }) {\r\n    yield Flash.error(message || 'Возникла ошибка');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}