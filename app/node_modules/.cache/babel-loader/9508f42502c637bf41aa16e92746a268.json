{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _applyDecoratedDescriptor from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/applyDecoratedDescriptor\";var _class,_temp;import React,{Component}from'react';import Button,{PRIMARY}from'../../../common/Button';import{ICON}from'@distate/components';import Modal from'../../../common/modal/Modal';import autobind from'autobind-decorator';import{CLEAR,SAVE,CHANGE}from'../../../common/Lbl';import classNames from'classnames';import style from'../../../common/form/documents/DocumentFormBuilder.module.css';import get from'get-value';import set from'set-value';import deepmerge from'deepmerge';import Text from'../../../common/form/components/Text';import RadioField from'../../../common/form/components/radio/RadioField';import Employee from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/type/Employee';import Assignee from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/type/Assignee';import FL from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/type/FL';import{TOP}from'../../../common/Placement';import PassedBy from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/PassedBy';import FIO from'@distate/core/dist/domain/documents/upd/standard_element/fio/FIO';import Surname from'@distate/core/dist/domain/documents/upd/standard_element/fio/Surname';import Name from'@distate/core/dist/domain/documents/upd/standard_element/fio/Name';import Position from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/Position';import CompanyName from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/CompanyName';import Information from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/Information';import ShipmentBasis from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/ShipmentBasis';import AssigneeBasis from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/AssigneeBasis';import Type from'@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/Type';import Patronymic from'@distate/core/dist/domain/documents/upd/standard_element/fio/Patronymic';import{combineMerge}from'../../../utils/ObjectUtil';var PassedByForm=(_class=(_temp=/*#__PURE__*/function(_Component){_inherits(PassedByForm,_Component);var _super=_createSuper(PassedByForm);function PassedByForm(props){var _this;_classCallCheck(this,PassedByForm);_this=_super.call(this,props);_this.handleFieldValue=function(Domain,scope){return function(value){var fieldsValues=_this.state.fieldsValues;var path=scope?\"\".concat(scope,\".\").concat(Domain.field):Domain.field;var oldValue=get(fieldsValues,path);set(fieldsValues,path,value);if(oldValue!==value){_this.validateField(Domain,scope,value);}_this.setState({fieldsValues:fieldsValues});};};_this.validateField=function(Domain,scope,value){var fieldErrorPath=scope?\"\".concat(scope,\".\").concat(Domain.field):Domain.field;var newFieldError=[];var errorMsg=Domain.validate(value);if(errorMsg){newFieldError.push(errorMsg);}else{_this.props.clearFieldError(fieldErrorPath);}set(_this.errors,\"\".concat(_this.formScope,\".\").concat(fieldErrorPath,\".errors\"),newFieldError);};_this.getFieldErrorMsg=function(Domain,scope){var path=scope?\"\".concat(scope,\".\").concat(Domain.field):Domain.field;var error=get(_this.errors,\"\".concat(_this.formScope,\".\").concat(path,\".errors\"));if(Array.isArray(error)&&error.length)return error[0];};_this.renderInputField=function(DomainVO,scope){if(!_this.isShowField(DomainVO,scope))return null;return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Text,{DomainVO:DomainVO,initialValue:_this.getFieldValue(DomainVO,scope),onValueChange:_this.handleFieldValue(DomainVO,scope),labelAlign:TOP,isRequired:_this.isFieldRequired(DomainVO,scope),errorMsg:_this.getFieldErrorMsg(DomainVO,scope)}));};_this.formScope=PassedBy.field;_this.initialFieldsValues=_defineProperty({},AssigneeBasis.field,'Должностные обязанности');_this.state={isShowModal:false,fieldsValues:_objectSpread({},_this.initialFieldsValues),radioValue:Employee.value,chosenData:''};_this.errors=_this.props.errors||{};_this.requiredFields=[\"\".concat(FIO.field,\".\").concat(Surname.field),\"\".concat(FIO.field,\".\").concat(Name.field),Position.field,CompanyName.field];_this.assigneeShowFields=[\"\".concat(FIO.field,\".\").concat(Surname.field),\"\".concat(FIO.field,\".\").concat(Name.field),\"\".concat(FIO.field,\".\").concat(Patronymic.field),Position.field,Information.field,CompanyName.field,ShipmentBasis.field,AssigneeBasis.field];_this.employeeShowFields=[\"\".concat(FIO.field,\".\").concat(Surname.field),\"\".concat(FIO.field,\".\").concat(Name.field),\"\".concat(FIO.field,\".\").concat(Patronymic.field),Position.field,Information.field,AssigneeBasis.field];_this.FLShowFields=[\"\".concat(FIO.field,\".\").concat(Surname.field),\"\".concat(FIO.field,\".\").concat(Name.field),\"\".concat(FIO.field,\".\").concat(Patronymic.field),Information.field,ShipmentBasis.field];return _this;}_createClass(PassedByForm,[{key:\"componentDidMount\",value:function componentDidMount(){this.setInitialValues();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(get(prevProps,\"errors.\".concat(this.formScope))!==get(this.props,\"errors.\".concat(this.formScope))){this.updateServerErrors();}}},{key:\"updateServerErrors\",value:function updateServerErrors(){var serverErrors=get(this.props,'errors');this.errors=deepmerge(this.errors,serverErrors,{arrayMerge:combineMerge});}},{key:\"setInitialValues\",value:function setInitialValues(){var _this2=this;var initialValues=get(this.props,\"initialValues.\".concat(this.formScope));if(!initialValues)return;this.setState({fieldsValues:deepmerge(this.initialFieldsValues,initialValues),radioValue:initialValues[Type.field]},function(){var surname=get(_this2.state.fieldsValues,\"\".concat(FIO.field,\".\").concat(Surname.field));var name=get(_this2.state.fieldsValues,\"\".concat(FIO.field,\".\").concat(Name.field));var chosenData=\"\".concat(surname,\" \").concat(name);_this2.saveData();if(_this2.hasAllRequiredFields()){_this2.setState({chosenData:chosenData});}});}},{key:\"getFormattedFieldsData\",value:function getFormattedFieldsData(){var fieldsValues=_objectSpread({},this.state.fieldsValues);var formattedFields={};formattedFields[Type.field]=this.state.radioValue;var fieldsList=this.getFieldsList();fieldsList.forEach(function(fieldName){var value=get(fieldsValues,fieldName);set(formattedFields,fieldName,value);});return _defineProperty({},this.formScope,formattedFields);}},{key:\"showModal\",value:function showModal(){this.setState({isShowModal:true});}},{key:\"hideModal\",value:function hideModal(){this.setState({isShowModal:false});}},{key:\"getFieldsList\",value:function getFieldsList(){var radioValue=this.state.radioValue;if(radioValue===Assignee.value){return this.assigneeShowFields;}if(radioValue===Employee.value){return this.employeeShowFields;}if(radioValue===FL.value){return this.FLShowFields;}return[];}},{key:\"isShowField\",value:function isShowField(DomainVO,scope){var fieldsList=this.getFieldsList();var fieldName=scope?\"\".concat(scope,\".\").concat(DomainVO.field):DomainVO.field;return fieldsList.includes(fieldName);}},{key:\"handleRadioChange\",value:function handleRadioChange(value){this.setState({radioValue:value});}},{key:\"hasErrors\",value:function hasErrors(){var errors=get(this.errors,this.formScope);var hasAnyErrors=errors&&Object.entries(errors).length;if(!hasAnyErrors)return false;var fieldsList=this.getFieldsList();var hasCurrentFieldsErrors=function hasCurrentFieldsErrors(errorsObj,scope){return Object.entries(errorsObj).some(function(errorItem){var fieldName=scope?\"\".concat(scope,\".\").concat(errorItem[0]):errorItem[0];var hasError=errorItem[1].errors&&errorItem[1].errors.length;if(!hasError){if(!errorItem[1].errors&&Object.keys(errorItem[1]).length){return hasCurrentFieldsErrors(errorItem[1],fieldName);}return false;}return fieldsList.includes(fieldName);});};return hasCurrentFieldsErrors(errors);}},{key:\"saveData\",value:function saveData(){var fieldsValues=this.getFormattedFieldsData();this.props.setDataToFormState(fieldsValues);}},{key:\"removeData\",value:function removeData(){var dataToRemove=_defineProperty({},this.formScope,null);this.props.setDataToFormState(dataToRemove);}},{key:\"isFieldRequired\",value:function isFieldRequired(Domain,scope){var fieldName=scope?\"\".concat(scope,\".\").concat(Domain.field):Domain.field;return this.requiredFields.includes(fieldName);}},{key:\"hasAllRequiredFields\",value:function hasAllRequiredFields(){var _this3=this;var fieldsList=this.getFieldsList();var actualRequiredFields=this.requiredFields.filter(function(requiredField){return fieldsList.find(function(field){return requiredField.includes(field);});});return actualRequiredFields.every(function(field){return get(_this3.state.fieldsValues,field);});}},{key:\"handleSaveBtnClick\",value:function handleSaveBtnClick(){var surname=get(this.state.fieldsValues,\"\".concat(FIO.field,\".\").concat(Surname.field));var name=get(this.state.fieldsValues,\"\".concat(FIO.field,\".\").concat(Name.field));var chosenData=\"\".concat(surname,\" \").concat(name);if(this.hasAllRequiredFields()){this.setState({chosenData:chosenData});}else{this.setState({chosenData:''});}this.saveData();this.hideModal();}},{key:\"handleClearBtnClick\",value:function handleClearBtnClick(){this.clearForm();}},{key:\"clearForm\",value:function clearForm(){this.setState({fieldsValues:_objectSpread({},this.initialFieldsValues),radioValue:Employee.value});}},{key:\"getFieldValue\",value:function getFieldValue(Domain,scope){var path=scope?\"\".concat(scope,\".\").concat(Domain.field):\"\".concat(Domain.field);return get(this.state.fieldsValues,path);}},{key:\"renderForm\",value:function renderForm(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(RadioField,{DomainVO:Type,onChange:this.handleRadioChange,initialValue:this.state.radioValue,noCaption:true})),this.renderInputField(Surname,FIO.field),this.renderInputField(Name,FIO.field),this.renderInputField(Patronymic,FIO.field),this.renderInputField(Position),this.renderInputField(CompanyName),this.renderInputField(ShipmentBasis),this.renderInputField(AssigneeBasis),this.renderInputField(Information));}},{key:\"render\",value:function render(){var formClasses=classNames('form',style.modalForm,style.center,style.hideFirstHr);var buttonClasses=classNames(_defineProperty({},style.btnError,this.hasErrors()));var isShowInput=this.state.chosenData;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"li\",{className:this.props.customClasses},/*#__PURE__*/React.createElement(\"label\",{className:\"ds-field-name leftside\"},PassedBy.name),/*#__PURE__*/React.createElement(\"div\",{className:\"group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ds-input-group\"},isShowInput&&/*#__PURE__*/React.createElement(\"p\",{className:\"ds-field-value predefined\",style:{width:'472px'}},/*#__PURE__*/React.createElement(\"span\",null,this.state.chosenData)),/*#__PURE__*/React.createElement(Button,{type:\"button\",iconClass:ICON.edit,className:buttonClasses,onClick:this.showModal},CHANGE)))),/*#__PURE__*/React.createElement(Modal,{hide:this.hideModal,width:\"472\",isVisible:this.state.isShowModal,key:\"\".concat(this.formScope,\"_passedByForm\")},/*#__PURE__*/React.createElement(Modal.Header,{title:PassedBy.name,className:style.center}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"ul\",{className:formClasses},this.renderForm())),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"center\",iconClass:ICON.accept,colorClass:PRIMARY,onClick:this.handleSaveBtnClick},SAVE),/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"center\",iconClass:ICON.cancel,onClick:this.handleClearBtnClick},CLEAR))));}}]);return PassedByForm;}(Component),_temp),(_applyDecoratedDescriptor(_class.prototype,\"showModal\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"showModal\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"hideModal\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"hideModal\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"isShowField\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"isShowField\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"handleRadioChange\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"handleRadioChange\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"hasErrors\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"hasErrors\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"isFieldRequired\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"isFieldRequired\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"handleSaveBtnClick\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"handleSaveBtnClick\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"handleClearBtnClick\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"handleClearBtnClick\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"clearForm\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"clearForm\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"getFieldValue\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"getFieldValue\"),_class.prototype)),_class);export default PassedByForm;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/upd/forms/PassedByForm.js"],"names":["React","Component","Button","PRIMARY","ICON","Modal","autobind","CLEAR","SAVE","CHANGE","classNames","style","get","set","deepmerge","Text","RadioField","Employee","Assignee","FL","TOP","PassedBy","FIO","Surname","Name","Position","CompanyName","Information","ShipmentBasis","AssigneeBasis","Type","Patronymic","combineMerge","PassedByForm","props","handleFieldValue","Domain","scope","value","fieldsValues","state","path","field","oldValue","validateField","setState","fieldErrorPath","newFieldError","errorMsg","validate","push","clearFieldError","errors","formScope","getFieldErrorMsg","error","Array","isArray","length","renderInputField","DomainVO","isShowField","getFieldValue","isFieldRequired","initialFieldsValues","isShowModal","radioValue","chosenData","requiredFields","assigneeShowFields","employeeShowFields","FLShowFields","setInitialValues","prevProps","prevState","updateServerErrors","serverErrors","arrayMerge","initialValues","surname","name","saveData","hasAllRequiredFields","formattedFields","fieldsList","getFieldsList","forEach","fieldName","includes","hasAnyErrors","Object","entries","hasCurrentFieldsErrors","errorsObj","some","errorItem","hasError","keys","getFormattedFieldsData","setDataToFormState","dataToRemove","actualRequiredFields","filter","requiredField","find","every","hideModal","clearForm","handleRadioChange","formClasses","modalForm","center","hideFirstHr","buttonClasses","btnError","hasErrors","isShowInput","customClasses","width","edit","showModal","renderForm","accept","handleSaveBtnClick","cancel","handleClearBtnClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Button, { PRIMARY } from '../../../common/Button';\r\nimport { ICON } from '@distate/components';\r\nimport Modal from '../../../common/modal/Modal';\r\nimport autobind from 'autobind-decorator';\r\nimport { CLEAR, SAVE, CHANGE } from '../../../common/Lbl';\r\nimport classNames from 'classnames';\r\nimport style from '../../../common/form/documents/DocumentFormBuilder.module.css';\r\nimport get from 'get-value';\r\nimport set from 'set-value';\r\nimport deepmerge from 'deepmerge';\r\nimport Text from '../../../common/form/components/Text';\r\nimport RadioField from '../../../common/form/components/radio/RadioField';\r\nimport Employee from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/type/Employee';\r\nimport Assignee from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/type/Assignee';\r\nimport FL from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/type/FL';\r\nimport { TOP } from '../../../common/Placement';\r\nimport PassedBy from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/PassedBy';\r\nimport FIO from '@distate/core/dist/domain/documents/upd/standard_element/fio/FIO';\r\nimport Surname from '@distate/core/dist/domain/documents/upd/standard_element/fio/Surname';\r\nimport Name from '@distate/core/dist/domain/documents/upd/standard_element/fio/Name';\r\nimport Position from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/Position';\r\nimport CompanyName from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/CompanyName';\r\nimport Information from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/Information';\r\nimport ShipmentBasis from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/ShipmentBasis';\r\nimport AssigneeBasis from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/AssigneeBasis';\r\nimport Type from '@distate/core/dist/domain/documents/upd/vo/transfer/passedBy/Type';\r\nimport Patronymic from '@distate/core/dist/domain/documents/upd/standard_element/fio/Patronymic';\r\nimport { combineMerge } from '../../../utils/ObjectUtil';\r\n\r\nclass PassedByForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.formScope = PassedBy.field;\r\n    this.initialFieldsValues = {\r\n      [AssigneeBasis.field]: 'Должностные обязанности'\r\n    };\r\n    this.state = {\r\n      isShowModal: false,\r\n      fieldsValues: { ...this.initialFieldsValues },\r\n      radioValue: Employee.value,\r\n      chosenData: ''\r\n    };\r\n    this.errors = this.props.errors || {};\r\n    this.requiredFields = [\r\n      `${FIO.field}.${Surname.field}`,\r\n      `${FIO.field}.${Name.field}`,\r\n      Position.field,\r\n      CompanyName.field\r\n    ];\r\n    this.assigneeShowFields = [\r\n      `${FIO.field}.${Surname.field}`,\r\n      `${FIO.field}.${Name.field}`,\r\n      `${FIO.field}.${Patronymic.field}`,\r\n      Position.field,\r\n      Information.field,\r\n      CompanyName.field,\r\n      ShipmentBasis.field,\r\n      AssigneeBasis.field\r\n    ];\r\n    this.employeeShowFields = [\r\n      `${FIO.field}.${Surname.field}`,\r\n      `${FIO.field}.${Name.field}`,\r\n      `${FIO.field}.${Patronymic.field}`,\r\n      Position.field,\r\n      Information.field,\r\n      AssigneeBasis.field\r\n    ];\r\n    this.FLShowFields = [\r\n      `${FIO.field}.${Surname.field}`,\r\n      `${FIO.field}.${Name.field}`,\r\n      `${FIO.field}.${Patronymic.field}`,\r\n      Information.field,\r\n      ShipmentBasis.field\r\n    ];\r\n  }\r\n  componentDidMount() {\r\n    this.setInitialValues();\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      get(prevProps, `errors.${this.formScope}`) !== get(this.props, `errors.${this.formScope}`)\r\n    ) {\r\n      this.updateServerErrors();\r\n    }\r\n  }\r\n  updateServerErrors() {\r\n    let serverErrors = get(this.props, 'errors');\r\n    this.errors = deepmerge(this.errors, serverErrors, {\r\n      arrayMerge: combineMerge\r\n    });\r\n  }\r\n  setInitialValues() {\r\n    const initialValues = get(this.props, `initialValues.${this.formScope}`);\r\n    if (!initialValues) return;\r\n    this.setState(\r\n      {\r\n        fieldsValues: deepmerge(this.initialFieldsValues, initialValues),\r\n        radioValue: initialValues[Type.field]\r\n      },\r\n      () => {\r\n        const surname = get(this.state.fieldsValues, `${FIO.field}.${Surname.field}`);\r\n        const name = get(this.state.fieldsValues, `${FIO.field}.${Name.field}`);\r\n        const chosenData = `${surname} ${name}`;\r\n        this.saveData();\r\n        if (this.hasAllRequiredFields()) {\r\n          this.setState({ chosenData });\r\n        }\r\n      }\r\n    );\r\n  }\r\n  getFormattedFieldsData() {\r\n    const fieldsValues = { ...this.state.fieldsValues };\r\n    const formattedFields = {};\r\n    formattedFields[Type.field] = this.state.radioValue;\r\n    const fieldsList = this.getFieldsList();\r\n    fieldsList.forEach(fieldName => {\r\n      const value = get(fieldsValues, fieldName);\r\n      set(formattedFields, fieldName, value);\r\n    });\r\n    return { [this.formScope]: formattedFields };\r\n  }\r\n  @autobind\r\n  showModal() {\r\n    this.setState({ isShowModal: true });\r\n  }\r\n  @autobind\r\n  hideModal() {\r\n    this.setState({ isShowModal: false });\r\n  }\r\n  getFieldsList() {\r\n    const radioValue = this.state.radioValue;\r\n    if (radioValue === Assignee.value) {\r\n      return this.assigneeShowFields;\r\n    }\r\n    if (radioValue === Employee.value) {\r\n      return this.employeeShowFields;\r\n    }\r\n    if (radioValue === FL.value) {\r\n      return this.FLShowFields;\r\n    }\r\n    return [];\r\n  }\r\n  @autobind\r\n  isShowField(DomainVO, scope) {\r\n    const fieldsList = this.getFieldsList();\r\n    const fieldName = scope ? `${scope}.${DomainVO.field}` : DomainVO.field;\r\n    return fieldsList.includes(fieldName);\r\n  }\r\n  @autobind\r\n  handleRadioChange(value) {\r\n    this.setState({ radioValue: value });\r\n  }\r\n  handleFieldValue = (Domain, scope) => value => {\r\n    const fieldsValues = this.state.fieldsValues;\r\n    const path = scope ? `${scope}.${Domain.field}` : Domain.field;\r\n    const oldValue = get(fieldsValues, path);\r\n    set(fieldsValues, path, value);\r\n    if (oldValue !== value) {\r\n      this.validateField(Domain, scope, value);\r\n    }\r\n    this.setState({ fieldsValues });\r\n  };\r\n  validateField = (Domain, scope, value) => {\r\n    const fieldErrorPath = scope ? `${scope}.${Domain.field}` : Domain.field;\r\n    const newFieldError = [];\r\n    const errorMsg = Domain.validate(value);\r\n    if (errorMsg) {\r\n      newFieldError.push(errorMsg);\r\n    } else {\r\n      this.props.clearFieldError(fieldErrorPath);\r\n    }\r\n    set(this.errors, `${this.formScope}.${fieldErrorPath}.errors`, newFieldError);\r\n  };\r\n  getFieldErrorMsg = (Domain, scope) => {\r\n    const path = scope ? `${scope}.${Domain.field}` : Domain.field;\r\n    const error = get(this.errors, `${this.formScope}.${path}.errors`);\r\n    if (Array.isArray(error) && error.length) return error[0];\r\n  };\r\n  @autobind\r\n  hasErrors() {\r\n    const errors = get(this.errors, this.formScope);\r\n    const hasAnyErrors = errors && Object.entries(errors).length;\r\n    if (!hasAnyErrors) return false;\r\n    const fieldsList = this.getFieldsList();\r\n    const hasCurrentFieldsErrors = (errorsObj, scope) =>\r\n      Object.entries(errorsObj).some(errorItem => {\r\n        const fieldName = scope ? `${scope}.${errorItem[0]}` : errorItem[0];\r\n        const hasError = errorItem[1].errors && errorItem[1].errors.length;\r\n        if (!hasError) {\r\n          if (!errorItem[1].errors && Object.keys(errorItem[1]).length) {\r\n            return hasCurrentFieldsErrors(errorItem[1], fieldName);\r\n          }\r\n          return false;\r\n        }\r\n        return fieldsList.includes(fieldName);\r\n      });\r\n    return hasCurrentFieldsErrors(errors);\r\n  }\r\n  saveData() {\r\n    const fieldsValues = this.getFormattedFieldsData();\r\n    this.props.setDataToFormState(fieldsValues);\r\n  }\r\n  removeData() {\r\n    const dataToRemove = {\r\n      [this.formScope]: null\r\n    };\r\n    this.props.setDataToFormState(dataToRemove);\r\n  }\r\n  @autobind\r\n  isFieldRequired(Domain, scope) {\r\n    const fieldName = scope ? `${scope}.${Domain.field}` : Domain.field;\r\n    return this.requiredFields.includes(fieldName);\r\n  }\r\n  hasAllRequiredFields() {\r\n    const fieldsList = this.getFieldsList();\r\n    const actualRequiredFields = this.requiredFields.filter(requiredField =>\r\n      fieldsList.find(field => requiredField.includes(field))\r\n    );\r\n    return actualRequiredFields.every(field => get(this.state.fieldsValues, field));\r\n  }\r\n  @autobind\r\n  handleSaveBtnClick() {\r\n    const surname = get(this.state.fieldsValues, `${FIO.field}.${Surname.field}`);\r\n    const name = get(this.state.fieldsValues, `${FIO.field}.${Name.field}`);\r\n    const chosenData = `${surname} ${name}`;\r\n    if (this.hasAllRequiredFields()) {\r\n      this.setState({ chosenData });\r\n    } else {\r\n      this.setState({ chosenData: '' });\r\n    }\r\n    this.saveData();\r\n    this.hideModal();\r\n  }\r\n  @autobind\r\n  handleClearBtnClick() {\r\n    this.clearForm();\r\n  }\r\n  @autobind\r\n  clearForm() {\r\n    this.setState({\r\n      fieldsValues: { ...this.initialFieldsValues },\r\n      radioValue: Employee.value\r\n    });\r\n  }\r\n  @autobind\r\n  getFieldValue(Domain, scope) {\r\n    const path = scope ? `${scope}.${Domain.field}` : `${Domain.field}`;\r\n    return get(this.state.fieldsValues, path);\r\n  }\r\n  renderInputField = (DomainVO, scope) => {\r\n    if (!this.isShowField(DomainVO, scope)) return null;\r\n    return (\r\n      <li>\r\n        <Text\r\n          DomainVO={DomainVO}\r\n          initialValue={this.getFieldValue(DomainVO, scope)}\r\n          onValueChange={this.handleFieldValue(DomainVO, scope)}\r\n          labelAlign={TOP}\r\n          isRequired={this.isFieldRequired(DomainVO, scope)}\r\n          errorMsg={this.getFieldErrorMsg(DomainVO, scope)}\r\n        />\r\n      </li>\r\n    );\r\n  };\r\n\r\n  renderForm() {\r\n    return (\r\n      <React.Fragment>\r\n        <li>\r\n          <RadioField\r\n            DomainVO={Type}\r\n            onChange={this.handleRadioChange}\r\n            initialValue={this.state.radioValue}\r\n            noCaption\r\n          />\r\n        </li>\r\n        {this.renderInputField(Surname, FIO.field)}\r\n        {this.renderInputField(Name, FIO.field)}\r\n        {this.renderInputField(Patronymic, FIO.field)}\r\n        {this.renderInputField(Position)}\r\n        {this.renderInputField(CompanyName)}\r\n        {this.renderInputField(ShipmentBasis)}\r\n        {this.renderInputField(AssigneeBasis)}\r\n        {this.renderInputField(Information)}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  render() {\r\n    const formClasses = classNames('form', style.modalForm, style.center, style.hideFirstHr);\r\n    const buttonClasses = classNames({\r\n      [style.btnError]: this.hasErrors()\r\n    });\r\n    const isShowInput = this.state.chosenData;\r\n    return (\r\n      <React.Fragment>\r\n        <li className={this.props.customClasses}>\r\n          <label className=\"ds-field-name leftside\">{PassedBy.name}</label>\r\n          <div className=\"group\">\r\n            <div className=\"ds-input-group\">\r\n              {isShowInput && (\r\n                <p className=\"ds-field-value predefined\" style={{ width: '472px' }}>\r\n                  <span>{this.state.chosenData}</span>\r\n                </p>\r\n              )}\r\n              <Button\r\n                type=\"button\"\r\n                iconClass={ICON.edit}\r\n                className={buttonClasses}\r\n                onClick={this.showModal}\r\n              >\r\n                {CHANGE}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </li>\r\n\r\n        <Modal\r\n          hide={this.hideModal}\r\n          width=\"472\"\r\n          isVisible={this.state.isShowModal}\r\n          key={`${this.formScope}_passedByForm`}\r\n        >\r\n          <Modal.Header title={PassedBy.name} className={style.center} />\r\n          <Modal.Body>\r\n            <ul className={formClasses}>{this.renderForm()}</ul>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button\r\n              type=\"button\"\r\n              className=\"center\"\r\n              iconClass={ICON.accept}\r\n              colorClass={PRIMARY}\r\n              onClick={this.handleSaveBtnClick}\r\n            >\r\n              {SAVE}\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              className=\"center\"\r\n              iconClass={ICON.cancel}\r\n              onClick={this.handleClearBtnClick}\r\n            >\r\n              {CLEAR}\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PassedByForm;\r\n"]},"metadata":{},"sourceType":"module"}