{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _applyDecoratedDescriptor from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/applyDecoratedDescriptor\";var _class,_temp,_class3,_temp2;import autobind from\"autobind-decorator\";import{BaseDialog}from\"@distate/app/src/pages/POA/MCHD_ROOT/domain/model/dialog\";export var DialogModel=(_class=(_temp=/*#__PURE__*/function(){function DialogModel(dialog,isVisible){_classCallCheck(this,DialogModel);this.dialog=void 0;this.isVisible=void 0;this.dialog=dialog;this.isVisible=isVisible;}_createClass(DialogModel,[{key:\"copyWith\",value:function copyWith(_ref){var dialog=_ref.dialog,isVisible=_ref.isVisible;return new DialogModel(dialog!==null&&dialog!==void 0?dialog:this.dialog,isVisible!==null&&isVisible!==void 0?isVisible:this.isVisible);}}]);return DialogModel;}(),_temp),(_applyDecoratedDescriptor(_class.prototype,\"copyWith\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"copyWith\"),_class.prototype)),_class);export var DialogManager=(_class3=(_temp2=/*#__PURE__*/function(){function DialogManager(){_classCallCheck(this,DialogManager);this.dialogs=void 0;this.dialog=void 0;this.listeners=void 0;this.listeners=[];this.dialogs=[];this.dialog=null;}_createClass(DialogManager,[{key:\"isVisible\",value:function isVisible(){var isVisible=false;this.dialogs.forEach(function(dialog){isVisible=isVisible||dialog.isVisible;});return isVisible;}},{key:\"getDialogBy\",value:function getDialogBy(index){return this.dialogs[index];}},{key:\"setIsVisible\",value:function setIsVisible(isVisible){this.dialogs.map(function(dialog){dialog.isVisible=isVisible;return dialog;});// this._isVisible = isVisible;\n}},{key:\"showDialog\",value:function showDialog(dialog){this.dialogs.push(new DialogModel(dialog,true));this.dialog=dialog;this.notify();}},{key:\"hideDialog\",value:function hideDialog(){this.dialogs.pop();this.dialog=this.getDialog();this.notify();}},{key:\"hideAllDialogs\",value:function hideAllDialogs(){this.dialogs=[];this.dialog=null;this.notify();}},{key:\"getDialog\",value:function getDialog(){return this.dialogs.length<=0?null:this.dialogs[this.dialogs.length-1].dialog;}},{key:\"getDialogs\",value:function getDialogs(){return this.dialogs.map(function(dialog){return dialog.dialog;});}},{key:\"getDialogsModel\",value:function getDialogsModel(){return this.getDialogs().map(function(dialog){return new BaseDialog(dialog);});}},{key:\"subscribe\",value:function subscribe(callback){this.listeners.push(callback);callback(this.dialog);// Immediately notify the subscriber of the current dialog\n}},{key:\"unsubscribe\",value:function unsubscribe(callback){var indexToRemove=this.listeners.indexOf(callback);if(indexToRemove>-1){this.listeners.splice(indexToRemove,1);}}},{key:\"notify\",value:function notify(){var _this=this;this.listeners.forEach(function(callback){return callback(_this.dialog);});}}]);return DialogManager;}(),_temp2),(_applyDecoratedDescriptor(_class3.prototype,\"isVisible\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"isVisible\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"getDialogBy\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"getDialogBy\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"setIsVisible\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"setIsVisible\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"showDialog\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"showDialog\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"hideDialog\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"hideDialog\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"hideAllDialogs\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"hideAllDialogs\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"getDialog\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"getDialog\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"getDialogs\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"getDialogs\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"getDialogsModel\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"getDialogsModel\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"subscribe\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"subscribe\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"unsubscribe\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"unsubscribe\"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,\"notify\",[autobind],Object.getOwnPropertyDescriptor(_class3.prototype,\"notify\"),_class3.prototype)),_class3);var dialogManager=new DialogManager();export default dialogManager;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/POA/MCHD_ROOT/presentation/pages/dashboard/modals/DialogManager.tsx"],"names":["autobind","BaseDialog","DialogModel","dialog","isVisible","DialogManager","dialogs","listeners","forEach","index","map","push","notify","pop","getDialog","length","getDialogs","callback","indexToRemove","indexOf","splice","dialogManager"],"mappings":"qjBACA,MAAOA,CAAAA,QAAP,KAAqB,oBAArB,CACA,OAAQC,UAAR,KAAyB,0DAAzB,CAOA,UAAaC,CAAAA,WAAb,wCAGI,qBAAYC,MAAZ,CAA4CC,SAA5C,CAAgE,wCAFzDD,MAEyD,aADzDC,SACyD,QAC5D,KAAKD,MAAL,CAAcA,MAAd,CACA,KAAKC,SAAL,CAAiBA,SAAjB,CACH,CANL,uEAW+C,IAFnCD,CAAAA,MAEmC,MAFnCA,MAEmC,CADnCC,SACmC,MADnCA,SACmC,CACvC,MAAO,IAAIF,CAAAA,WAAJ,CAAgBC,MAAhB,SAAgBA,MAAhB,UAAgBA,MAAhB,CAA0B,KAAKA,MAA/B,CAAuCC,SAAvC,SAAuCA,SAAvC,UAAuCA,SAAvC,CAAoD,KAAKA,SAAzD,CAAP,CACH,CAbL,0FAOKJ,QAPL,0FAgBA,UAAaK,CAAAA,aAAb,0CAII,wBAAa,0CAHLC,OAGK,aAFLH,MAEK,aADLI,SACK,QACT,KAAKA,SAAL,CAAiB,EAAjB,CACA,KAAKD,OAAL,CAAe,EAAf,CACA,KAAKH,MAAL,CAAc,IAAd,CACH,CARL,uEAWgC,CACxB,GAAIC,CAAAA,SAAS,CAAG,KAAhB,CACA,KAAKE,OAAL,CAAaE,OAAb,CAAqB,SAACL,MAAD,CAAyB,CAC1CC,SAAS,CAAGA,SAAS,EAAID,MAAM,CAACC,SAAhC,CACH,CAFD,EAGA,MAAOA,CAAAA,SAAP,CACH,CAjBL,gDAoBuBK,KApBvB,CAoBmD,CAC3C,MAAO,MAAKH,OAAL,CAAaG,KAAb,CAAP,CACH,CAtBL,kDA0BwBL,SA1BxB,CA0BkD,CAC1C,KAAKE,OAAL,CAAaI,GAAb,CAAiB,SAACP,MAAD,CAAU,CACvBA,MAAM,CAACC,SAAP,CAAmBA,SAAnB,CACA,MAAOD,CAAAA,MAAP,CACH,CAHD,EAIA;AACH,CAhCL,8CAmCsBA,MAnCtB,CAmC+C,CACvC,KAAKG,OAAL,CAAaK,IAAb,CAAkB,GAAIT,CAAAA,WAAJ,CAAgBC,MAAhB,CAAwB,IAAxB,CAAlB,EACA,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKS,MAAL,GACH,CAvCL,+CA0CwB,CAChB,KAAKN,OAAL,CAAaO,GAAb,GACA,KAAKV,MAAL,CAAc,KAAKW,SAAL,EAAd,CACA,KAAKF,MAAL,GACH,CA9CL,uDAiD4B,CACpB,KAAKN,OAAL,CAAe,EAAf,CACA,KAAKH,MAAL,CAAc,IAAd,CACA,KAAKS,MAAL,GACH,CArDL,6CAwD+C,CACvC,MAAO,MAAKN,OAAL,CAAaS,MAAb,EAAuB,CAAvB,CAA2B,IAA3B,CAAkC,KAAKT,OAAL,CAAa,KAAKA,OAAL,CAAaS,MAAb,CAAsB,CAAnC,EAAsCZ,MAA/E,CACH,CA1DL,+CA6D2C,CACnC,MAAO,MAAKG,OAAL,CAAaI,GAAb,CAAiB,SAACP,MAAD,QAAUA,CAAAA,MAAM,CAACA,MAAjB,EAAjB,CAAP,CACH,CA/DL,yDAkE2C,CACnC,MAAO,MAAKa,UAAL,GAAkBN,GAAlB,CAAsB,SAACP,MAAD,QAAU,IAAIF,CAAAA,UAAJ,CAAeE,MAAf,CAAV,EAAtB,CAAP,CACP,CApED,4CAuEqBc,QAvErB,CAuEyE,CACjE,KAAKV,SAAL,CAAeI,IAAf,CAAoBM,QAApB,EACAA,QAAQ,CAAC,KAAKd,MAAN,CAAR,CAAuB;AAC1B,CA1EL,gDA6EuBc,QA7EvB,CA6E2E,CACnE,GAAMC,CAAAA,aAAa,CAAG,KAAKX,SAAL,CAAeY,OAAf,CAAuBF,QAAvB,CAAtB,CACA,GAAIC,aAAa,CAAG,CAAC,CAArB,CAAwB,CACpB,KAAKX,SAAL,CAAea,MAAf,CAAsBF,aAAtB,CAAqC,CAArC,EACH,CACJ,CAlFL,uCAqFqB,gBACT,KAAKX,SAAL,CAAeC,OAAf,CAAuB,SAAAS,QAAQ,QAAIA,CAAAA,QAAQ,CAAC,KAAI,CAACd,MAAN,CAAZ,EAA/B,EACP,CAvFL,+FAUKH,QAVL,+IAmBKA,QAnBL,kJAyBKA,QAzBL,iJAkCKA,QAlCL,+IAyCKA,QAzCL,mJAgDKA,QAhDL,kJAuDKA,QAvDL,8IA4DKA,QA5DL,oJAiEKA,QAjEL,mJAsEKA,QAtEL,+IA4EKA,QA5EL,4IAoFKA,QApFL,2FA0FA,GAAMqB,CAAAA,aAAa,CAAG,GAAIhB,CAAAA,aAAJ,EAAtB,CACA,cAAegB,CAAAA,aAAf","sourcesContent":["import React from 'react';\r\nimport autobind from \"autobind-decorator\";\r\nimport {BaseDialog} from \"@distate/app/src/pages/POA/MCHD_ROOT/domain/model/dialog\";\r\n\r\ninterface DialogModelProps {\r\n    dialog?: React.ReactNode | null;\r\n    isVisible?: boolean | null;\r\n}\r\n\r\nexport class DialogModel {\r\n    public dialog: React.ReactNode | null;\r\n    public isVisible: boolean;\r\n    constructor(dialog: React.ReactNode | null, isVisible: boolean) {\r\n        this.dialog = dialog;\r\n        this.isVisible = isVisible;\r\n    }\r\n    @autobind\r\n    copyWith({\r\n            dialog,\r\n            isVisible,\r\n             }: DialogModelProps): DialogModel {\r\n        return new DialogModel(dialog ?? this.dialog, isVisible ?? this.isVisible);\r\n    }\r\n}\r\n\r\nexport class DialogManager {\r\n    private dialogs: DialogModel[];\r\n    private dialog?: React.ReactNode | null;\r\n    private listeners: Array<(dialog: React.ReactNode | null) => void>;\r\n    constructor(){\r\n        this.listeners = [];\r\n        this.dialogs = [];\r\n        this.dialog = null;\r\n    }\r\n\r\n    @autobind\r\n    public isVisible(): boolean {\r\n        let isVisible = false;\r\n        this.dialogs.forEach((dialog: DialogModel) => {\r\n            isVisible = isVisible || dialog.isVisible;\r\n        })\r\n        return isVisible;\r\n    }\r\n\r\n    @autobind\r\n    public getDialogBy(index: number): DialogModel {\r\n        return this.dialogs[index];\r\n    }\r\n\r\n\r\n    @autobind\r\n    public setIsVisible(isVisible: boolean): void {\r\n        this.dialogs.map((dialog)=>{\r\n            dialog.isVisible = isVisible;\r\n            return dialog;\r\n        })\r\n        // this._isVisible = isVisible;\r\n    }\r\n\r\n    @autobind\r\n    public showDialog(dialog: React.ReactNode) {\r\n        this.dialogs.push(new DialogModel(dialog, true));\r\n        this.dialog = dialog;\r\n        this.notify();\r\n    }\r\n\r\n    @autobind\r\n    public hideDialog() {\r\n        this.dialogs.pop();\r\n        this.dialog = this.getDialog();\r\n        this.notify();\r\n    }\r\n\r\n    @autobind\r\n    public hideAllDialogs() {\r\n        this.dialogs = [];\r\n        this.dialog = null;\r\n        this.notify();\r\n    }\r\n\r\n    @autobind\r\n    public getDialog(): React.ReactNode | null {\r\n        return this.dialogs.length <= 0 ? null : this.dialogs[this.dialogs.length - 1].dialog;\r\n    }\r\n\r\n    @autobind\r\n    public getDialogs(): React.ReactNode[] {\r\n        return this.dialogs.map((dialog)=>dialog.dialog);\r\n    }\r\n\r\n    @autobind\r\n    public getDialogsModel(): BaseDialog[] {\r\n        return this.getDialogs().map((dialog)=>new BaseDialog(dialog));\r\n}\r\n\r\n    @autobind\r\n    public subscribe(callback: (dialog: React.ReactNode | null) => void) {\r\n        this.listeners.push(callback);\r\n        callback(this.dialog); // Immediately notify the subscriber of the current dialog\r\n    }\r\n\r\n    @autobind\r\n    public unsubscribe(callback: (dialog: React.ReactNode | null) => void) {\r\n        const indexToRemove = this.listeners.indexOf(callback);\r\n        if (indexToRemove > -1) {\r\n            this.listeners.splice(indexToRemove, 1);\r\n        }\r\n    }\r\n\r\n    @autobind\r\n    private notify() {\r\n            this.listeners.forEach(callback => callback(this.dialog));\r\n    }\r\n}\r\n\r\nconst dialogManager = new DialogManager();\r\nexport default dialogManager;\r\n"]},"metadata":{},"sourceType":"module"}