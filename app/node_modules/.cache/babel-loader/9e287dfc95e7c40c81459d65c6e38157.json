{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Pagination,PaginationLimit}from'../../../../common/pagination';import{getEmployeeDivisions,changeEmployeeDefaultDivision}from'../../store/actions';import{selectEmployeeDivisionsRows,selectEmployeeDivisionsTotal,selectEmployeeDefaultDivisionId,selectEmployeeId}from'../../store/selectors';import{RadioButton}from'../../../../common/radio-button';/** Подразделения - \"Карточка сотрудника\" */export var EmployeeDivision=function EmployeeDivision(props){var id=props.id;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),offset=_useState2[0],setOffset=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),limit=_useState4[0],setLimit=_useState4[1];var dispatch=useDispatch();var divisions=useSelector(selectEmployeeDivisionsRows);var recordsTotal=useSelector(selectEmployeeDivisionsTotal);var defaultDivisionId=useSelector(selectEmployeeDefaultDivisionId);var employeeId=useSelector(selectEmployeeId);useEffect(function(){id&&dispatch(getEmployeeDivisions({id:id,props:{offset:offset,limit:limit}}));},[dispatch,id,offset,limit]);var onChangeDefaultDivision=function onChangeDefaultDivision(e){var divisionId=e.target.value;dispatch(changeEmployeeDefaultDivision({employeeId:employeeId,divisionId:divisionId}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"header\"},\"\\u041F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u041A\\u041F\\u041F\"),/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},\"\\u043F\\u043E \\u0443\\u043C\\u043E\\u043B\\u0447\\u0430\\u043D\\u0438\\u044E\"))),/*#__PURE__*/React.createElement(\"tbody\",null,divisions===null||divisions===void 0?void 0:divisions.map(function(division){return/*#__PURE__*/React.createElement(\"tr\",{key:division.id},/*#__PURE__*/React.createElement(\"td\",null,division.title),/*#__PURE__*/React.createElement(\"td\",null,division.kpp),/*#__PURE__*/React.createElement(\"td\",{align:\"center\"},/*#__PURE__*/React.createElement(RadioButton,{value:division.id,name:\"division\",defaultChecked:defaultDivisionId===division.id,onChange:onChangeDefaultDivision,id:division.id})));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:2},/*#__PURE__*/React.createElement(PaginationLimit,{setLimit:setLimit,limit:limit})),/*#__PURE__*/React.createElement(\"td\",{colSpan:1},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{setOffset:setOffset,listLength:recordsTotal})))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/company/components/staff/EmployeeDivision.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","Pagination","PaginationLimit","getEmployeeDivisions","changeEmployeeDefaultDivision","selectEmployeeDivisionsRows","selectEmployeeDivisionsTotal","selectEmployeeDefaultDivisionId","selectEmployeeId","RadioButton","EmployeeDivision","props","id","offset","setOffset","limit","setLimit","dispatch","divisions","recordsTotal","defaultDivisionId","employeeId","onChangeDefaultDivision","e","divisionId","target","value","map","division","title","kpp"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Pagination, PaginationLimit } from '../../../../common/pagination';\r\nimport { getEmployeeDivisions, changeEmployeeDefaultDivision } from '../../store/actions';\r\nimport {\r\n  selectEmployeeDivisionsRows,\r\n  selectEmployeeDivisionsTotal,\r\n  selectEmployeeDefaultDivisionId,\r\n  selectEmployeeId\r\n} from '../../store/selectors';\r\nimport { RadioButton } from '../../../../common/radio-button';\r\n\r\ntype Props = {\r\n  id: number;\r\n};\r\n\r\n/** Подразделения - \"Карточка сотрудника\" */\r\nexport const EmployeeDivision = (props: Props) => {\r\n  const { id } = props;\r\n  const [offset, setOffset] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n\r\n  const dispatch = useDispatch();\r\n  const divisions = useSelector(selectEmployeeDivisionsRows);\r\n  const recordsTotal = useSelector(selectEmployeeDivisionsTotal);\r\n  const defaultDivisionId = useSelector(selectEmployeeDefaultDivisionId);\r\n  const employeeId = useSelector(selectEmployeeId);\r\n\r\n  useEffect(() => {\r\n    id && dispatch(getEmployeeDivisions({ id, props: { offset, limit } }));\r\n  }, [dispatch, id, offset, limit]);\r\n\r\n  const onChangeDefaultDivision = (e: any) => {\r\n    const divisionId = e.target.value;\r\n    dispatch(changeEmployeeDefaultDivision({ employeeId, divisionId }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h3 className=\"header\">Подразделения</h3>\r\n\r\n      <table className=\"table\">\r\n        <thead className=\"common-table-head\">\r\n          <tr>\r\n            <td>Наименование</td>\r\n            <td>КПП</td>\r\n            <td align=\"center\">по умолчанию</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {divisions?.map(division => (\r\n            <tr key={division.id}>\r\n              <td>{division.title}</td>\r\n              <td>{division.kpp}</td>\r\n              <td align=\"center\">\r\n                <RadioButton\r\n                  value={division.id}\r\n                  name=\"division\"\r\n                  defaultChecked={defaultDivisionId === division.id}\r\n                  onChange={onChangeDefaultDivision}\r\n                  id={division.id}\r\n                />\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td colSpan={2}>\r\n              <PaginationLimit setLimit={setLimit} limit={limit} />\r\n            </td>\r\n            <td colSpan={1}>\r\n              <div className=\"pagination-right\">\r\n                <Pagination setOffset={setOffset} listLength={recordsTotal} />\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}