{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{useDispatch,useSelector}from'react-redux';import{CustomTable}from'../../../../common/custom-table';import{Input,Select,Autocomplete,Button,ButtonKinds,Icons}from'@distate/components';import{documentFromFileGateway}from'@distate/core/dist/application/create-document/DocumentFromFileGateway';import{getUnformalizedDictonaries,createUnformalized,setUnformalizedError}from'../../store/actions';import{selectDivisionEmployee,selectFlow,selectErrors}from'../../store/selectors';import ReactQuill from'react-quill';import'react-quill/dist/quill.snow.css';import{DatePickerNew}from'../../../../common/date-picker-new';import{AutocompleteRecipient}from'../common/AutocompleteRecipient';export var CreateUnformalized=function CreateUnformalized(){var dispatch=useDispatch();useEffect(function(){dispatch(getUnformalizedDictonaries());return function(){dispatch(setUnformalizedError({}));};},[dispatch]);var divisionEmployeeRows=useSelector(selectDivisionEmployee);var flowRows=useSelector(selectFlow);var errors=useSelector(selectErrors);var uploadFileRef=useRef(null);/** номер */var _useState=useState(),_useState2=_slicedToArray(_useState,2),number=_useState2[0],setNumber=_useState2[1];/** дата */var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];/** заголовок */var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];/** подразделение отправителя */var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),fromDivision=_useState8[0],setFromDivision=_useState8[1];/** получатель */var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),toDivision=_useState10[0],setToDivision=_useState10[1];/** вид документа */var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),flow=_useState12[0],setFlow=_useState12[1];/** тип документа */var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),type=_useState14[0],setType=_useState14[1];/** новый тип документа */var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),newType=_useState16[0],setNewType=_useState16[1];/** файл */var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),file=_useState18[0],setFile=_useState18[1];/** флаг создания документа */var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isCreating=_useState20[0],setIsCreating=_useState20[1];var fromDivisionOptions=divisionEmployeeRows===null||divisionEmployeeRows===void 0?void 0:divisionEmployeeRows.map(function(item){return{value:item.id,label:item.title};});var flowRowsOptions=flowRows===null||flowRows===void 0?void 0:flowRows.map(function(item){return{value:item.id,label:item.title};});useEffect(function(){if(!title&&(file===null||file===void 0?void 0:file.name)){var fileName=file===null||file===void 0?void 0:file.name;var prepareTitle=fileName.substr(0,fileName.lastIndexOf('.'))||fileName;setTitle(prepareTitle);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[file]);/** подразделение отправителя по умолчанию */useEffect(function(){var headDivision=divisionEmployeeRows===null||divisionEmployeeRows===void 0?void 0:divisionEmployeeRows.find(function(index){return index.head;});headDivision&&setFromDivision({value:headDivision.id.toString(),label:headDivision.title});},[divisionEmployeeRows]);function typeDataToOptions(data){return data.map(function(item){return{value:item.id,label:item.title};});}/** загрузка подходящих типов документа */var documentTypeLoad=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(title,callback){var res,_res$rows,rows,hasResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return documentFromFileGateway.getDocumentType({title:title});case 2:res=_context.sent;_res$rows=res.rows,rows=_res$rows===void 0?[]:_res$rows;hasResult=rows.length>0;/** если пустой результат - выводим введенное значение */callback(typeDataToOptions(hasResult?rows:[{title:title,id:undefined}]));case 6:case\"end\":return _context.stop();}}},_callee);}));return function documentTypeLoad(_x,_x2){return _ref.apply(this,arguments);};}();/** изменение типа документа */var onChangeDocumentType=function onChangeDocumentType(e){if(e.value){setType(e);setNewType(undefined);}else{setType(e);setNewType(e.label);}};var rows=[{title:'Неформализованный документ',value:/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(Input,{label:\"\\u041D\\u043E\\u043C\\u0435\\u0440\",placeholder:\"\\u041D\\u043E\\u043C\\u0435\\u0440\",required:true,value:number,onChange:function onChange(e){return setNumber(e.target.value);},width:190,error:errors===null||errors===void 0?void 0:errors.number,errors:errors===null||errors===void 0?void 0:errors.number}),/*#__PURE__*/React.createElement(\"div\",{style:{width:160}},/*#__PURE__*/React.createElement(DatePickerNew,{label:\"\\u0414\\u0430\\u0442\\u0430\",required:true,onChange:function onChange(e){return setDate(e);},placeholder:\"\\u0414\\u0430\\u0442\\u0430\",value:date,error:errors===null||errors===void 0?void 0:errors.date,errors:errors===null||errors===void 0?void 0:errors.date}))),required:true},{title:'Заголовок',value:/*#__PURE__*/React.createElement(Input,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},error:errors===null||errors===void 0?void 0:errors.title,errors:errors===null||errors===void 0?void 0:errors.title}),required:true},{title:'Подразделение отправителя',value:/*#__PURE__*/React.createElement(Select,{value:fromDivision,options:fromDivisionOptions,onChange:function onChange(e){return setFromDivision(e);}}),required:true},{title:'Получатель',value:/*#__PURE__*/React.createElement(AutocompleteRecipient,{setItem:setToDivision,item:toDivision,error:errors===null||errors===void 0?void 0:errors.to,errors:errors===null||errors===void 0?void 0:errors.to,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044F\",qParams:{isActive:1,type:'division'}}),required:true},{title:'Вид документа',value:/*#__PURE__*/React.createElement(Select,{value:flow,onChange:function onChange(e){return setFlow(e);},options:flowRowsOptions,error:errors===null||errors===void 0?void 0:errors.flow,errors:errors===null||errors===void 0?void 0:errors.flow,placeholder:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0438\\u0434 \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u0430\",touched:errors===null||errors===void 0?void 0:errors.flow}),required:true},{title:'Тип документа',value:/*#__PURE__*/React.createElement(Autocomplete,{value:type,loadOptions:documentTypeLoad,onChange:onChangeDocumentType,placeholder:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0438\\u043F\",required:true,error:errors===null||errors===void 0?void 0:errors.type,errors:errors===null||errors===void 0?void 0:errors.type}),required:true,info:'Выберите тип документа из выпадающего списка или оставьте свой '+'вариант, если хотите создать новый тип документа.'},{id:'buttons',value:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"file\",ref:uploadFileRef,hidden:true,onChange:function onChange(e){var _e$target;return setFile((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.files[0]);}}),file?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.LightGreen,icon:/*#__PURE__*/React.createElement(Icons.IconDownload,{fill:\"currentColor\"}),onClick:onDownloadFile},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0440\\u0443\\u0433\\u043E\\u0439 \\u0444\\u0430\\u0439\\u043B\"),/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Danger,icon:/*#__PURE__*/React.createElement(Icons.IconClose,{fill:\"currentColor\"}),onClick:function onClick(){if(uploadFileRef===null||uploadFileRef===void 0?void 0:uploadFileRef.current){uploadFileRef.current.value='';}setFile(undefined);}},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(\"div\",{style:{width:340}},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0444\\u0430\\u0439\\u043B\\u0430 \\xAB\",file===null||file===void 0?void 0:file.name,\"\\xBB \\u043D\\u0430\\u0447\\u043D\\u0435\\u0442\\u0441\\u044F \\u043F\\u043E\\u0441\\u043B\\u0435 \\u043D\\u0430\\u0436\\u0430\\u0442\\u0438\\u044F \\u043A\\u043D\\u043E\\u043F\\u043A\\u0438 \\xAB\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\\xBB\")):/*#__PURE__*/React.createElement(React.Fragment,null,!isCreating&&/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Secondary,icon:/*#__PURE__*/React.createElement(Icons.IconUpload,{fill:\"currentColor\"}),style:{marginRight:5},onClick:onDownloadFile},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\"),isCreating&&/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Secondary,icon:/*#__PURE__*/React.createElement(Icons.IconNa,{fill:\"currentColor\"}),onClick:function onClick(){setIsCreating(false);setConvertedText('');},style:{marginRight:5,width:164}},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"),/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Secondary,icon:/*#__PURE__*/React.createElement(Icons.IconPencilAlt,{fill:\"currentColor\"}),onClick:function onClick(){return setIsCreating(true);},disabled:isCreating},\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0434\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\")))}];function onDownloadFile(){var _uploadFileRef$curren;(_uploadFileRef$curren=uploadFileRef.current)===null||_uploadFileRef$curren===void 0?void 0:_uploadFileRef$curren.click();}var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),convertedText=_useState22[0],setConvertedText=_useState22[1];var onSend=function onSend(){var _toDivision$value,_fromDivision$value,_flow$value;var formData=new FormData();var preparedDate=new Date(date).getTime()/1000;title&&formData.append('title',title);number&&formData.append('number',number);date&&formData.append('date',preparedDate===null||preparedDate===void 0?void 0:preparedDate.toString());toDivision&&formData.append('to[division]',toDivision===null||toDivision===void 0?void 0:(_toDivision$value=toDivision.value)===null||_toDivision$value===void 0?void 0:_toDivision$value.toString());fromDivision&&formData.append('from[division]',fromDivision===null||fromDivision===void 0?void 0:(_fromDivision$value=fromDivision.value)===null||_fromDivision$value===void 0?void 0:_fromDivision$value.toString());flow&&formData.append('flow',flow===null||flow===void 0?void 0:(_flow$value=flow.value)===null||_flow$value===void 0?void 0:_flow$value.toString());if(newType){formData.append('typeTitle',newType);}else{var _value;formData.append('type',type===null||type===void 0?void 0:(_value=type.value)===null||_value===void 0?void 0:_value.toString());}if(isCreating){formData.append('wysiwyg[text]',convertedText);formData.append('wysiwyg[compiled]',convertedText);}else{formData.append('document',file);}dispatch(createUnformalized(formData));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CustomTable,{rows:rows}),isCreating&&/*#__PURE__*/React.createElement(ReactQuill,{theme:\"snow\",value:convertedText,onChange:setConvertedText,style:{marginBottom:20}}),/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Orange,icon:/*#__PURE__*/React.createElement(Icons.IconCheck,{fill:\"currentColor\"}),onClick:onSend},\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/create-document/components/unformalized/CreateUnformalized.tsx"],"names":["React","useState","useEffect","useRef","useDispatch","useSelector","CustomTable","Input","Select","Autocomplete","Button","ButtonKinds","Icons","documentFromFileGateway","getUnformalizedDictonaries","createUnformalized","setUnformalizedError","selectDivisionEmployee","selectFlow","selectErrors","ReactQuill","DatePickerNew","AutocompleteRecipient","CreateUnformalized","dispatch","divisionEmployeeRows","flowRows","errors","uploadFileRef","number","setNumber","date","setDate","title","setTitle","fromDivision","setFromDivision","toDivision","setToDivision","flow","setFlow","type","setType","newType","setNewType","file","setFile","isCreating","setIsCreating","fromDivisionOptions","map","item","value","id","label","flowRowsOptions","name","fileName","prepareTitle","substr","lastIndexOf","headDivision","find","index","head","toString","typeDataToOptions","data","documentTypeLoad","callback","getDocumentType","res","rows","hasResult","length","undefined","onChangeDocumentType","e","display","justifyContent","target","width","required","to","isActive","info","files","LightGreen","onDownloadFile","Danger","current","Secondary","marginRight","setConvertedText","click","convertedText","onSend","formData","FormData","preparedDate","Date","getTime","append","marginBottom","Orange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { CustomTable } from '../../../../common/custom-table';\r\nimport { Input, Select, Autocomplete, Button, ButtonKinds, Icons } from '@distate/components';\r\nimport { documentFromFileGateway } from '@distate/core/dist/application/create-document/DocumentFromFileGateway';\r\nimport {\r\n  getUnformalizedDictonaries,\r\n  createUnformalized,\r\n  setUnformalizedError\r\n} from '../../store/actions';\r\nimport { selectDivisionEmployee, selectFlow, selectErrors } from '../../store/selectors';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport { DatePickerNew } from '../../../../common/date-picker-new';\r\nimport { AutocompleteRecipient } from '../common/AutocompleteRecipient';\r\n\r\ntype SelectItemType = {\r\n  value: string | number;\r\n  label: string;\r\n};\r\n\r\nexport const CreateUnformalized = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect((): any => {\r\n    dispatch(getUnformalizedDictonaries());\r\n    return () => {\r\n      dispatch(setUnformalizedError({}));\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const divisionEmployeeRows = useSelector(selectDivisionEmployee);\r\n  const flowRows = useSelector(selectFlow);\r\n  const errors = useSelector(selectErrors);\r\n\r\n  const uploadFileRef = useRef<any>(null);\r\n\r\n  /** номер */\r\n  const [number, setNumber] = useState<string>();\r\n  /** дата */\r\n  const [date, setDate] = useState();\r\n  /** заголовок */\r\n  const [title, setTitle] = useState<string>();\r\n  /** подразделение отправителя */\r\n  const [fromDivision, setFromDivision] = useState<SelectItemType>();\r\n  /** получатель */\r\n  const [toDivision, setToDivision] = useState<any>();\r\n  /** вид документа */\r\n  const [flow, setFlow] = useState<SelectItemType>();\r\n  /** тип документа */\r\n  const [type, setType] = useState<HTMLSelectElement>();\r\n  /** новый тип документа */\r\n  const [newType, setNewType] = useState<string>();\r\n  /** файл */\r\n  const [file, setFile] = useState<File>();\r\n  /** флаг создания документа */\r\n  const [isCreating, setIsCreating] = useState(false);\r\n\r\n  const fromDivisionOptions = divisionEmployeeRows?.map(item => ({\r\n    value: item.id,\r\n    label: item.title\r\n  }));\r\n\r\n  const flowRowsOptions = flowRows?.map(item => ({\r\n    value: item.id,\r\n    label: item.title\r\n  }));\r\n\r\n  useEffect(() => {\r\n    if (!title && file?.name) {\r\n      const fileName = file?.name;\r\n      const prepareTitle = fileName.substr(0, fileName.lastIndexOf('.')) || fileName;\r\n      setTitle(prepareTitle);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [file]);\r\n\r\n  /** подразделение отправителя по умолчанию */\r\n  useEffect(() => {\r\n    const headDivision = divisionEmployeeRows?.find(index => index.head);\r\n    headDivision &&\r\n      setFromDivision({\r\n        value: headDivision.id.toString(),\r\n        label: headDivision.title\r\n      });\r\n  }, [divisionEmployeeRows]);\r\n\r\n  function typeDataToOptions(data: any[]) {\r\n    return data.map(item => {\r\n      return {\r\n        value: item.id,\r\n        label: item.title\r\n      };\r\n    });\r\n  }\r\n\r\n  /** загрузка подходящих типов документа */\r\n  const documentTypeLoad = async (title: string, callback: any) => {\r\n    const res = await documentFromFileGateway.getDocumentType({ title });\r\n    const { rows = [] } = res;\r\n\r\n    const hasResult = rows.length > 0;\r\n    /** если пустой результат - выводим введенное значение */\r\n    callback(typeDataToOptions(hasResult ? rows : [{ title, id: undefined }]));\r\n  };\r\n\r\n  /** изменение типа документа */\r\n  const onChangeDocumentType = (e: any) => {\r\n    if (e.value) {\r\n      setType(e);\r\n      setNewType(undefined);\r\n    } else {\r\n      setType(e);\r\n      setNewType(e.label);\r\n    }\r\n  };\r\n\r\n  const rows = [\r\n    {\r\n      title: 'Неформализованный документ',\r\n      value: (\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <Input\r\n            label=\"Номер\"\r\n            placeholder=\"Номер\"\r\n            required\r\n            value={number}\r\n            onChange={e => setNumber(e.target.value)}\r\n            width={190}\r\n            error={errors?.number}\r\n            errors={errors?.number}\r\n          />\r\n          <div style={{ width: 160 }}>\r\n            <DatePickerNew\r\n              label=\"Дата\"\r\n              required\r\n              onChange={e => setDate(e)}\r\n              placeholder=\"Дата\"\r\n              value={date}\r\n              error={errors?.date}\r\n              errors={errors?.date}\r\n            />\r\n          </div>\r\n        </div>\r\n      ),\r\n      required: true\r\n    },\r\n    {\r\n      title: 'Заголовок',\r\n      value: (\r\n        <Input\r\n          placeholder=\"Введите заголовок\"\r\n          value={title}\r\n          onChange={e => setTitle(e.target.value)}\r\n          error={errors?.title}\r\n          errors={errors?.title}\r\n        />\r\n      ),\r\n      required: true\r\n    },\r\n    {\r\n      title: 'Подразделение отправителя',\r\n      value: (\r\n        <Select\r\n          value={fromDivision}\r\n          options={fromDivisionOptions}\r\n          onChange={(e: SelectItemType) => setFromDivision(e)}\r\n        />\r\n      ),\r\n      required: true\r\n    },\r\n    {\r\n      title: 'Получатель',\r\n      value: (\r\n        <AutocompleteRecipient\r\n          setItem={setToDivision}\r\n          item={toDivision}\r\n          error={errors?.to}\r\n          errors={errors?.to}\r\n          placeholder=\"Введите получателя\"\r\n          qParams={{ isActive: 1, type: 'division' }}\r\n        />\r\n      ),\r\n      required: true\r\n    },\r\n    {\r\n      title: 'Вид документа',\r\n      value: (\r\n        <Select\r\n          value={flow}\r\n          onChange={(e: SelectItemType) => setFlow(e)}\r\n          options={flowRowsOptions}\r\n          error={errors?.flow}\r\n          errors={errors?.flow}\r\n          placeholder=\"Выберите вид документа\"\r\n          touched={errors?.flow}\r\n        />\r\n      ),\r\n      required: true\r\n    },\r\n    {\r\n      title: 'Тип документа',\r\n      value: (\r\n        <Autocomplete\r\n          value={type}\r\n          loadOptions={documentTypeLoad}\r\n          onChange={onChangeDocumentType}\r\n          placeholder=\"Выберите тип\"\r\n          required\r\n          error={errors?.type}\r\n          errors={errors?.type}\r\n        />\r\n      ),\r\n      required: true,\r\n      info:\r\n        'Выберите тип документа из выпадающего списка или оставьте свой ' +\r\n        'вариант, если хотите создать новый тип документа.'\r\n    },\r\n    {\r\n      id: 'buttons',\r\n      value: (\r\n        <div>\r\n          <input\r\n            type=\"file\"\r\n            ref={uploadFileRef}\r\n            hidden\r\n            onChange={(e: any) => setFile(e.target?.files[0])}\r\n          />\r\n\r\n          {file ? (\r\n            <>\r\n              <Button\r\n                kind={ButtonKinds.LightGreen}\r\n                icon={<Icons.IconDownload fill=\"currentColor\" />}\r\n                onClick={onDownloadFile}\r\n              >\r\n                Загрузить другой файл\r\n              </Button>\r\n              <Button\r\n                kind={ButtonKinds.Danger}\r\n                icon={<Icons.IconClose fill=\"currentColor\" />}\r\n                onClick={() => {\r\n                  if (uploadFileRef?.current) {\r\n                    uploadFileRef.current.value = '';\r\n                  }\r\n                  setFile(undefined);\r\n                }}\r\n              >\r\n                Отменить\r\n              </Button>\r\n              <div style={{ width: 340 }}>\r\n                Загрузка файла «{file?.name}» начнется после нажатия кнопки «Сохранить»\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {!isCreating && (\r\n                <Button\r\n                  kind={ButtonKinds.Secondary}\r\n                  icon={<Icons.IconUpload fill=\"currentColor\" />}\r\n                  style={{ marginRight: 5 }}\r\n                  onClick={onDownloadFile}\r\n                >\r\n                  Загрузить файл\r\n                </Button>\r\n              )}\r\n              {isCreating && (\r\n                <Button\r\n                  kind={ButtonKinds.Secondary}\r\n                  icon={<Icons.IconNa fill=\"currentColor\" />}\r\n                  onClick={() => {\r\n                    setIsCreating(false);\r\n                    setConvertedText('');\r\n                  }}\r\n                  style={{ marginRight: 5, width: 164 }}\r\n                >\r\n                  Отмена\r\n                </Button>\r\n              )}\r\n              <Button\r\n                kind={ButtonKinds.Secondary}\r\n                icon={<Icons.IconPencilAlt fill=\"currentColor\" />}\r\n                onClick={() => setIsCreating(true)}\r\n                disabled={isCreating}\r\n              >\r\n                Создать документ\r\n              </Button>\r\n            </>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  function onDownloadFile() {\r\n    uploadFileRef.current?.click();\r\n  }\r\n\r\n  const [convertedText, setConvertedText] = useState('');\r\n\r\n  const onSend = () => {\r\n    const formData = new FormData();\r\n    const preparedDate = new Date(date!).getTime() / 1000;\r\n\r\n    title && formData.append('title', title);\r\n    number && formData.append('number', number);\r\n    date && formData.append('date', preparedDate?.toString());\r\n    toDivision && formData.append('to[division]', toDivision?.value?.toString());\r\n    fromDivision && formData.append('from[division]', fromDivision?.value?.toString());\r\n    flow && formData.append('flow', flow?.value?.toString());\r\n\r\n    if (newType) {\r\n      formData.append('typeTitle', newType);\r\n    } else {\r\n      formData.append('type', type!?.value?.toString());\r\n    }\r\n\r\n    if (isCreating) {\r\n      formData.append('wysiwyg[text]', convertedText);\r\n      formData.append('wysiwyg[compiled]', convertedText);\r\n    } else {\r\n      formData.append('document', file!);\r\n    }\r\n\r\n    dispatch(createUnformalized(formData));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <CustomTable rows={rows} />\r\n\r\n      {isCreating && (\r\n        <ReactQuill\r\n          theme=\"snow\"\r\n          value={convertedText}\r\n          onChange={setConvertedText}\r\n          style={{ marginBottom: 20 }}\r\n        />\r\n      )}\r\n\r\n      <Button\r\n        kind={ButtonKinds.Orange}\r\n        icon={<Icons.IconCheck fill=\"currentColor\" />}\r\n        onClick={onSend}\r\n      >\r\n        Сохранить\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}