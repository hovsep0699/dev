{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useContext,useCallback}from'react';import{IconInfoAlt,IconStamp,IconDelete}from'@distate/components/dist/icons';import Gateway from'@distate/core/dist/application/autocomplete/AutocompleteGateway';import{FormSchema}from'@distate/components/dist/FormSchema';import get from'lodash.get';import{HTMLText}from'./styles/body';import{HTMLCell,HTMLRow}from'./styles/table';import{HTMLButton,HTMLInput,HTMLAutocomplete}from'./styles/form';import{ModalType}from'./table-universal-correction';import{TableContext}from'./context';var gateway=new Gateway();var optionsTax=[{value:'-1',label:'Без НДС'},{value:'0',label:'0%'},{value:'10',label:'10%'},{value:'18',label:'18%'},{value:'20',label:'20%'},{value:'110',label:'10/110'},{value:'118',label:'18/118'},{value:'120',label:'20/120'}];var dataToSelect=function dataToSelect(data){return data.reduce(function(prev,_ref){var code=_ref.code,title=_ref.title;prev.push({value:code,label:title});return prev;},[]);};var getBeforeValue=function getBeforeValue(value,def){return get(value,'before',def);};var getAfterValue=function getAfterValue(value,def){return get(value,'after',def);};export var BodyRow=function BodyRow(_ref2){var index=_ref2.index,_ref2$data=_ref2.data,data=_ref2$data===void 0?{}:_ref2$data,error=_ref2.error,onRemove=_ref2.onRemove,onChange=_ref2.onChange,onBlur=_ref2.onBlur;var _useContext=useContext(TableContext),setStateModal=_useContext.setStateModal,authCalculated=_useContext.authCalculated;var rowType=data.rowType,infoFields=data.infoFields;var isBeforeDisabled=Boolean(rowType!=='edit');var isDisabled=authCalculated&&Boolean(rowType!=='edit');// fetch\n// ------------------\nvar measurementLoad=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(raw,callback){var _yield$gateway$getMea,_yield$gateway$getMea2,rows;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return gateway.getMeasurementByTitle(raw);case 2:_yield$gateway$getMea=_context.sent;_yield$gateway$getMea2=_yield$gateway$getMea.rows;rows=_yield$gateway$getMea2===void 0?[]:_yield$gateway$getMea2;callback(dataToSelect(rows));case 6:case\"end\":return _context.stop();}}},_callee);}));return function measurementLoad(_x,_x2){return _ref3.apply(this,arguments);};}();// the end: fetch\n// on change\n// ------------------\nvar inputOnBlur=useCallback(function(_ref4){var target=_ref4.target;return onBlur(index,target.name,target.value);},[index,onBlur]);var inputOnChange=useCallback(function(_ref5){var target=_ref5.target;return onChange(index,target.name,target.value);},[index,onChange]);var selectOnChange=useCallback(function(value,name){return onChange(index,name,value);},[index,onChange]);var selectOnChangeTaxRate=useCallback(function(_ref6,name){var value=_ref6.value;return onChange(index,name,value);},[index,onChange]);var schemaOnChange=function schemaOnChange(_ref7){var infoFields=_ref7.infoFields;onChange(index,'infoFields',infoFields);};var isError=function isError(path){return Boolean(get(error,path,[]).length);};// the end: on change\nvar handleOnRemove=function handleOnRemove(){return onRemove(index);};var handleOnOpenStamp=function handleOnOpenStamp(){if(Array.isArray(data.trackings)&&data.trackings.length){setStateModal({type:ModalType.tracking,index:index});}else if(Array.isArray(data.identificationNumbers)){setStateModal({type:ModalType.numbers,index:index});}else{setStateModal({type:ModalType.empty,index:index});}};var handleOnOpenInfo=function handleOnOpenInfo(){return setStateModal({type:ModalType.information,index:index});};var beforeTaxRateValue=optionsTax.find(function(opt){return getBeforeValue(data.taxRate)===opt.value;});var afterTaxRateValue=optionsTax.find(function(opt){return getAfterValue(data.taxRate)===opt.value;});if(!beforeTaxRateValue){beforeTaxRateValue=optionsTax[0];}if(!afterTaxRateValue){afterTaxRateValue=optionsTax[0];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(HTMLRow,null,/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{name:\"title\",value:data.title,onChange:inputOnChange})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLText,null,\"\\u0434\\u043E \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\")),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('measurement.before.errors')},/*#__PURE__*/React.createElement(HTMLAutocomplete,{simple:true,name:\"measurement.before\",value:data===null||data===void 0?void 0:data.measurement.before,disabled:isBeforeDisabled,onChange:selectOnChange,loadOptions:measurementLoad})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('count.before.errors')},/*#__PURE__*/React.createElement(HTMLInput,{type:\"number\",name:\"count.before\",disabled:isBeforeDisabled,value:getBeforeValue(data.count,0),onChange:inputOnChange,onBlur:inputOnBlur})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('price.before.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"price.before\",disabled:isBeforeDisabled,value:getBeforeValue(data.price),onChange:inputOnChange,onBlur:inputOnBlur})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('costBeforeTax.before.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costBeforeTax.before\",value:getBeforeValue(data.costBeforeTax),onChange:inputOnChange,onBlur:inputOnBlur,disabled:isBeforeDisabled||authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('excise.before.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,placeHolder:\"\\u0431\\u0435\\u0437 \\u0430\\u043A\\u0446\\u0438\\u0437\\u0430\",name:\"excise.before\",value:getBeforeValue(data.excise),onChange:inputOnChange,onBlur:inputOnBlur,disabled:isBeforeDisabled})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('taxRate.before.errors')},/*#__PURE__*/React.createElement(HTMLAutocomplete,{simple:true,name:\"taxRate.before\",value:beforeTaxRateValue,onChange:selectOnChangeTaxRate,defaultOptions:optionsTax,disabled:isBeforeDisabled})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('amountOfTax.before.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,value:getBeforeValue(data.amountOfTax),disabled:isBeforeDisabled||authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('costAfterTax.before.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,value:getBeforeValue(data.costAfterTax),disabled:isBeforeDisabled||authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLButton,{solid:true,onClick:handleOnOpenInfo,icon:/*#__PURE__*/React.createElement(IconInfoAlt,null)})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLButton,{solid:true,onClick:handleOnOpenStamp,icon:/*#__PURE__*/React.createElement(IconStamp,null)})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLButton,{solid:true,onClick:handleOnRemove,icon:/*#__PURE__*/React.createElement(IconDelete,null)}))),/*#__PURE__*/React.createElement(HTMLRow,null,/*#__PURE__*/React.createElement(HTMLCell,{rowSpan:3,plain:true}),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLText,null,\"\\u043F\\u043E\\u0441\\u043B\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\")),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('measurement.after.errors')},/*#__PURE__*/React.createElement(HTMLAutocomplete,{simple:true,name:\"measurement.after\",onChange:selectOnChange,value:data===null||data===void 0?void 0:data.measurement.after,loadOptions:measurementLoad})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('count.after.errors')},/*#__PURE__*/React.createElement(HTMLInput,{name:\"count.after\",type:\"number\",value:getAfterValue(data.count,0),onChange:inputOnChange,onBlur:inputOnBlur})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('price.after.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"price.after\",value:getAfterValue(data.price),onChange:inputOnChange,onBlur:inputOnBlur})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('costBeforeTax.after.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costBeforeTax.after\",value:getAfterValue(data.costBeforeTax),onChange:inputOnChange,onBlur:inputOnBlur,disabled:isDisabled||authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('excise.after.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,placeHolder:\"\\u0431\\u0435\\u0437 \\u0430\\u043A\\u0446\\u0438\\u0437\\u0430\",name:\"excise.after\",value:getAfterValue(data.excise),onChange:inputOnChange,onBlur:inputOnBlur})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('taxRate.after.errors')},/*#__PURE__*/React.createElement(HTMLAutocomplete,{simple:true,name:\"taxRate.after\",value:afterTaxRateValue,onChange:selectOnChangeTaxRate,defaultOptions:optionsTax})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('amountOfTax.after.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"amountOfTax.after\",value:getAfterValue(data.amountOfTax),onChange:inputOnChange,onBlur:inputOnBlur,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,{error:isError('costAfterTax.after.errors')},/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costAfterTax.after\",value:getAfterValue(data.costAfterTax),onChange:inputOnChange,onBlur:inputOnBlur,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,{rowSpan:3,colSpan:3,plain:true})),/*#__PURE__*/React.createElement(HTMLRow,null,/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLText,null,\"\\u0443\\u0432\\u0435\\u043B\\u0438\\u0447\\u0435\\u043D\\u0438\\u0435\")),/*#__PURE__*/React.createElement(HTMLCell,{rowSpan:2,colSpan:3,plain:true}),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costBeforeTax.increase\",value:get(data,'costBeforeTax.increase'),onChange:inputOnChange,onBlur:inputOnBlur,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"excise.increase\",value:get(data,'excise.increase'),onChange:inputOnChange,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,{rowSpan:2,plain:true}),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"amountOfTax.increase\",value:get(data,'amountOfTax.increase'),onChange:inputOnChange,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costAfterTax.increase\",value:get(data,'costAfterTax.increase'),onChange:inputOnChange,disabled:authCalculated}))),/*#__PURE__*/React.createElement(HTMLRow,null,/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLText,null,\"\\u0443\\u043C\\u0435\\u043D\\u044C\\u0448\\u0435\\u043D\\u0438\\u0435\")),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costBeforeTax.decrease\",value:get(data,'costBeforeTax.decrease'),onChange:inputOnChange,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"excise.decrease\",value:get(data,'excise.decrease'),onChange:inputOnChange,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"amountOfTax.decrease\",value:get(data,'amountOfTax.decrease'),onChange:inputOnChange,disabled:authCalculated})),/*#__PURE__*/React.createElement(HTMLCell,null,/*#__PURE__*/React.createElement(HTMLInput,{float:2,name:\"costAfterTax.decrease\",value:get(data,'costAfterTax.decrease'),onChange:inputOnChange,disabled:authCalculated}))),/*#__PURE__*/React.createElement(HTMLRow,null,/*#__PURE__*/React.createElement(HTMLCell,{colSpan:13},/*#__PURE__*/React.createElement(HTMLText,null,/*#__PURE__*/React.createElement(FormSchema,{formData:{infoFields:infoFields},onChange:schemaOnChange,children:null,schema:{type:'object',properties:{infoFields:{type:'array',items:{type:'object',properties:{attribute:{type:'string'},value:{type:'string'}}}}}},uiSchema:{'ui:label':{infoFields:'Доп. сведения'}}})))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/common/TableUniversalCorrection/body.row.tsx"],"names":["React","useContext","useCallback","IconInfoAlt","IconStamp","IconDelete","Gateway","FormSchema","get","HTMLText","HTMLCell","HTMLRow","HTMLButton","HTMLInput","HTMLAutocomplete","ModalType","TableContext","gateway","optionsTax","value","label","dataToSelect","data","reduce","prev","code","title","push","getBeforeValue","def","getAfterValue","BodyRow","index","error","onRemove","onChange","onBlur","setStateModal","authCalculated","rowType","infoFields","isBeforeDisabled","Boolean","isDisabled","measurementLoad","raw","callback","getMeasurementByTitle","rows","inputOnBlur","target","name","inputOnChange","selectOnChange","selectOnChangeTaxRate","schemaOnChange","isError","path","length","handleOnRemove","handleOnOpenStamp","Array","isArray","trackings","type","tracking","identificationNumbers","numbers","empty","handleOnOpenInfo","information","beforeTaxRateValue","find","opt","taxRate","afterTaxRateValue","measurement","before","count","price","costBeforeTax","excise","amountOfTax","costAfterTax","after","properties","items","attribute"],"mappings":"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","sourcesContent":["import React, { FC, useContext, useCallback } from 'react';\r\nimport { IconInfoAlt, IconStamp, IconDelete } from '@distate/components/dist/icons';\r\nimport Gateway from '@distate/core/dist/application/autocomplete/AutocompleteGateway';\r\nimport { FormSchema } from '@distate/components/dist/FormSchema';\r\nimport get from 'lodash.get';\r\n\r\nimport { HTMLText } from './styles/body';\r\nimport { HTMLCell, HTMLRow } from './styles/table';\r\nimport { HTMLButton, HTMLInput, HTMLAutocomplete } from './styles/form';\r\nimport { ModalType } from './table-universal-correction';\r\nimport { TableContext } from './context';\r\n\r\nconst gateway = new Gateway();\r\n\r\nconst optionsTax = [\r\n  { value: '-1', label: 'Без НДС' },\r\n  { value: '0', label: '0%' },\r\n  { value: '10', label: '10%' },\r\n  { value: '18', label: '18%' },\r\n  { value: '20', label: '20%' },\r\n  { value: '110', label: '10/110' },\r\n  { value: '118', label: '18/118' },\r\n  { value: '120', label: '20/120' }\r\n];\r\n\r\nconst dataToSelect = (data: any[]) => {\r\n  return data.reduce((prev, { code, title }) => {\r\n    prev.push({ value: code, label: title });\r\n    return prev;\r\n  }, []);\r\n};\r\n\r\nconst getBeforeValue = (value: any, def?: any) => get(value, 'before', def);\r\nconst getAfterValue = (value: any, def?: any) => get(value, 'after', def);\r\n\r\ntype ChangeInput = React.ChangeEvent<HTMLInputElement>;\r\n\r\nexport interface BodyRowProps {\r\n  index: number;\r\n  data?: Record<string, any>;\r\n  error?: Record<string, any>;\r\n  onRemove: (index: number) => void;\r\n  onChange: (index: number, name: string, value: unknown) => void;\r\n  onBlur: (index: number, name: string, value: unknown) => void;\r\n}\r\n\r\nexport const BodyRow: FC<BodyRowProps> = ({\r\n  index,\r\n  data = {},\r\n  error,\r\n  onRemove,\r\n  onChange,\r\n  onBlur\r\n}) => {\r\n  const { setStateModal, authCalculated } = useContext(TableContext);\r\n  const { rowType, infoFields } = data;\r\n\r\n  const isBeforeDisabled = Boolean(rowType !== 'edit');\r\n  const isDisabled = authCalculated && Boolean(rowType !== 'edit');\r\n\r\n  // fetch\r\n  // ------------------\r\n  const measurementLoad = async (raw: string, callback: any) => {\r\n    const { rows = [] } = await gateway.getMeasurementByTitle(raw);\r\n    callback(dataToSelect(rows));\r\n  };\r\n  // the end: fetch\r\n\r\n  // on change\r\n  // ------------------\r\n  const inputOnBlur = useCallback(\r\n    ({ target }: ChangeInput) => onBlur(index, target.name, target.value),\r\n    [index, onBlur]\r\n  );\r\n\r\n  const inputOnChange = useCallback(\r\n    ({ target }: ChangeInput) => onChange(index, target.name, target.value),\r\n    [index, onChange]\r\n  );\r\n\r\n  const selectOnChange = useCallback((value: any, name: any) => onChange(index, name, value), [\r\n    index,\r\n    onChange\r\n  ]);\r\n\r\n  const selectOnChangeTaxRate = useCallback(({ value }, name) => onChange(index, name, value), [\r\n    index,\r\n    onChange\r\n  ]);\r\n\r\n  const schemaOnChange = ({ infoFields }: any) => {\r\n    onChange(index, 'infoFields', infoFields);\r\n  };\r\n\r\n  const isError = (path: string) => Boolean(get(error, path, []).length);\r\n\r\n  // the end: on change\r\n\r\n  const handleOnRemove = () => onRemove(index);\r\n  const handleOnOpenStamp = () => {\r\n    if (Array.isArray(data.trackings) && data.trackings.length) {\r\n      setStateModal({ type: ModalType.tracking, index });\r\n    } else if (Array.isArray(data.identificationNumbers)) {\r\n      setStateModal({ type: ModalType.numbers, index });\r\n    } else {\r\n      setStateModal({ type: ModalType.empty, index });\r\n    }\r\n  };\r\n  const handleOnOpenInfo = () => setStateModal({ type: ModalType.information, index });\r\n\r\n  let beforeTaxRateValue = optionsTax.find(opt => getBeforeValue(data.taxRate) === opt.value);\r\n  let afterTaxRateValue = optionsTax.find(opt => getAfterValue(data.taxRate) === opt.value);\r\n\r\n  if (!beforeTaxRateValue) {\r\n    beforeTaxRateValue = optionsTax[0];\r\n  }\r\n\r\n  if (!afterTaxRateValue) {\r\n    afterTaxRateValue = optionsTax[0];\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <HTMLRow>\r\n        <HTMLCell>\r\n          <HTMLInput name=\"title\" value={data.title} onChange={inputOnChange} />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLText>до изменения</HTMLText>\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('measurement.before.errors')}>\r\n          <HTMLAutocomplete\r\n            simple\r\n            name=\"measurement.before\"\r\n            value={data?.measurement.before}\r\n            disabled={isBeforeDisabled}\r\n            onChange={selectOnChange}\r\n            loadOptions={measurementLoad}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('count.before.errors')}>\r\n          <HTMLInput\r\n            type=\"number\"\r\n            name=\"count.before\"\r\n            disabled={isBeforeDisabled}\r\n            value={getBeforeValue(data.count, 0)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('price.before.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"price.before\"\r\n            disabled={isBeforeDisabled}\r\n            value={getBeforeValue(data.price)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('costBeforeTax.before.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costBeforeTax.before\"\r\n            value={getBeforeValue(data.costBeforeTax)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n            disabled={isBeforeDisabled || authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('excise.before.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            placeHolder=\"без акциза\"\r\n            name=\"excise.before\"\r\n            value={getBeforeValue(data.excise)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n            disabled={isBeforeDisabled}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('taxRate.before.errors')}>\r\n          <HTMLAutocomplete\r\n            simple\r\n            name=\"taxRate.before\"\r\n            value={beforeTaxRateValue}\r\n            onChange={selectOnChangeTaxRate}\r\n            defaultOptions={optionsTax}\r\n            disabled={isBeforeDisabled}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('amountOfTax.before.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            value={getBeforeValue(data.amountOfTax)}\r\n            disabled={isBeforeDisabled || authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('costAfterTax.before.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            value={getBeforeValue(data.costAfterTax)}\r\n            disabled={isBeforeDisabled || authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLButton solid onClick={handleOnOpenInfo} icon={<IconInfoAlt />} />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLButton solid onClick={handleOnOpenStamp} icon={<IconStamp />} />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLButton solid onClick={handleOnRemove} icon={<IconDelete />} />\r\n        </HTMLCell>\r\n      </HTMLRow>\r\n\r\n      <HTMLRow>\r\n        <HTMLCell rowSpan={3} plain></HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLText>после изменения</HTMLText>\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('measurement.after.errors')}>\r\n          <HTMLAutocomplete\r\n            simple\r\n            name=\"measurement.after\"\r\n            onChange={selectOnChange}\r\n            value={data?.measurement.after}\r\n            loadOptions={measurementLoad}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('count.after.errors')}>\r\n          <HTMLInput\r\n            name=\"count.after\"\r\n            type=\"number\"\r\n            value={getAfterValue(data.count, 0)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('price.after.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"price.after\"\r\n            value={getAfterValue(data.price)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('costBeforeTax.after.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costBeforeTax.after\"\r\n            value={getAfterValue(data.costBeforeTax)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n            disabled={isDisabled || authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('excise.after.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            placeHolder=\"без акциза\"\r\n            name=\"excise.after\"\r\n            value={getAfterValue(data.excise)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('taxRate.after.errors')}>\r\n          <HTMLAutocomplete\r\n            simple\r\n            name=\"taxRate.after\"\r\n            value={afterTaxRateValue}\r\n            onChange={selectOnChangeTaxRate}\r\n            defaultOptions={optionsTax}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('amountOfTax.after.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"amountOfTax.after\"\r\n            value={getAfterValue(data.amountOfTax)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell error={isError('costAfterTax.after.errors')}>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costAfterTax.after\"\r\n            value={getAfterValue(data.costAfterTax)}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell rowSpan={3} colSpan={3} plain></HTMLCell>\r\n      </HTMLRow>\r\n\r\n      <HTMLRow>\r\n        <HTMLCell>\r\n          <HTMLText>увеличение</HTMLText>\r\n        </HTMLCell>\r\n        <HTMLCell rowSpan={2} colSpan={3} plain></HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costBeforeTax.increase\"\r\n            value={get(data, 'costBeforeTax.increase')}\r\n            onChange={inputOnChange}\r\n            onBlur={inputOnBlur}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"excise.increase\"\r\n            value={get(data, 'excise.increase')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell rowSpan={2} plain></HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"amountOfTax.increase\"\r\n            value={get(data, 'amountOfTax.increase')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costAfterTax.increase\"\r\n            value={get(data, 'costAfterTax.increase')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n      </HTMLRow>\r\n\r\n      <HTMLRow>\r\n        <HTMLCell>\r\n          <HTMLText>уменьшение</HTMLText>\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costBeforeTax.decrease\"\r\n            value={get(data, 'costBeforeTax.decrease')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"excise.decrease\"\r\n            value={get(data, 'excise.decrease')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"amountOfTax.decrease\"\r\n            value={get(data, 'amountOfTax.decrease')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n        <HTMLCell>\r\n          <HTMLInput\r\n            float={2}\r\n            name=\"costAfterTax.decrease\"\r\n            value={get(data, 'costAfterTax.decrease')}\r\n            onChange={inputOnChange}\r\n            disabled={authCalculated}\r\n          />\r\n        </HTMLCell>\r\n      </HTMLRow>\r\n\r\n      <HTMLRow>\r\n        <HTMLCell colSpan={13}>\r\n          <HTMLText>\r\n            <FormSchema\r\n              formData={{ infoFields }}\r\n              onChange={schemaOnChange}\r\n              children={null}\r\n              schema={{\r\n                type: 'object',\r\n                properties: {\r\n                  infoFields: {\r\n                    type: 'array',\r\n                    items: {\r\n                      type: 'object',\r\n                      properties: {\r\n                        attribute: { type: 'string' },\r\n                        value: { type: 'string' }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }}\r\n              uiSchema={{\r\n                'ui:label': {\r\n                  infoFields: 'Доп. сведения'\r\n                }\r\n              }}\r\n            />\r\n          </HTMLText>\r\n        </HTMLCell>\r\n      </HTMLRow>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}