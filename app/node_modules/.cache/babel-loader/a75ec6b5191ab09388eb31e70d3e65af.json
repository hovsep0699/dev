{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useSelector,useDispatch}from'react-redux';import{Button,Icons}from'@distate/components';import{legalEntityInfo as legalEntityInfoSelector,legalEntityInfoAdded}from'../../../store/selectors';import{RelationStatus}from'../../../helpers/contractors.typings';import{addLegalEntityToGroup}from'../../../store/actions';import{Pagination}from'../../../../../common/pagination';import{LegalEntityFilter}from'./filters';import{getExternalTypeToString}from'../../../../../helpers/heplers';import{TruncateText}from'../../../../../common/truncate-text';export var SubModalLegalEntityTable=function SubModalLegalEntityTable(_ref){var _useSelector;var groupId=_ref.groupId;var dispatch=useDispatch();var legalEntityInfo=useSelector(legalEntityInfoSelector);var legalEntityList=(legalEntityInfo===null||legalEntityInfo===void 0?void 0:legalEntityInfo.rows)||[];var isEmty=legalEntityList.length===0;var legalEntityAddedOffset=(_useSelector=useSelector(legalEntityInfoAdded))===null||_useSelector===void 0?void 0:_useSelector.offset;var _React$useState=React.useState(legalEntityAddedOffset),_React$useState2=_slicedToArray(_React$useState,2),offset=_React$useState2[0],setOffset=_React$useState2[1];var onAdd=function onAdd(contractorId){dispatch(addLegalEntityToGroup({groupId:groupId,contractorId:contractorId,offset:offset}));};return/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0418\\u041D\\u041D\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,isEmty&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043F\\u0443\\u0441\\u0442.\"),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null)),!isEmty&&legalEntityList.map(function(item){var externalType=item.externalType,externalOperator=item.externalOperator,network=item.network,id=item.id,name=item.name,status=item.status,inn=item.inn,contractorId=item.contractorId;var typeToString=getExternalTypeToString(externalType,externalOperator,network);return/*#__PURE__*/React.createElement(\"tr\",{key:id},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(TruncateText,{text:name+typeToString})),/*#__PURE__*/React.createElement(\"td\",null,status===RelationStatus.Active?'активный':'заблокированный'),/*#__PURE__*/React.createElement(\"td\",null,inn),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconPlus,{fill:\"currentColor\"}),onClick:function onClick(){return onAdd(contractorId);}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:4},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(LegalEntityFilter,{id:groupId}),/*#__PURE__*/React.createElement(Pagination,{listLength:legalEntityInfo===null||legalEntityInfo===void 0?void 0:legalEntityInfo.recordsTotal,setOffset:setOffset}))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/groups/modal/SubModalLegalEntityTable.tsx"],"names":["React","useSelector","useDispatch","Button","Icons","legalEntityInfo","legalEntityInfoSelector","legalEntityInfoAdded","RelationStatus","addLegalEntityToGroup","Pagination","LegalEntityFilter","getExternalTypeToString","TruncateText","SubModalLegalEntityTable","groupId","dispatch","legalEntityList","rows","isEmty","length","legalEntityAddedOffset","offset","useState","setOffset","onAdd","contractorId","map","item","externalType","externalOperator","network","id","name","status","inn","typeToString","Active","recordsTotal"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { Button, Icons } from '@distate/components';\r\n\r\nimport {\r\n  legalEntityInfo as legalEntityInfoSelector,\r\n  legalEntityInfoAdded\r\n} from '../../../store/selectors';\r\nimport { RelationStatus } from '../../../helpers/contractors.typings';\r\nimport { addLegalEntityToGroup } from '../../../store/actions';\r\nimport { Pagination } from '../../../../../common/pagination';\r\nimport { LegalEntityFilter } from './filters';\r\nimport { getExternalTypeToString } from '../../../../../helpers/heplers';\r\nimport { TruncateText } from '../../../../../common/truncate-text';\r\n\r\nexport const SubModalLegalEntityTable = ({ groupId }: { groupId: number }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const legalEntityInfo = useSelector(legalEntityInfoSelector);\r\n  const legalEntityList = legalEntityInfo?.rows || [];\r\n  const isEmty = legalEntityList.length === 0;\r\n\r\n  const legalEntityAddedOffset = useSelector(legalEntityInfoAdded)?.offset;\r\n\r\n  const [offset, setOffset] = React.useState(legalEntityAddedOffset);\r\n\r\n  const onAdd = (contractorId: number) => {\r\n    dispatch(addLegalEntityToGroup({ groupId, contractorId, offset }));\r\n  };\r\n\r\n  return (\r\n    <table className=\"table\">\r\n      <thead className=\"common-table-head\">\r\n        <tr>\r\n          <td>Название</td>\r\n          <td>Статус</td>\r\n          <td>ИНН</td>\r\n          <td></td>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {isEmty && (\r\n          <tr>\r\n            <td>Список пуст.</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n          </tr>\r\n        )}\r\n        {!isEmty &&\r\n          legalEntityList.map(item => {\r\n            const {\r\n              externalType,\r\n              externalOperator,\r\n              network,\r\n              id,\r\n              name,\r\n              status,\r\n              inn,\r\n              contractorId\r\n            } = item;\r\n            const typeToString = getExternalTypeToString(externalType, externalOperator, network);\r\n\r\n            return (\r\n              <tr key={id}>\r\n                <td>\r\n                  <TruncateText text={name + typeToString} />\r\n                </td>\r\n                <td>{status === RelationStatus.Active ? 'активный' : 'заблокированный'}</td>\r\n                <td>{inn}</td>\r\n                <td>\r\n                  <Button\r\n                    icon={<Icons.IconPlus fill=\"currentColor\" />}\r\n                    onClick={() => onAdd(contractorId)}\r\n                  >\r\n                    Добавить\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colSpan={4}>\r\n            <div className=\"pagination-right\">\r\n              <LegalEntityFilter id={groupId} />\r\n              <Pagination listLength={legalEntityInfo?.recordsTotal} setOffset={setOffset} />\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}