{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useSelector,useDispatch}from'react-redux';import{Button}from'@distate/components';import'./style.css';import{selectSearch}from'../../../store/selectors';import{DestinationType,RelationStatus}from'../../../helpers/contractors.typings';import{createPersonInvitation,getFoundPerson}from'../../../store/actions';import{Pagination}from'../../../../../common/pagination';export var PersonSearchTable=function PersonSearchTable(){var _useSelector,_useSelector$person,_selectSearchState$pe2;var dispatch=useDispatch();var selectSearchState=useSelector(selectSearch);var personList=((_useSelector=useSelector(selectSearch))===null||_useSelector===void 0?void 0:(_useSelector$person=_useSelector.person)===null||_useSelector$person===void 0?void 0:_useSelector$person.rows)||[];var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),offset=_React$useState2[0],setOffset=_React$useState2[1];/** запись в стор значения пагинации*/React.useEffect(function(){var _selectSearchState$pe;offset&&dispatch(getFoundPerson(_objectSpread(_objectSpread({},selectSearchState===null||selectSearchState===void 0?void 0:(_selectSearchState$pe=selectSearchState.person)===null||_selectSearchState$pe===void 0?void 0:_selectSearchState$pe.searchParams),{},{offset:offset})));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[dispatch,offset]);var _onClick=function onClick(args){dispatch(createPersonInvitation(args));};return/*#__PURE__*/React.createElement(\"table\",{className:\"table user-search-table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0418\\u043C\\u044F\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0421\\u041D\\u0418\\u041B\\u0421\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,personList.map(function(item){return/*#__PURE__*/React.createElement(\"tr\",{key:item.id},/*#__PURE__*/React.createElement(\"td\",null,item.name),/*#__PURE__*/React.createElement(\"td\",null,item.surname),/*#__PURE__*/React.createElement(\"td\",null,item.patronymic),/*#__PURE__*/React.createElement(\"td\",null,item.socialNumber),/*#__PURE__*/React.createElement(\"td\",null,item.relationStatus!==RelationStatus.Active?/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _onClick({personID:+item.id,type:DestinationType.Local});}},\"\\u041F\\u0440\\u0438\\u0433\\u043B\\u0430\\u0441\\u0438\\u0442\\u044C\"):'уже является контрагентом'));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:5},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{listLength:selectSearchState===null||selectSearchState===void 0?void 0:(_selectSearchState$pe2=selectSearchState.person)===null||_selectSearchState$pe2===void 0?void 0:_selectSearchState$pe2.recordsTotal,setOffset:setOffset}))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/invite-contractor/tables/PersonSearchTable.tsx"],"names":["React","useSelector","useDispatch","Button","selectSearch","DestinationType","RelationStatus","createPersonInvitation","getFoundPerson","Pagination","PersonSearchTable","dispatch","selectSearchState","personList","person","rows","useState","offset","setOffset","useEffect","searchParams","onClick","args","map","item","id","name","surname","patronymic","socialNumber","relationStatus","Active","personID","type","Local","recordsTotal"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,OAASC,MAAT,KAAuB,qBAAvB,CAEA,MAAO,aAAP,CACA,OAASC,YAAT,KAA6B,0BAA7B,CACA,OAASC,eAAT,CAA0BC,cAA1B,KAAgD,sCAAhD,CACA,OAASC,sBAAT,CAAiCC,cAAjC,KAAuD,wBAAvD,CACA,OAASC,UAAT,KAA2B,kCAA3B,CAEA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,6DACrC,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,CAAAA,iBAAiB,CAAGX,WAAW,CAACG,YAAD,CAArC,CACA,GAAMS,CAAAA,UAAU,CAAG,eAAAZ,WAAW,CAACG,YAAD,CAAX,yEAA2BU,MAA3B,kEAAmCC,IAAnC,GAA2C,EAA9D,CAHqC,oBAITf,KAAK,CAACgB,QAAN,EAJS,oDAI9BC,MAJ8B,qBAItBC,SAJsB,qBAMrC,sCACAlB,KAAK,CAACmB,SAAN,CAAgB,UAAM,2BACpBF,MAAM,EAAIN,QAAQ,CAACH,cAAc,gCAAMI,iBAAN,SAAMA,iBAAN,wCAAMA,iBAAiB,CAAEE,MAAzB,gDAAM,sBAA2BM,YAAjC,MAA+CH,MAAM,CAANA,MAA/C,GAAf,CAAlB,CACA;AACD,CAHD,CAGG,CAACN,QAAD,CAAWM,MAAX,CAHH,EASA,GAAMI,CAAAA,QAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,CAAyB,CACvCX,QAAQ,CAACJ,sBAAsB,CAACe,IAAD,CAAvB,CAAR,CACD,CAFD,CAIA,mBACE,6BAAO,SAAS,CAAC,yBAAjB,eACE,6BAAO,SAAS,CAAC,mBAAjB,eACE,2CACE,mDADF,cAEE,2EAFF,cAGE,iFAHF,cAIE,+DAJF,cAKE,8BALF,CADF,CADF,cAUE,iCACGT,UAAU,CAACU,GAAX,CAAe,SAAAC,IAAI,qBAClB,0BAAI,GAAG,CAAEA,IAAI,CAACC,EAAd,eACE,8BAAKD,IAAI,CAACE,IAAV,CADF,cAEE,8BAAKF,IAAI,CAACG,OAAV,CAFF,cAGE,8BAAKH,IAAI,CAACI,UAAV,CAHF,cAIE,8BAAKJ,IAAI,CAACK,YAAV,CAJF,cAKE,8BACGL,IAAI,CAACM,cAAL,GAAwBxB,cAAc,CAACyB,MAAvC,cACC,oBAAC,MAAD,EACE,OAAO,CAAE,yBAAMV,CAAAA,QAAO,CAAC,CAAEW,QAAQ,CAAE,CAACR,IAAI,CAACC,EAAlB,CAAsBQ,IAAI,CAAE5B,eAAe,CAAC6B,KAA5C,CAAD,CAAb,EADX,iEADD,CAOC,2BARJ,CALF,CADkB,EAAnB,CADH,CAVF,cA+BE,8CACE,2CACE,0BAAI,OAAO,CAAE,CAAb,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,oBAAC,UAAD,EACE,UAAU,CAAEtB,iBAAF,SAAEA,iBAAF,yCAAEA,iBAAiB,CAAEE,MAArB,iDAAE,uBAA2BqB,YADzC,CAEE,SAAS,CAAEjB,SAFb,EADF,CADF,CADF,CADF,CA/BF,CADF,CA8CD,CAlEM","sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { Button } from '@distate/components';\r\n\r\nimport './style.css';\r\nimport { selectSearch } from '../../../store/selectors';\r\nimport { DestinationType, RelationStatus } from '../../../helpers/contractors.typings';\r\nimport { createPersonInvitation, getFoundPerson } from '../../../store/actions';\r\nimport { Pagination } from '../../../../../common/pagination';\r\n\r\nexport const PersonSearchTable = () => {\r\n  const dispatch = useDispatch();\r\n  const selectSearchState = useSelector(selectSearch);\r\n  const personList = useSelector(selectSearch)?.person?.rows || [];\r\n  const [offset, setOffset] = React.useState();\r\n\r\n  /** запись в стор значения пагинации*/\r\n  React.useEffect(() => {\r\n    offset && dispatch(getFoundPerson({ ...selectSearchState?.person?.searchParams, offset }));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, offset]);\r\n\r\n  type PersonPayload = {\r\n    type: DestinationType;\r\n    personID: number;\r\n  };\r\n  const onClick = (args: PersonPayload) => {\r\n    dispatch(createPersonInvitation(args));\r\n  };\r\n\r\n  return (\r\n    <table className=\"table user-search-table\">\r\n      <thead className=\"common-table-head\">\r\n        <tr>\r\n          <td>Имя</td>\r\n          <td>Фамилия</td>\r\n          <td>Отчество</td>\r\n          <td>СНИЛС</td>\r\n          <td></td>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {personList.map(item => (\r\n          <tr key={item.id}>\r\n            <td>{item.name}</td>\r\n            <td>{item.surname}</td>\r\n            <td>{item.patronymic}</td>\r\n            <td>{item.socialNumber}</td>\r\n            <td>\r\n              {item.relationStatus !== RelationStatus.Active ? (\r\n                <Button\r\n                  onClick={() => onClick({ personID: +item.id, type: DestinationType.Local })}\r\n                >\r\n                  Пригласить\r\n                </Button>\r\n              ) : (\r\n                'уже является контрагентом'\r\n              )}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colSpan={5}>\r\n            <div className=\"pagination-right\">\r\n              <Pagination\r\n                listLength={selectSearchState?.person?.recordsTotal}\r\n                setOffset={setOffset}\r\n              />\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}