{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Button,ButtonKinds,Icons,Dropdown,Input,Select}from'@distate/components';import{RelationStatus,DestinationType}from'../../helpers/contractors.typings';import{useDispatch,useSelector}from'react-redux';import{getLegalEntityContractors,getExternalOperators}from'../../store/actions';import{externalOperators}from'../../store/selectors';export var LegalEntityTools=function LegalEntityTools(){var _useSelector;var _useState=useState(),_useState2=_slicedToArray(_useState,2),inn=_useState2[0],setInn=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),operator=_useState4[0],setOperator=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),externalType=_useState6[0],setExternalType=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),status=_useState8[0],setStatus=_useState8[1];var dispatch=useDispatch();var onClearForm=function onClearForm(){setInn(undefined);setOperator(undefined);setExternalType(undefined);setStatus(undefined);};React.useEffect(function(){dispatch(getExternalOperators());},[dispatch]);var operators=((_useSelector=useSelector(externalOperators))===null||_useSelector===void 0?void 0:_useSelector.rows)||[];var onFilter=function onFilter(){var filterParams={inn:inn,externalOperator:operator===null||operator===void 0?void 0:operator.value,externalType:(externalType===null||externalType===void 0?void 0:externalType.value)&&[externalType===null||externalType===void 0?void 0:externalType.value],status:status===null||status===void 0?void 0:status.value};dispatch(getLegalEntityContractors(filterParams));};return/*#__PURE__*/React.createElement(\"div\",{className:\"contractor-tools\"},/*#__PURE__*/React.createElement(Dropdown,{widthRestrict:true,trigger:/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconSearch,{fill:\"currentColor\"})},\"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\")},/*#__PURE__*/React.createElement(\"div\",{className:\"contractor-dropdown-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-header\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \\u043A\\u043E\\u043D\\u0442\\u0440\\u0430\\u0433\\u0435\\u043D\\u0442\\u0430\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Input,{label:\"\\u0418\\u041D\\u041D\",name:\"inn\",onChange:function onChange(e){return setInn(e.target.value);},value:inn}),/*#__PURE__*/React.createElement(Select,{label:\"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440\",name:\"operator\",options:operators.map(function(item){return{value:item.code,label:item.name};}),onChange:function onChange(e){return setOperator(e);},value:operator}),/*#__PURE__*/React.createElement(Select,{label:\"\\u0422\\u0438\\u043F\",name:\"externalExternalType\",options:[{value:DestinationType.Local,label:'Локальный'},{value:DestinationType.Roaming,label:'Роуминг'},{value:DestinationType.LoaclRoaming,label:'Локальный Роуминг'},{value:DestinationType.Hub1c,label:'1С-ЭДО'}],onChange:function onChange(e){return setExternalType(e);},value:externalType}),/*#__PURE__*/React.createElement(Select,{label:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\",name:\"status\",options:[{value:RelationStatus.Active,label:'Активен'},{value:RelationStatus.Blocked,label:'Заблокирован'}],onChange:function onChange(e){return setStatus(e);},value:status})),/*#__PURE__*/React.createElement(\"div\",{className:\"contractor-dropdown-buttons\"},/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconClose,{fill:\"currentColor\"}),fullWidth:true,onClick:onClearForm},\"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconSearch,{fill:\"currentColor\"}),kind:ButtonKinds.Secondary,fullWidth:true,onClick:onFilter},\"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\")))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/contractors/components/legal-entity/LegalEntityTools.tsx"],"names":["React","useState","Button","ButtonKinds","Icons","Dropdown","Input","Select","RelationStatus","DestinationType","useDispatch","useSelector","getLegalEntityContractors","getExternalOperators","externalOperators","LegalEntityTools","inn","setInn","operator","setOperator","externalType","setExternalType","status","setStatus","dispatch","onClearForm","undefined","useEffect","operators","rows","onFilter","filterParams","externalOperator","value","e","target","map","item","code","label","name","Local","Roaming","LoaclRoaming","Hub1c","Active","Blocked","Secondary"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, ButtonKinds, Icons, Dropdown, Input, Select } from '@distate/components';\r\nimport { RelationStatus, DestinationType } from '../../helpers/contractors.typings';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getLegalEntityContractors, getExternalOperators } from '../../store/actions';\r\nimport { externalOperators } from '../../store/selectors';\r\n\r\nexport const LegalEntityTools = () => {\r\n  const [inn, setInn] = useState<string | undefined>();\r\n  const [operator, setOperator] = useState<HTMLSelectElement>();\r\n  const [externalType, setExternalType] = useState<HTMLSelectElement>();\r\n  const [status, setStatus] = useState<HTMLSelectElement>();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onClearForm = () => {\r\n    setInn(undefined);\r\n    setOperator(undefined);\r\n    setExternalType(undefined);\r\n    setStatus(undefined);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    dispatch(getExternalOperators());\r\n  }, [dispatch]);\r\n\r\n  const operators = useSelector(externalOperators)?.rows || [];\r\n\r\n  const onFilter = () => {\r\n    const filterParams = {\r\n      inn,\r\n      externalOperator: operator?.value,\r\n      externalType: externalType?.value && [externalType?.value],\r\n      status: status?.value\r\n    };\r\n    dispatch(getLegalEntityContractors(filterParams));\r\n  };\r\n\r\n  return (\r\n    <div className=\"contractor-tools\">\r\n      <Dropdown\r\n        widthRestrict\r\n        trigger={<Button icon={<Icons.IconSearch fill=\"currentColor\" />}>Фильтрация</Button>}\r\n      >\r\n        <div className=\"contractor-dropdown-wrapper\">\r\n          <div className=\"dropdown-header\">\r\n            <span>Фильтрация контрагента</span>\r\n          </div>\r\n          <div>\r\n            <Input\r\n              label=\"ИНН\"\r\n              name=\"inn\"\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setInn(e.target.value)}\r\n              value={inn}\r\n            />\r\n            <Select\r\n              label=\"Оператор\"\r\n              name=\"operator\"\r\n              options={operators.map(item => ({ value: item.code, label: item.name }))}\r\n              onChange={(e: HTMLSelectElement) => setOperator(e)}\r\n              value={operator}\r\n            />\r\n            <Select\r\n              label=\"Тип\"\r\n              name=\"externalExternalType\"\r\n              options={[\r\n                {\r\n                  value: DestinationType.Local,\r\n                  label: 'Локальный'\r\n                },\r\n                {\r\n                  value: DestinationType.Roaming,\r\n                  label: 'Роуминг'\r\n                },\r\n                {\r\n                  value: DestinationType.LoaclRoaming,\r\n                  label: 'Локальный Роуминг'\r\n                },\r\n                {\r\n                  value: DestinationType.Hub1c,\r\n                  label: '1С-ЭДО'\r\n                }\r\n              ]}\r\n              onChange={(e: HTMLSelectElement) => setExternalType(e)}\r\n              value={externalType}\r\n            />\r\n            <Select\r\n              label=\"Статус\"\r\n              name=\"status\"\r\n              options={[\r\n                {\r\n                  value: RelationStatus.Active,\r\n                  label: 'Активен'\r\n                },\r\n                {\r\n                  value: RelationStatus.Blocked,\r\n                  label: 'Заблокирован'\r\n                }\r\n              ]}\r\n              onChange={(e: HTMLSelectElement) => setStatus(e)}\r\n              value={status}\r\n            />\r\n          </div>\r\n          <div className=\"contractor-dropdown-buttons\">\r\n            <Button icon={<Icons.IconClose fill=\"currentColor\" />} fullWidth onClick={onClearForm}>\r\n              Очистить\r\n            </Button>\r\n            <Button\r\n              icon={<Icons.IconSearch fill=\"currentColor\" />}\r\n              kind={ButtonKinds.Secondary}\r\n              fullWidth\r\n              onClick={onFilter}\r\n            >\r\n              Фильтровать\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}