{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch}from'react-redux';import{Button,Modal,Icons,Input,ButtonKinds}from'@distate/components';import{changeBalance}from'../../store/actions';import'./style.css';/** Модалка для пополнения и списания средств */export var ChangeBalanceModal=function ChangeBalanceModal(props){var hide=props.hide,isVisible=props.isVisible,title=props.title,id=props.id,isAdd=props.isAdd;var _useState=useState('0.00'),_useState2=_slicedToArray(_useState,2),sum=_useState2[0],setSum=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),sumError=_useState6[0],setSumError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),commentError=_useState8[0],setCommentError=_useState8[1];var dispatch=useDispatch();useEffect(function(){setSum('0.00');setComment('');},[isVisible]);var validate=function validate(){var valid=true;if(comment.trim().length===0){setCommentError(true);valid=false;}else{setCommentError(false);}if(Number(sum)===0){setSumError(true);valid=false;}else{setSumError(false);}return valid;};var onConfirm=function onConfirm(){var prepareSum=isAdd?Number(sum)*100:-(Number(sum)*100);validate()&&dispatch(changeBalance({id:id,sum:prepareSum,comment:comment,hide:hide}));};var onChangeSum=function onChangeSum(e){setSum(e.target.value);};var onBlurSum=function onBlurSum(e){var value=e.target.value;if(value.includes('.')){setSum(Number(value).toFixed(2));}else{var preparedSum=Number(value).toFixed(2);setSum(preparedSum);}};return/*#__PURE__*/React.createElement(Modal,{hide:hide,isVisible:isVisible},/*#__PURE__*/React.createElement(Modal.Header,{title:title}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_name\"},\"\\u0421\\u0443\\u043C\\u043C\\u0430\",/*#__PURE__*/React.createElement(\"span\",{style:{color:'#e64f49'}},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_value\"},/*#__PURE__*/React.createElement(Input,{value:sum,onChange:function onChange(e){return onChangeSum(e);},onBlur:function onBlur(e){return onBlurSum(e);},error:sumError,width:150,type:\"number\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_name\"},\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",/*#__PURE__*/React.createElement(\"span\",{style:{color:'#e64f49'}},\"*\")),/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_value\"},/*#__PURE__*/React.createElement(\"textarea\",{value:comment,className:commentError?'custom-textarea error':'custom-textarea',onChange:function onChange(e){return setComment(e.target.value);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_name\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"two-columns-center_value\"},/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconShare,{fill:\"currentColor\"}),kind:ButtonKinds.Orange,onClick:onConfirm},\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"),/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconClose,{fill:\"currentColor\"}),style:{marginLeft:10},onClick:hide},\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"))))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/finance/components/information/ChangeBalanceModal.tsx"],"names":["React","useState","useEffect","useDispatch","Button","Modal","Icons","Input","ButtonKinds","changeBalance","ChangeBalanceModal","props","hide","isVisible","title","id","isAdd","sum","setSum","comment","setComment","sumError","setSumError","commentError","setCommentError","dispatch","validate","valid","trim","length","Number","onConfirm","prepareSum","onChangeSum","e","target","value","onBlurSum","includes","toFixed","preparedSum","color","Orange","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Button, Modal, Icons, Input, ButtonKinds } from '@distate/components';\r\nimport { changeBalance } from '../../store/actions';\r\nimport './style.css';\r\n\r\ntype Props = {\r\n  hide: () => void;\r\n  isVisible: boolean;\r\n  title: string;\r\n  id: number;\r\n  isAdd: boolean;\r\n};\r\n\r\n/** Модалка для пополнения и списания средств */\r\nexport const ChangeBalanceModal = (props: Props) => {\r\n  const { hide, isVisible, title, id, isAdd } = props;\r\n  const [sum, setSum] = useState('0.00');\r\n  const [comment, setComment] = useState('');\r\n\r\n  const [sumError, setSumError] = useState(false);\r\n  const [commentError, setCommentError] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setSum('0.00');\r\n    setComment('');\r\n  }, [isVisible]);\r\n\r\n  const validate = () => {\r\n    let valid = true;\r\n    if (comment.trim().length === 0) {\r\n      setCommentError(true);\r\n      valid = false;\r\n    } else {\r\n      setCommentError(false);\r\n    }\r\n\r\n    if (Number(sum) === 0) {\r\n      setSumError(true);\r\n      valid = false;\r\n    } else {\r\n      setSumError(false);\r\n    }\r\n\r\n    return valid;\r\n  };\r\n\r\n  const onConfirm = () => {\r\n    const prepareSum = isAdd ? Number(sum) * 100 : -(Number(sum) * 100);\r\n    validate() && dispatch(changeBalance({ id, sum: prepareSum, comment, hide }));\r\n  };\r\n\r\n  const onChangeSum = (e: any) => {\r\n    setSum(e.target.value);\r\n  };\r\n\r\n  const onBlurSum = (e: any) => {\r\n    const value = e.target.value;\r\n    if (value.includes('.')) {\r\n      setSum(Number(value).toFixed(2));\r\n    } else {\r\n      const preparedSum = Number(value).toFixed(2);\r\n      setSum(preparedSum);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal hide={hide} isVisible={isVisible}>\r\n      <Modal.Header title={title} />\r\n\r\n      <Modal.Body>\r\n        <div className=\"two-columns-center\">\r\n          <div className=\"two-columns-center_row\">\r\n            <div className=\"two-columns-center_name\">\r\n              Сумма<span style={{ color: '#e64f49' }}>*</span>\r\n            </div>\r\n            <div className=\"two-columns-center_value\">\r\n              <Input\r\n                value={sum}\r\n                onChange={e => onChangeSum(e)}\r\n                onBlur={e => onBlurSum(e)}\r\n                error={sumError}\r\n                width={150}\r\n                type=\"number\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"two-columns-center_row\">\r\n            <div className=\"two-columns-center_name\">\r\n              Сообщение<span style={{ color: '#e64f49' }}>*</span>\r\n            </div>\r\n            <div className=\"two-columns-center_value\">\r\n              <textarea\r\n                value={comment}\r\n                className={commentError ? 'custom-textarea error' : 'custom-textarea'}\r\n                onChange={e => setComment(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"two-columns-center_row\">\r\n            <div className=\"two-columns-center_name\"></div>\r\n            <div className=\"two-columns-center_value\">\r\n              <Button\r\n                icon={<Icons.IconShare fill=\"currentColor\" />}\r\n                kind={ButtonKinds.Orange}\r\n                onClick={onConfirm}\r\n              >\r\n                Подтвердить действие\r\n              </Button>\r\n              <Button\r\n                icon={<Icons.IconClose fill=\"currentColor\" />}\r\n                style={{ marginLeft: 10 }}\r\n                onClick={hide}\r\n              >\r\n                Закрыть\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}