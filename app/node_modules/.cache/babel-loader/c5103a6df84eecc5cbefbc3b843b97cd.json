{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Downshift from'downshift';import{Input}from'@distate/components';import'./style.css';export var AutocompleteDownshift=function AutocompleteDownshift(props){var loadOptions=props.loadOptions,_onChange=props.onChange,mapData=props.mapData,_props$initialInputVa=props.initialInputValue,initialInputValue=_props$initialInputVa===void 0?'':_props$initialInputVa,errors=props.errors,error=props.error,hasArrow=props.hasArrow,placeholder=props.placeholder;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var onInputValueChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var response,mappedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return loadOptions(value);case 2:response=_context.sent;_context.next=5;return mapData(response);case 5:mappedData=_context.sent;setItems(mappedData);case 7:case\"end\":return _context.stop();}}},_callee);}));return function onInputValueChange(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"downshift-custom \".concat(error?'error':'',\" \").concat(hasArrow?'downshift-arrow':'')},/*#__PURE__*/React.createElement(Downshift,{onChange:function onChange(el){return _onChange(el);},initialInputValue:initialInputValue,onInputValueChange:onInputValueChange,itemToString:function itemToString(item){return item?item.label:'';}},function(_ref2){var getInputProps=_ref2.getInputProps,getMenuProps=_ref2.getMenuProps,getLabelProps=_ref2.getLabelProps,isOpen=_ref2.isOpen,getItemProps=_ref2.getItemProps;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"downshift-input\"},/*#__PURE__*/React.createElement(Input,Object.assign({},getInputProps(),{placeholder:placeholder,autocomplete:false})),hasArrow&&/*#__PURE__*/React.createElement(\"div\",{className:\"downshift-icon\"},/*#__PURE__*/React.createElement(\"svg\",{height:\"20\",width:\"20\",viewBox:\"0 0 20 20\",\"aria-hidden\":\"true\",focusable:\"false\",className:\"css-6q0nyr-Svg\"},/*#__PURE__*/React.createElement(\"path\",{d:\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"})))),(errors===null||errors===void 0?void 0:errors.length)?/*#__PURE__*/React.createElement(\"label\",Object.assign({className:\"ds-field-name bottom color-danger\"},getLabelProps()),errors[0]):null,/*#__PURE__*/React.createElement(\"ul\",Object.assign({className:\"ac_results ac_results__custom\"},getMenuProps()),isOpen?items.map(function(item){return/*#__PURE__*/React.createElement(\"li\",getItemProps({key:item.value,item:item}),item.label);}):null));}));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/common/autocomplete-downshift/AutocompleteDownshift.tsx"],"names":["React","useState","Downshift","Input","AutocompleteDownshift","props","loadOptions","onChange","mapData","initialInputValue","errors","error","hasArrow","placeholder","items","setItems","onInputValueChange","value","response","mappedData","el","item","label","getInputProps","getMenuProps","getLabelProps","isOpen","getItemProps","length","map","key"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Downshift from 'downshift';\r\nimport { Input } from '@distate/components';\r\nimport './style.css';\r\n\r\ntype Props = {\r\n  /** функция загрузки списка элементов\r\n   * срабатывает при изменении в инпута */\r\n  loadOptions: Function;\r\n  /** обработчик выбора нового значения */\r\n  onChange: Function;\r\n  /** маппинг полученных данных */\r\n  mapData: Function;\r\n  /** значение инпута */\r\n  initialInputValue?: string;\r\n  errors?: string[];\r\n  error?: boolean;\r\n  /** вывод стрелки и бордера */\r\n  hasArrow?: boolean;\r\n  placeholder?: string;\r\n};\r\n\r\nexport const AutocompleteDownshift = (props: Props) => {\r\n  const {\r\n    loadOptions,\r\n    onChange,\r\n    mapData,\r\n    initialInputValue = '',\r\n    errors,\r\n    error,\r\n    hasArrow,\r\n    placeholder\r\n  } = props;\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  const onInputValueChange = async (value: string) => {\r\n    const response = await loadOptions(value);\r\n    const mappedData = await mapData(response);\r\n    setItems(mappedData);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`downshift-custom ${error ? 'error' : ''} ${hasArrow ? 'downshift-arrow' : ''}`}\r\n    >\r\n      <Downshift\r\n        onChange={el => onChange(el)}\r\n        initialInputValue={initialInputValue}\r\n        onInputValueChange={onInputValueChange}\r\n        itemToString={item => (item ? item.label : '')}\r\n      >\r\n        {({ getInputProps, getMenuProps, getLabelProps, isOpen, getItemProps }) => {\r\n          return (\r\n            <div>\r\n              <div className=\"downshift-input\">\r\n                <Input {...getInputProps()} placeholder={placeholder} autocomplete={false} />\r\n                {hasArrow && (\r\n                  <div className=\"downshift-icon\">\r\n                    <svg\r\n                      height=\"20\"\r\n                      width=\"20\"\r\n                      viewBox=\"0 0 20 20\"\r\n                      aria-hidden=\"true\"\r\n                      focusable=\"false\"\r\n                      className=\"css-6q0nyr-Svg\"\r\n                    >\r\n                      <path d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {errors?.length ? (\r\n                <label className=\"ds-field-name bottom color-danger\" {...getLabelProps()}>\r\n                  {errors[0]}\r\n                </label>\r\n              ) : null}\r\n              <ul className=\"ac_results ac_results__custom\" {...getMenuProps()}>\r\n                {isOpen\r\n                  ? items.map((item: any) => (\r\n                      <li\r\n                        {...getItemProps({\r\n                          key: item.value,\r\n                          item\r\n                        })}\r\n                      >\r\n                        {item.label}\r\n                      </li>\r\n                    ))\r\n                  : null}\r\n              </ul>\r\n            </div>\r\n          );\r\n        }}\r\n      </Downshift>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}