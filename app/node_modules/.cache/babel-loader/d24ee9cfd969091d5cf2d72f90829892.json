{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(ducumentDelete),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(sagaDelete);import{takeLatest,put,select,call}from'redux-saga/effects';import{actionDelete,actionDeleteFailure,actionDeleteRequest,actionDeleteSuccess,actionDocumentRequest}from'../actions';import{selectSelected}from'../selects';import{Flash}from'../../../../common/flash/Flash';import{DocumentsApiServices}from'../../services/documents.api';export function ducumentDelete(){return _regeneratorRuntime.wrap(function ducumentDelete$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(actionDelete,sagaDelete);case 2:case\"end\":return _context.stop();}}},_marked);}function sagaDelete(){var selected,message;return _regeneratorRuntime.wrap(function sagaDelete$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return put(actionDeleteRequest());case 2:_context2.next=4;return select(selectSelected);case 4:selected=_context2.sent;_context2.prev=5;_context2.next=8;return call(DocumentsApiServices.delete,selected);case 8:_context2.next=10;return put(actionDocumentRequest({}));case 10:_context2.next=12;return put(actionDeleteSuccess());case 12:_context2.next=14;return Flash.success('Удалено');case 14:_context2.next=23;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](5);message=_context2.t0.message;_context2.next=21;return put(actionDeleteFailure());case 21:_context2.next=23;return Flash.error('Возникла ошибка во время удаления');case 23:case\"end\":return _context2.stop();}}},_marked2,null,[[5,16]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/documents/store/sagas/delete.effect.ts"],"names":["ducumentDelete","sagaDelete","takeLatest","put","select","call","actionDelete","actionDeleteFailure","actionDeleteRequest","actionDeleteSuccess","actionDocumentRequest","selectSelected","Flash","DocumentsApiServices","selected","delete","success","message","error"],"mappings":"oNAaiBA,c,iDAIPC,U,EAjBV,OAASC,UAAT,CAAqBC,GAArB,CAA0BC,MAA1B,CAAkCC,IAAlC,KAA8C,oBAA9C,CAEA,OACEC,YADF,CAEEC,mBAFF,CAGEC,mBAHF,CAIEC,mBAJF,CAKEC,qBALF,KAMO,YANP,CAOA,OAASC,cAAT,KAA+B,YAA/B,CACA,OAASC,KAAT,KAAsB,gCAAtB,CACA,OAASC,oBAAT,KAAqC,8BAArC,CAEA,MAAO,SAAUb,CAAAA,cAAV,0IACL,MAAME,CAAAA,UAAU,CAACI,YAAD,CAAeL,UAAf,CAAhB,CADK,sDAIP,QAAUA,CAAAA,UAAV,+JACE,MAAME,CAAAA,GAAG,CAACK,mBAAmB,EAApB,CAAT,CADF,wBAE6B,MAAMJ,CAAAA,MAAM,CAACO,cAAD,CAAZ,CAF7B,OAEQG,QAFR,kDAKI,MAAMT,CAAAA,IAAI,CAACQ,oBAAoB,CAACE,MAAtB,CAA8BD,QAA9B,CAAV,CALJ,yBAOI,MAAMX,CAAAA,GAAG,CAACO,qBAAqB,CAAC,EAAD,CAAtB,CAAT,CAPJ,0BAQI,MAAMP,CAAAA,GAAG,CAACM,mBAAmB,EAApB,CAAT,CARJ,0BAUI,MAAMG,CAAAA,KAAK,CAACI,OAAN,CAAc,SAAd,CAAN,CAVJ,6FAWaC,OAXb,cAWaA,OAXb,mBAYI,MAAMd,CAAAA,GAAG,CAACI,mBAAmB,EAApB,CAAT,CAZJ,0BAaI,MAAMK,CAAAA,KAAK,CAACM,KAAN,CAAY,mCAAZ,CAAN,CAbJ","sourcesContent":["import { takeLatest, put, select, call } from 'redux-saga/effects';\r\n\r\nimport {\r\n  actionDelete,\r\n  actionDeleteFailure,\r\n  actionDeleteRequest,\r\n  actionDeleteSuccess,\r\n  actionDocumentRequest\r\n} from '../actions';\r\nimport { selectSelected } from '../selects';\r\nimport { Flash } from '../../../../common/flash/Flash';\r\nimport { DocumentsApiServices } from '../../services/documents.api';\r\n\r\nexport function* ducumentDelete() {\r\n  yield takeLatest(actionDelete, sagaDelete);\r\n}\r\n\r\nfunction* sagaDelete() {\r\n  yield put(actionDeleteRequest());\r\n  const selected: string[] = yield select(selectSelected);\r\n\r\n  try {\r\n    yield call(DocumentsApiServices.delete, selected);\r\n\r\n    yield put(actionDocumentRequest({}));\r\n    yield put(actionDeleteSuccess());\r\n\r\n    yield Flash.success('Удалено');\r\n  } catch ({ message }) {\r\n    yield put(actionDeleteFailure());\r\n    yield Flash.error('Возникла ошибка во время удаления');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}