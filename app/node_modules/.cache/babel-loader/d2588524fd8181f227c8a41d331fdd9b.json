{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(packageEffectAttach),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(packageEffectDetach),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(sagaAttachPackage),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(sagaDetachPackage);import{takeLatest,call,put,select}from'redux-saga/effects';import{Flash}from'../../../../common/flash/Flash';import{FolderApiServices}from'../../services/folder.api';import{actionAddPackage,actionAddPackageFailure,actionAddPackageRequest,actionAddPackageSuccess,actionDetachPackage,actionDetachPackageFailure,actionDetachPackageRequest,actionDetachPackageSuccess}from'../actions';import{selectFolders}from'../selects';export function packageEffectAttach(){return _regeneratorRuntime.wrap(function packageEffectAttach$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(actionAddPackage,sagaAttachPackage);case 2:case\"end\":return _context.stop();}}},_marked);}export function packageEffectDetach(){return _regeneratorRuntime.wrap(function packageEffectDetach$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return takeLatest(actionDetachPackage,sagaDetachPackage);case 2:case\"end\":return _context2.stop();}}},_marked2);}function sagaAttachPackage(_ref){var _ref$payload,folderId,packageIds,callback,folders,folder;return _regeneratorRuntime.wrap(function sagaAttachPackage$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref$payload=_ref.payload,folderId=_ref$payload.folderId,packageIds=_ref$payload.packageIds,callback=_ref$payload.callback;_context3.prev=1;_context3.next=4;return put(actionAddPackageRequest());case 4:_context3.next=6;return call(FolderApiServices.attachDocuments,{folderId:folderId,packageIds:packageIds});case 6:_context3.next=8;return put(actionAddPackageSuccess());case 8:_context3.next=10;return select(selectFolders);case 10:folders=_context3.sent;folder=folders.find(function(item){return item.id===folderId;});_context3.next=14;return Flash.success(\"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u044B \\u0432 \\u043F\\u0430\\u043F\\u043A\\u0443 \".concat(folder.title));case 14:if(!callback){_context3.next=17;break;}_context3.next=17;return callback.success();case 17:_context3.next=28;break;case 19:_context3.prev=19;_context3.t0=_context3[\"catch\"](1);_context3.next=23;return put(actionAddPackageFailure());case 23:_context3.next=25;return Flash.error('Вознилка ошибка при добавлении в папку');case 25:if(!callback){_context3.next=28;break;}_context3.next=28;return callback.failure();case 28:case\"end\":return _context3.stop();}}},_marked3,null,[[1,19]]);}function sagaDetachPackage(_ref2){var _ref2$payload,folderId,packageId,callback;return _regeneratorRuntime.wrap(function sagaDetachPackage$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref2$payload=_ref2.payload,folderId=_ref2$payload.folderId,packageId=_ref2$payload.packageId,callback=_ref2$payload.callback;_context4.prev=1;_context4.next=4;return put(actionDetachPackageRequest());case 4:_context4.next=6;return call(FolderApiServices.detachDocument,{folderId:folderId,packageId:packageId});case 6:_context4.next=8;return put(actionDetachPackageSuccess());case 8:if(!callback){_context4.next=11;break;}_context4.next=11;return callback.success();case 11:_context4.next=22;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](1);_context4.next=17;return put(actionDetachPackageFailure(_context4.t0));case 17:_context4.next=19;return Flash.error('Вознилка ошибка удалении документа из папки');case 19:if(!callback){_context4.next=22;break;}_context4.next=22;return callback.failure();case 22:case\"end\":return _context4.stop();}}},_marked4,null,[[1,13]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/container/folder/store/sagas/package.effect.ts"],"names":["packageEffectAttach","packageEffectDetach","sagaAttachPackage","sagaDetachPackage","takeLatest","call","put","select","Flash","FolderApiServices","actionAddPackage","actionAddPackageFailure","actionAddPackageRequest","actionAddPackageSuccess","actionDetachPackage","actionDetachPackageFailure","actionDetachPackageRequest","actionDetachPackageSuccess","selectFolders","payload","folderId","packageIds","callback","attachDocuments","folders","folder","find","item","id","success","title","error","failure","packageId","detachDocument"],"mappings":"oNAiBiBA,mB,iDAIAC,mB,iDAIPC,iB,iDAoBAC,iB,EA7CV,OAASC,UAAT,CAAqBC,IAArB,CAA2BC,GAA3B,CAAgCC,MAAhC,KAA8C,oBAA9C,CAEA,OAASC,KAAT,KAAsB,gCAAtB,CACA,OAASC,iBAAT,KAAkC,2BAAlC,CAEA,OACEC,gBADF,CAEEC,uBAFF,CAGEC,uBAHF,CAIEC,uBAJF,CAKEC,mBALF,CAMEC,0BANF,CAOEC,0BAPF,CAQEC,0BARF,KASO,YATP,CAUA,OAASC,aAAT,KAA8B,YAA9B,CAEA,MAAO,SAAUlB,CAAAA,mBAAV,+IACL,MAAMI,CAAAA,UAAU,CAACM,gBAAD,CAAmBR,iBAAnB,CAAhB,CADK,sDAIP,MAAO,SAAUD,CAAAA,mBAAV,mJACL,MAAMG,CAAAA,UAAU,CAACU,mBAAD,CAAsBX,iBAAtB,CAAhB,CADK,wDAIP,QAAUD,CAAAA,iBAAV,mNAA8BiB,OAA9B,CAAyCC,QAAzC,cAAyCA,QAAzC,CAAmDC,UAAnD,cAAmDA,UAAnD,CAA+DC,QAA/D,cAA+DA,QAA/D,mCAEI,MAAMhB,CAAAA,GAAG,CAACM,uBAAuB,EAAxB,CAAT,CAFJ,wBAGI,MAAMP,CAAAA,IAAI,CAACI,iBAAiB,CAACc,eAAnB,CAAoC,CAAEH,QAAQ,CAARA,QAAF,CAAYC,UAAU,CAAVA,UAAZ,CAApC,CAAV,CAHJ,wBAII,MAAMf,CAAAA,GAAG,CAACO,uBAAuB,EAAxB,CAAT,CAJJ,yBAMoB,MAAMN,CAAAA,MAAM,CAACW,aAAD,CAAZ,CANpB,QAMUM,OANV,gBAOUC,MAPV,CAOmBD,OAAO,CAACE,IAAR,CAAa,SAACC,IAAD,QAAeA,CAAAA,IAAI,CAACC,EAAL,GAAYR,QAA3B,EAAb,CAPnB,mBASI,MAAMZ,CAAAA,KAAK,CAACqB,OAAN,+JAA6CJ,MAAM,CAACK,KAApD,EAAN,CATJ,YAWQR,QAXR,6CAWkB,MAAMA,CAAAA,QAAQ,CAACO,OAAT,EAAN,CAXlB,+GAaI,MAAMvB,CAAAA,GAAG,CAACK,uBAAuB,EAAxB,CAAT,CAbJ,0BAcI,MAAMH,CAAAA,KAAK,CAACuB,KAAN,CAAY,wCAAZ,CAAN,CAdJ,YAgBQT,QAhBR,6CAgBkB,MAAMA,CAAAA,QAAQ,CAACU,OAAT,EAAN,CAhBlB,uEAoBA,QAAU7B,CAAAA,iBAAV,uMAA8BgB,OAA9B,CAAyCC,QAAzC,eAAyCA,QAAzC,CAAmDa,SAAnD,eAAmDA,SAAnD,CAA8DX,QAA9D,eAA8DA,QAA9D,mCAEI,MAAMhB,CAAAA,GAAG,CAACU,0BAA0B,EAA3B,CAAT,CAFJ,wBAGI,MAAMX,CAAAA,IAAI,CAACI,iBAAiB,CAACyB,cAAnB,CAAmC,CAAEd,QAAQ,CAARA,QAAF,CAAYa,SAAS,CAATA,SAAZ,CAAnC,CAAV,CAHJ,wBAII,MAAM3B,CAAAA,GAAG,CAACW,0BAA0B,EAA3B,CAAT,CAJJ,WAMQK,QANR,6CAMkB,MAAMA,CAAAA,QAAQ,CAACO,OAAT,EAAN,CANlB,+GAQI,MAAMvB,CAAAA,GAAG,CAACS,0BAA0B,cAA3B,CAAT,CARJ,0BASI,MAAMP,CAAAA,KAAK,CAACuB,KAAN,CAAY,6CAAZ,CAAN,CATJ,YAWQT,QAXR,6CAWkB,MAAMA,CAAAA,QAAQ,CAACU,OAAT,EAAN,CAXlB","sourcesContent":["import { takeLatest, call, put, select } from 'redux-saga/effects';\r\n\r\nimport { Flash } from '../../../../common/flash/Flash';\r\nimport { FolderApiServices } from '../../services/folder.api';\r\nimport { AddPackagePayload, DetchPackagePayload } from '../../helpers/folder.typings';\r\nimport {\r\n  actionAddPackage,\r\n  actionAddPackageFailure,\r\n  actionAddPackageRequest,\r\n  actionAddPackageSuccess,\r\n  actionDetachPackage,\r\n  actionDetachPackageFailure,\r\n  actionDetachPackageRequest,\r\n  actionDetachPackageSuccess\r\n} from '../actions';\r\nimport { selectFolders } from '../selects';\r\n\r\nexport function* packageEffectAttach() {\r\n  yield takeLatest(actionAddPackage, sagaAttachPackage);\r\n}\r\n\r\nexport function* packageEffectDetach() {\r\n  yield takeLatest(actionDetachPackage, sagaDetachPackage);\r\n}\r\n\r\nfunction* sagaAttachPackage({ payload: { folderId, packageIds, callback } }: AddPackagePayload) {\r\n  try {\r\n    yield put(actionAddPackageRequest());\r\n    yield call(FolderApiServices.attachDocuments, { folderId, packageIds });\r\n    yield put(actionAddPackageSuccess());\r\n\r\n    const folders = yield select(selectFolders);\r\n    const folder = folders.find((item: any) => item.id === folderId);\r\n\r\n    yield Flash.success(`Документы добавлены в папку ${folder.title}`);\r\n\r\n    if (callback) yield callback.success();\r\n  } catch (err) {\r\n    yield put(actionAddPackageFailure());\r\n    yield Flash.error('Вознилка ошибка при добавлении в папку');\r\n\r\n    if (callback) yield callback.failure();\r\n  }\r\n}\r\n\r\nfunction* sagaDetachPackage({ payload: { folderId, packageId, callback } }: DetchPackagePayload) {\r\n  try {\r\n    yield put(actionDetachPackageRequest());\r\n    yield call(FolderApiServices.detachDocument, { folderId, packageId });\r\n    yield put(actionDetachPackageSuccess());\r\n\r\n    if (callback) yield callback.success();\r\n  } catch (err) {\r\n    yield put(actionDetachPackageFailure(err));\r\n    yield Flash.error('Вознилка ошибка удалении документа из папки');\r\n\r\n    if (callback) yield callback.failure();\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}