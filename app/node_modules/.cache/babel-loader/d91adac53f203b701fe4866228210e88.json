{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Button,ButtonKinds,Icons,Dropdown,Input,Select}from'@distate/components';import{useDispatch}from'react-redux';import{getStaff,getStaffWaiting,getStaffDeactivated}from'../../store/actions';export var StaffTools=function StaffTools(props){var id=props.id,limit=props.limit,statusSystemName=props.statusSystemName,hasStatus=props.hasStatus;var _useState=useState(),_useState2=_slicedToArray(_useState,2),surname=_useState2[0],setSurname=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),patronymic=_useState6[0],setPatronymic=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),position=_useState8[0],setPosition=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),status=_useState12[0],setStatus=_useState12[1];/** опции для селекта Статусов */var statusOptions=[{label:'Активирован',value:'active'},{label:'Деактивирован',value:'inactive'},{label:'Ожидает активации',value:'waiting_for_approval'}];var dispatch=useDispatch();/** очистка формы */var onClearForm=function onClearForm(){setSurname(undefined);setName(undefined);setPatronymic(undefined);setPosition(undefined);setEmail(undefined);setStatus(undefined);};/** обработка нажания на кнопку Фильтровать */var onFilter=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var params;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params={surname:surname,name:name,patronymic:patronymic,position:position,email:email,statusSystemName:statusSystemName||(status===null||status===void 0?void 0:status.value),limit:limit};/** диспатч в зависимости от того, кто вызывает поиск - пропс statusSystemName */_context.t0=statusSystemName;_context.next=_context.t0==='inactive'?4:_context.t0==='waiting_for_approval'?6:8;break;case 4:dispatch(getStaffDeactivated({id:id,params:params}));return _context.abrupt(\"break\",9);case 6:dispatch(getStaffWaiting({id:id,params:params}));return _context.abrupt(\"break\",9);case 8:dispatch(getStaff({id:id,params:params}));case 9:case\"end\":return _context.stop();}}},_callee);}));return function onFilter(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-menu group\",style:{marginBottom:15}},/*#__PURE__*/React.createElement(Dropdown,{width:\"300px\",widthRestrict:true,trigger:/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconSearch,{fill:\"currentColor\"})},\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\")},/*#__PURE__*/React.createElement(\"div\",{className:\"document-dropdown-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dropdown-header\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\\u043C\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Input,{label:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",name:\"surname\",onChange:function onChange(e){return setSurname(e.target.value);},value:surname}),/*#__PURE__*/React.createElement(Input,{label:\"\\u0418\\u043C\\u044F\",name:\"name\",onChange:function onChange(e){return setName(e.target.value);},value:name}),/*#__PURE__*/React.createElement(Input,{label:\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\",name:\"patronymic\",onChange:function onChange(e){return setPatronymic(e.target.value);},value:patronymic}),/*#__PURE__*/React.createElement(Input,{label:\"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C\",name:\"position\",onChange:function onChange(e){return setPosition(e.target.value);},value:position}),/*#__PURE__*/React.createElement(Input,{label:\"E-mail\",name:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email}),hasStatus&&/*#__PURE__*/React.createElement(Select,{value:status,label:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\",name:\"status\",options:statusOptions,onChange:function onChange(e){return setStatus(e);},placeholder:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"document-dropdown-buttons\"},/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconClose,{fill:\"currentColor\"}),fullWidth:true,onClick:onClearForm},\"\\u041E\\u0447\\u0438\\u0441\\u0442\\u0438\\u0442\\u044C\"),/*#__PURE__*/React.createElement(Button,{icon:/*#__PURE__*/React.createElement(Icons.IconSearch,{fill:\"currentColor\"}),kind:ButtonKinds.Secondary,fullWidth:true,onClick:onFilter},\"\\u0418\\u0441\\u043A\\u0430\\u0442\\u044C\")))));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/company/components/staff/StaffTools.tsx"],"names":["React","useState","Button","ButtonKinds","Icons","Dropdown","Input","Select","useDispatch","getStaff","getStaffWaiting","getStaffDeactivated","StaffTools","props","id","limit","statusSystemName","hasStatus","surname","setSurname","name","setName","patronymic","setPatronymic","position","setPosition","email","setEmail","status","setStatus","statusOptions","label","value","dispatch","onClearForm","undefined","onFilter","params","marginBottom","e","target","Secondary"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, ButtonKinds, Icons, Dropdown, Input, Select } from '@distate/components';\r\nimport { useDispatch } from 'react-redux';\r\nimport { getStaff, getStaffWaiting, getStaffDeactivated } from '../../store/actions';\r\n\r\ntype Props = {\r\n  id: number;\r\n  limit: number;\r\n  statusSystemName?: string;\r\n  hasStatus?: boolean;\r\n};\r\nexport const StaffTools = (props: Props) => {\r\n  const { id, limit, statusSystemName, hasStatus } = props;\r\n\r\n  const [surname, setSurname] = useState<string>();\r\n  const [name, setName] = useState<string>();\r\n  const [patronymic, setPatronymic] = useState<string>();\r\n  const [position, setPosition] = useState<string>();\r\n  const [email, setEmail] = useState<string>();\r\n  const [status, setStatus] = useState<HTMLSelectElement>();\r\n\r\n  /** опции для селекта Статусов */\r\n  const statusOptions = [\r\n    { label: 'Активирован', value: 'active' },\r\n    { label: 'Деактивирован', value: 'inactive' },\r\n    { label: 'Ожидает активации', value: 'waiting_for_approval' }\r\n  ];\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  /** очистка формы */\r\n  const onClearForm = () => {\r\n    setSurname(undefined);\r\n    setName(undefined);\r\n    setPatronymic(undefined);\r\n    setPosition(undefined);\r\n    setEmail(undefined);\r\n    setStatus(undefined);\r\n  };\r\n\r\n  /** обработка нажания на кнопку Фильтровать */\r\n  const onFilter = async () => {\r\n    const params = {\r\n      surname,\r\n      name,\r\n      patronymic,\r\n      position,\r\n      email,\r\n      statusSystemName: statusSystemName || status?.value,\r\n      limit\r\n    };\r\n\r\n    /** диспатч в зависимости от того, кто вызывает поиск - пропс statusSystemName */\r\n    switch (statusSystemName) {\r\n      /** Отключенные */\r\n      case 'inactive':\r\n        dispatch(getStaffDeactivated({ id, params }));\r\n        break;\r\n      /** Заявки на активацию */\r\n      case 'waiting_for_approval':\r\n        dispatch(getStaffWaiting({ id, params }));\r\n        break;\r\n      /** Сотрудники */\r\n      default:\r\n        dispatch(getStaff({ id, params }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dropdown-menu group\" style={{ marginBottom: 15 }}>\r\n      <Dropdown\r\n        width=\"300px\"\r\n        widthRestrict\r\n        trigger={<Button icon={<Icons.IconSearch fill=\"currentColor\" />}>Поиск сотрудника</Button>}\r\n      >\r\n        <div className=\"document-dropdown-wrapper\">\r\n          <div className=\"dropdown-header\">\r\n            <span>Поиск по сотрудникам</span>\r\n          </div>\r\n          <div>\r\n            <Input\r\n              label=\"Фамилия\"\r\n              name=\"surname\"\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setSurname(e.target.value)}\r\n              value={surname}\r\n            />\r\n            <Input\r\n              label=\"Имя\"\r\n              name=\"name\"\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}\r\n              value={name}\r\n            />\r\n            <Input\r\n              label=\"Отчество\"\r\n              name=\"patronymic\"\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPatronymic(e.target.value)}\r\n              value={patronymic}\r\n            />\r\n            <Input\r\n              label=\"Должность\"\r\n              name=\"position\"\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPosition(e.target.value)}\r\n              value={position}\r\n            />\r\n            <Input\r\n              label=\"E-mail\"\r\n              name=\"email\"\r\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setEmail(e.target.value)}\r\n              value={email}\r\n            />\r\n\r\n            {hasStatus && (\r\n              <Select\r\n                value={status}\r\n                label=\"Статус сотрудника\"\r\n                name=\"status\"\r\n                options={statusOptions}\r\n                onChange={(e: HTMLSelectElement) => setStatus(e)}\r\n                placeholder=\"\"\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"document-dropdown-buttons\">\r\n            <Button icon={<Icons.IconClose fill=\"currentColor\" />} fullWidth onClick={onClearForm}>\r\n              Очистить\r\n            </Button>\r\n            <Button\r\n              icon={<Icons.IconSearch fill=\"currentColor\" />}\r\n              kind={ButtonKinds.Secondary}\r\n              fullWidth\r\n              onClick={onFilter}\r\n            >\r\n              Искать\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Dropdown>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}