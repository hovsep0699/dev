{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _applyDecoratedDescriptor from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/applyDecoratedDescriptor\";var _class,_temp;// src/AxiosClient.ts\nimport axios from'axios';import{ServiceLocator}from\"../../di/ServiceLocator\";import autobind from\"autobind-decorator\";var AxiosClient=(_class=(_temp=/*#__PURE__*/function(){_createClass(AxiosClient,null,[{key:\"getInstance\",value:function getInstance(){return ServiceLocator.getInstance().get(AxiosClient);}}]);function AxiosClient(blobClient){_classCallCheck(this,AxiosClient);this.client=void 0;this.blobClient=void 0;this.client=axios.create({timeout:10000});this.blobClient=blobClient;this.get=this.get.bind(this);this.post=this.post.bind(this);this.delete=this.delete.bind(this);// Setup interceptors\nthis.setupInterceptors();}_createClass(AxiosClient,[{key:\"setupInterceptors\",value:function setupInterceptors(){var _this=this;this.client.interceptors.request.use(function(config){config.headers['X-Requested-With']=\"XMLHttpRequest\";return config;},function(error){return Promise.reject(error);});// Response interceptor\nthis.client.interceptors.response.use(function(response){console.log(\"RESPONSE BODY::: \",response.data);console.log(\"STATUS:::: \",response.status);_this.blobClient.collectResponse(response);return response;},function(error){if(error.response){console.log(\"STATUS:::: \",error.response.status);console.log(\"ERROR BODY:::: \",error.response.data);_this.blobClient.collectResponse(error.response);}else{console.log(\"ERROR BODY::: is null\");}return Promise.reject(error);});}},{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url,params){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.client.get(url,{params:params});case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}}},_callee,this);}));function get(_x,_x2){return _get.apply(this,arguments);}return get;}()},{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url,data){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.client.post(url,data);case 2:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function post(_x3,_x4){return _post.apply(this,arguments);}return post;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(url,data){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.client.delete(url,{data:data,headers:{'Content-Type':'application/x-www-form-urlencoded'}});case 2:response=_context3.sent;return _context3.abrupt(\"return\",response.data);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function _delete(_x5,_x6){return _delete2.apply(this,arguments);}return _delete;}()}]);return AxiosClient;}(),_temp),(_applyDecoratedDescriptor(_class.prototype,\"setupInterceptors\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"setupInterceptors\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"get\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"get\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"post\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"post\"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,\"delete\",[autobind],Object.getOwnPropertyDescriptor(_class.prototype,\"delete\"),_class.prototype)),_class);export default AxiosClient;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/POA/MCHD_ROOT/core/client/AxiosClient.ts"],"names":["axios","ServiceLocator","autobind","AxiosClient","getInstance","get","blobClient","client","create","timeout","bind","post","delete","setupInterceptors","interceptors","request","use","config","headers","error","Promise","reject","response","console","log","data","status","collectResponse","url","params"],"mappings":"y3BAAA;AAEA,MAAOA,CAAAA,KAAP,KAAwE,OAAxE,CACA,OAAQC,cAAR,KAA6B,yBAA7B,CAEA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,C,GAEMC,CAAAA,W,sHAKuC,CACrC,MAAOF,CAAAA,cAAc,CAACG,WAAf,GAA6BC,GAA7B,CAAiCF,WAAjC,CAAP,CACH,C,IAED,qBAAYG,UAAZ,CAAoC,wCAR5BC,MAQ4B,aAP5BD,UAO4B,QAChC,KAAKC,MAAL,CAAcP,KAAK,CAACQ,MAAN,CAAa,CACvBC,OAAO,CAAE,KADc,CAAb,CAAd,CAGA,KAAKH,UAAL,CAAkBA,UAAlB,CACA,KAAKD,GAAL,CAAW,KAAKA,GAAL,CAASK,IAAT,CAAc,IAAd,CAAX,CACA,KAAKC,IAAL,CAAY,KAAKA,IAAL,CAAUD,IAAV,CAAe,IAAf,CAAZ,CACA,KAAKE,MAAL,CAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd,CAEA;AACA,KAAKG,iBAAL,GACH,C,qFAG2B,gBACxB,KAAKN,MAAL,CAAYO,YAAZ,CAAyBC,OAAzB,CAAiCC,GAAjC,CACI,SAACC,MAAD,CAAgC,CAC5BA,MAAM,CAACC,OAAP,CAAe,kBAAf,mBACA,MAAOD,CAAAA,MAAP,CACH,CAJL,CAKI,SAACE,KAAD,CAAW,CACP,MAAOC,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACH,CAPL,EAUA;AACA,KAAKZ,MAAL,CAAYO,YAAZ,CAAyBQ,QAAzB,CAAkCN,GAAlC,CACI,SAACM,QAAD,CAA6B,CACzBC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCF,QAAQ,CAACG,IAA1C,EACAF,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BF,QAAQ,CAACI,MAApC,EACA,KAAI,CAACpB,UAAL,CAAgBqB,eAAhB,CAAgCL,QAAhC,EACA,MAAOA,CAAAA,QAAP,CACH,CANL,CAOI,SAACH,KAAD,CAAW,CACP,GAAIA,KAAK,CAACG,QAAV,CAAoB,CAChBC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BL,KAAK,CAACG,QAAN,CAAeI,MAA1C,EACAH,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BL,KAAK,CAACG,QAAN,CAAeG,IAA9C,EACA,KAAI,CAACnB,UAAL,CAAgBqB,eAAhB,CAAgCR,KAAK,CAACG,QAAtC,EACH,CAJD,IAKK,CACDC,OAAO,CAACC,GAAR,CAAY,uBAAZ,EACH,CACD,MAAOJ,CAAAA,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP,CACH,CAjBL,EAmBH,C,gHAGmBS,G,CAAaC,M,qJACN,MAAKtB,MAAL,CAAYF,GAAZ,CAAmBuB,GAAnB,CAAwB,CAAEC,MAAM,CAANA,MAAF,CAAxB,C,QAAjBP,Q,+CACCA,QAAQ,CAACG,I,yPAICG,G,CAAaH,I,0JACP,MAAKlB,MAAL,CAAYI,IAAZ,CAAoBiB,GAApB,CAAyBH,IAAzB,C,QAAjBH,Q,iDACCA,QAAQ,CAACG,I,oQAIGG,G,CAAaH,I,0JACT,MAAKlB,MAAL,CAAYK,MAAZ,CAAsBgB,GAAtB,CAA2B,CAC9CH,IAAI,CAAJA,IAD8C,CAE9CP,OAAO,CAAE,CAAC,eAAgB,mCAAjB,CAFqC,CAA3B,C,QAAjBI,Q,iDAICA,QAAQ,CAACG,I,wPApDnBvB,Q,4IAkCAA,Q,+HAMAA,Q,kIAMAA,Q,wFAUL,cAAeC,CAAAA,WAAf","sourcesContent":["// src/AxiosClient.ts\r\n\r\nimport axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport {ServiceLocator} from \"../../di/ServiceLocator\";\r\nimport {BlobClient} from \"./BlobClient\";\r\nimport autobind from \"autobind-decorator\";\r\n\r\nclass AxiosClient {\r\n    private client: AxiosInstance;\r\n    private blobClient: BlobClient;\r\n\r\n\r\n    public static getInstance(): AxiosClient {\r\n        return ServiceLocator.getInstance().get(AxiosClient);\r\n    }\r\n\r\n    constructor(blobClient: BlobClient) {\r\n        this.client = axios.create({\r\n            timeout: 10000,\r\n        });\r\n        this.blobClient = blobClient;\r\n        this.get = this.get.bind(this);\r\n        this.post = this.post.bind(this);\r\n        this.delete = this.delete.bind(this);\r\n\r\n        // Setup interceptors\r\n        this.setupInterceptors();\r\n    }\r\n\r\n    @autobind\r\n    private setupInterceptors() {\r\n        this.client.interceptors.request.use(\r\n            (config: AxiosRequestConfig) => {\r\n                config.headers['X-Requested-With'] = `XMLHttpRequest`;\r\n                return config;\r\n            },\r\n            (error) => {\r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n\r\n        // Response interceptor\r\n        this.client.interceptors.response.use(\r\n            (response: AxiosResponse) => {\r\n                console.log(\"RESPONSE BODY::: \", response.data);\r\n                console.log(\"STATUS:::: \", response.status)\r\n                this.blobClient.collectResponse(response);\r\n                return response;\r\n            },\r\n            (error) => {\r\n                if (error.response) {\r\n                    console.log(\"STATUS:::: \", error.response.status);\r\n                    console.log(\"ERROR BODY:::: \", error.response.data);\r\n                    this.blobClient.collectResponse(error.response);\r\n                }\r\n                else {\r\n                    console.log(\"ERROR BODY::: is null\");\r\n                }\r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    @autobind\r\n    public async get<T>(url: string, params?: Record<string, any>): Promise<T> {\r\n        const response = await this.client.get<T>(url, { params });\r\n        return response.data;\r\n    }\r\n\r\n    @autobind\r\n    public async post<T>(url: string, data?: any): Promise<T> {\r\n        const response = await this.client.post<T>(url, data);\r\n        return response.data;\r\n    }\r\n\r\n    @autobind\r\n    public async delete<T>(url: string, data?: any): Promise<T> {\r\n        const response = await this.client.delete<T>(url, {\r\n            data,\r\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n        });\r\n        return response.data;\r\n    }\r\n}\r\n\r\nexport default AxiosClient;\r\n"]},"metadata":{},"sourceType":"module"}