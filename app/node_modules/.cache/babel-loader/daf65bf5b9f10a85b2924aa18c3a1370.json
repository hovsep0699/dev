{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React,{useState}from'react';import DatePicker from'react-datepicker';import ru from'date-fns/locale/ru';import'./DateInput.module.css';import{asField}from'informed';import{ddmmyyyy,ddmmyyyyToDate}from'../../../utils/DateUtil';var DateInput=asField(function(_ref){var fieldState=_ref.fieldState,fieldApi=_ref.fieldApi,props=_objectWithoutProperties(_ref,[\"fieldState\",\"fieldApi\"]);var value=fieldState.value;var setValue=fieldApi.setValue,setTouched=fieldApi.setTouched;var initialLocalValue=value?ddmmyyyyToDate(value):null;var _useState=useState(initialLocalValue),_useState2=_slicedToArray(_useState,2),localValue=_useState2[0],setLocalValue=_useState2[1];var onFocus=function onFocus(){setTouched(true);if(!value){setValue(ddmmyyyy(new Date().toString()));setLocalValue(new Date());}};var onChange=props.onChange,restProps=_objectWithoutProperties(props,[\"onChange\"]);var onChangeDate=function onChangeDate(date){if(onChange)onChange(date);if(date){setValue(ddmmyyyy(date.toString()));}else{setValue(date);}setLocalValue(date);};return/*#__PURE__*/React.createElement(DatePicker,Object.assign({selected:localValue,onChange:onChangeDate,onFocus:onFocus,locale:ru,dateFormat:\"dd.MM.yyyy\",placeholderText:props.placeholderText?props.placeholderText:'Дата',popperPlacement:\"bottom-start\",popperModifiers:{flip:{behavior:['bottom']// don't allow it to flip to be above\n},preventOverflow:{enabled:false// tell it not to try to stay within the view (this prevents the popper from covering the element you clicked)\n},hide:{enabled:false// turn off since needs preventOverflow to be enabled\n}}},restProps));//TODO добавить метод, который будет добавлять и убирать showMonthYearPicker props\n// при нажатии на месяц+год(кнопка сверху между стрелочками)\n// поможет описание custom header в примерах datepicker'a\n});export default DateInput;","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/common/form/components/DateInput.js"],"names":["React","useState","DatePicker","ru","asField","ddmmyyyy","ddmmyyyyToDate","DateInput","fieldState","fieldApi","props","value","setValue","setTouched","initialLocalValue","localValue","setLocalValue","onFocus","Date","toString","onChange","restProps","onChangeDate","date","placeholderText","flip","behavior","preventOverflow","enabled","hide"],"mappings":"0WAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,EAAP,KAAe,oBAAf,CACA,MAAO,wBAAP,CACA,OAASC,OAAT,KAAwB,UAAxB,CACA,OAASC,QAAT,CAAmBC,cAAnB,KAAyC,yBAAzC,CAEA,GAAMC,CAAAA,SAAS,CAAGH,OAAO,CAAC,cAAwC,IAArCI,CAAAA,UAAqC,MAArCA,UAAqC,CAAzBC,QAAyB,MAAzBA,QAAyB,CAAZC,KAAY,6DACxDC,CAAAA,KADwD,CAC9CH,UAD8C,CACxDG,KADwD,IAExDC,CAAAA,QAFwD,CAE/BH,QAF+B,CAExDG,QAFwD,CAE9CC,UAF8C,CAE/BJ,QAF+B,CAE9CI,UAF8C,CAGhE,GAAMC,CAAAA,iBAAiB,CAAGH,KAAK,CAAGL,cAAc,CAACK,KAAD,CAAjB,CAA2B,IAA1D,CAHgE,cAI5BV,QAAQ,CAACa,iBAAD,CAJoB,wCAIzDC,UAJyD,eAI7CC,aAJ6C,eAKhE,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBJ,UAAU,CAAC,IAAD,CAAV,CACA,GAAI,CAACF,KAAL,CAAY,CACVC,QAAQ,CAACP,QAAQ,CAAC,GAAIa,CAAAA,IAAJ,GAAWC,QAAX,EAAD,CAAT,CAAR,CACAH,aAAa,CAAC,GAAIE,CAAAA,IAAJ,EAAD,CAAb,CACD,CACF,CAND,CALgE,GAYxDE,CAAAA,QAZwD,CAY7BV,KAZ6B,CAYxDU,QAZwD,CAY3CC,SAZ2C,0BAY7BX,KAZ6B,eAahE,GAAMY,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,IAAI,CAAI,CAC3B,GAAIH,QAAJ,CAAcA,QAAQ,CAACG,IAAD,CAAR,CACd,GAAIA,IAAJ,CAAU,CACRX,QAAQ,CAACP,QAAQ,CAACkB,IAAI,CAACJ,QAAL,EAAD,CAAT,CAAR,CACD,CAFD,IAEO,CACLP,QAAQ,CAACW,IAAD,CAAR,CACD,CACDP,aAAa,CAACO,IAAD,CAAb,CACD,CARD,CASA,mBACE,oBAAC,UAAD,gBACE,QAAQ,CAAER,UADZ,CAEE,QAAQ,CAAEO,YAFZ,CAGE,OAAO,CAAEL,OAHX,CAIE,MAAM,CAAEd,EAJV,CAKE,UAAU,CAAC,YALb,CAME,eAAe,CAAEO,KAAK,CAACc,eAAN,CAAwBd,KAAK,CAACc,eAA9B,CAAgD,MANnE,CAOE,eAAe,CAAC,cAPlB,CAQE,eAAe,CAAE,CACfC,IAAI,CAAE,CACJC,QAAQ,CAAE,CAAC,QAAD,CAAW;AADjB,CADS,CAIfC,eAAe,CAAE,CACfC,OAAO,CAAE,KAAM;AADA,CAJF,CAOfC,IAAI,CAAE,CACJD,OAAO,CAAE,KAAM;AADX,CAPS,CARnB,EAmBMP,SAnBN,EADF,CAuBA;AACA;AACA;AACD,CAhDwB,CAAzB,CAkDA,cAAed,CAAAA,SAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport ru from 'date-fns/locale/ru';\r\nimport './DateInput.module.css';\r\nimport { asField } from 'informed';\r\nimport { ddmmyyyy, ddmmyyyyToDate } from '../../../utils/DateUtil';\r\n\r\nconst DateInput = asField(({ fieldState, fieldApi, ...props }) => {\r\n  const { value } = fieldState;\r\n  const { setValue, setTouched } = fieldApi;\r\n  const initialLocalValue = value ? ddmmyyyyToDate(value) : null;\r\n  const [localValue, setLocalValue] = useState(initialLocalValue);\r\n  const onFocus = () => {\r\n    setTouched(true);\r\n    if (!value) {\r\n      setValue(ddmmyyyy(new Date().toString()));\r\n      setLocalValue(new Date());\r\n    }\r\n  };\r\n  const { onChange, ...restProps } = props;\r\n  const onChangeDate = date => {\r\n    if (onChange) onChange(date);\r\n    if (date) {\r\n      setValue(ddmmyyyy(date.toString()));\r\n    } else {\r\n      setValue(date);\r\n    }\r\n    setLocalValue(date);\r\n  };\r\n  return (\r\n    <DatePicker\r\n      selected={localValue}\r\n      onChange={onChangeDate}\r\n      onFocus={onFocus}\r\n      locale={ru}\r\n      dateFormat=\"dd.MM.yyyy\"\r\n      placeholderText={props.placeholderText ? props.placeholderText : 'Дата'}\r\n      popperPlacement=\"bottom-start\"\r\n      popperModifiers={{\r\n        flip: {\r\n          behavior: ['bottom'] // don't allow it to flip to be above\r\n        },\r\n        preventOverflow: {\r\n          enabled: false // tell it not to try to stay within the view (this prevents the popper from covering the element you clicked)\r\n        },\r\n        hide: {\r\n          enabled: false // turn off since needs preventOverflow to be enabled\r\n        }\r\n      }}\r\n      {...restProps}\r\n    />\r\n  );\r\n  //TODO добавить метод, который будет добавлять и убирать showMonthYearPicker props\r\n  // при нажатии на месяц+год(кнопка сверху между стрелочками)\r\n  // поможет описание custom header в примерах datepicker'a\r\n});\r\n\r\nexport default DateInput;\r\n"]},"metadata":{},"sourceType":"module"}