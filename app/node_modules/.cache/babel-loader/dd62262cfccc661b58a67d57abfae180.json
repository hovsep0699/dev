{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(cabinetNotificationEffect),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(getNotificationSettingWorker),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(changeNotificationSettingWorker);import{takeLatest,put}from'redux-saga/effects';import{Flash}from'../../../../common/flash/Flash';import{getNotificationSetting,setNotificationSetting,changeNotificationSetting}from'../actions';import AuthGateway from'@distate/core/dist/application/auth/AuthGateway';import{cabinetGateway}from'@distate/core/dist/application/cabinet/CabinetGateway';/** Кабинет */export function cabinetNotificationEffect(){return _regeneratorRuntime.wrap(function cabinetNotificationEffect$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(getNotificationSetting,getNotificationSettingWorker);case 2:_context.next=4;return takeLatest(changeNotificationSetting,changeNotificationSettingWorker);case 4:case\"end\":return _context.stop();}}},_marked);}/** получени настроек уведомлений */function getNotificationSettingWorker(){var authGateway,response,message;return _regeneratorRuntime.wrap(function getNotificationSettingWorker$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;authGateway=new AuthGateway();_context2.next=4;return authGateway.notificationSettings();case 4:response=_context2.sent;_context2.next=7;return put(setNotificationSetting({notificationSetting:response}));case 7:_context2.next=14;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.message;_context2.next=14;return Flash.error(message||'Возникла ошибка');case 14:case\"end\":return _context2.stop();}}},_marked2,null,[[0,9]]);}/** изменение настроек уведомления */function changeNotificationSettingWorker(_ref2){var payload,message;return _regeneratorRuntime.wrap(function changeNotificationSettingWorker$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref2.payload;_context3.prev=1;_context3.next=4;return cabinetGateway.changeNotificationSetting({collection:_toConsumableArray(payload)});case 4:_context3.next=6;return Flash.success('Настройки сохранены');case 6:_context3.next=13;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);message=_context3.t0.message;_context3.next=13;return Flash.error(message||'Возникла ошибка');case 13:case\"end\":return _context3.stop();}}},_marked3,null,[[1,8]]);}","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/cabinet/store/sagas/cabinetNotification.effect.ts"],"names":["cabinetNotificationEffect","getNotificationSettingWorker","changeNotificationSettingWorker","takeLatest","put","Flash","getNotificationSetting","setNotificationSetting","changeNotificationSetting","AuthGateway","cabinetGateway","authGateway","notificationSettings","response","notificationSetting","message","error","payload","collection","success"],"mappings":"uYAWiBA,yB,iDAMPC,4B,iDAYAC,+B,EA7BV,OAASC,UAAT,CAAqBC,GAArB,KAAgC,oBAAhC,CACA,OAASC,KAAT,KAAsB,gCAAtB,CACA,OACEC,sBADF,CAEEC,sBAFF,CAGEC,yBAHF,KAIO,YAJP,CAKA,MAAOC,CAAAA,WAAP,KAAwB,iDAAxB,CACA,OAASC,cAAT,KAA+B,uDAA/B,CAEA,cACA,MAAO,SAAUV,CAAAA,yBAAV,qJACL,MAAMG,CAAAA,UAAU,CAACG,sBAAD,CAAyBL,4BAAzB,CAAhB,CADK,uBAEL,MAAME,CAAAA,UAAU,CAACK,yBAAD,CAA4BN,+BAA5B,CAAhB,CAFK,sDAKP,oCACA,QAAUD,CAAAA,4BAAV,6LAEUU,WAFV,CAEwB,GAAIF,CAAAA,WAAJ,EAFxB,kBAGqB,MAAME,CAAAA,WAAW,CAACC,oBAAZ,EAAN,CAHrB,OAGUC,QAHV,iCAKI,MAAMT,CAAAA,GAAG,CAACG,sBAAsB,CAAC,CAAEO,mBAAmB,CAAED,QAAvB,CAAD,CAAvB,CAAT,CALJ,0FAMaE,OANb,cAMaA,OANb,mBAOI,MAAMV,CAAAA,KAAK,CAACW,KAAN,CAAYD,OAAO,EAAI,iBAAvB,CAAN,CAPJ,sEAWA,qCACA,QAAUb,CAAAA,+BAAV,uKAA4Ce,OAA5C,OAA4CA,OAA5C,mCAEI,MAAMP,CAAAA,cAAc,CAACF,yBAAf,CAAyC,CAAEU,UAAU,oBAAMD,OAAN,CAAZ,CAAzC,CAAN,CAFJ,wBAGI,MAAMZ,CAAAA,KAAK,CAACc,OAAN,CAAc,qBAAd,CAAN,CAHJ,0FAIaJ,OAJb,cAIaA,OAJb,mBAKI,MAAMV,CAAAA,KAAK,CAACW,KAAN,CAAYD,OAAO,EAAI,iBAAvB,CAAN,CALJ","sourcesContent":["import { takeLatest, put } from 'redux-saga/effects';\r\nimport { Flash } from '../../../../common/flash/Flash';\r\nimport {\r\n  getNotificationSetting,\r\n  setNotificationSetting,\r\n  changeNotificationSetting\r\n} from '../actions';\r\nimport AuthGateway from '@distate/core/dist/application/auth/AuthGateway';\r\nimport { cabinetGateway } from '@distate/core/dist/application/cabinet/CabinetGateway';\r\n\r\n/** Кабинет */\r\nexport function* cabinetNotificationEffect() {\r\n  yield takeLatest(getNotificationSetting, getNotificationSettingWorker);\r\n  yield takeLatest(changeNotificationSetting, changeNotificationSettingWorker);\r\n}\r\n\r\n/** получени настроек уведомлений */\r\nfunction* getNotificationSettingWorker() {\r\n  try {\r\n    const authGateway = new AuthGateway();\r\n    const response = yield authGateway.notificationSettings();\r\n\r\n    yield put(setNotificationSetting({ notificationSetting: response }));\r\n  } catch ({ message }) {\r\n    yield Flash.error(message || 'Возникла ошибка');\r\n  }\r\n}\r\n\r\n/** изменение настроек уведомления */\r\nfunction* changeNotificationSettingWorker({ payload }: { payload: any }) {\r\n  try {\r\n    yield cabinetGateway.changeNotificationSetting({ collection: [...payload] });\r\n    yield Flash.success('Настройки сохранены');\r\n  } catch ({ message }) {\r\n    yield Flash.error(message || 'Возникла ошибка');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}