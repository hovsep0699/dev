{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport AuthRequest from '../AuthRequest';\nimport errorFactory from '../../error/ErrorFactory';\nimport DiError, { AUTH } from '../../error/Error';\n\nvar AuthHandlerBase = /*#__PURE__*/function () {\n  function AuthHandlerBase() {\n    _classCallCheck(this, AuthHandlerBase);\n  }\n\n  _createClass(AuthHandlerBase, [{\n    key: \"auth\",\n    value: function auth(request) {\n      AuthHandlerBase.checkRequest(request);\n      Object.freeze(request);\n    }\n  }, {\n    key: \"canHandle\",\n    value: function canHandle(request) {\n      AuthHandlerBase.checkRequest(request);\n    }\n  }, {\n    key: \"setNext\",\n    value: function setNext(handler) {\n      if (!(handler instanceof AuthHandlerBase)) {\n        throw new Error('Параметр должен быть подклассом AuthHandlerBase');\n      }\n\n      this.next = handler;\n      return this.next;\n    }\n  }, {\n    key: \"doNextHandler\",\n    value: function doNextHandler(request) {\n      if (request.error) {\n        if (!(request.error instanceof DiError)) {\n          throw new Error('Неверный тип ошибки. Создавайте ошибки через createAuthError');\n        }\n\n        return Promise.reject(request.error);\n      }\n\n      if (this.next) {\n        return this.next.auth(request);\n      }\n\n      return Promise.resolve({\n        success: true\n      });\n    }\n  }, {\n    key: \"createAuthError\",\n    value: function createAuthError(msgForDeveloper, jsError, serverErrorResponse) {\n      return errorFactory(AUTH, msgForDeveloper, jsError, serverErrorResponse);\n    }\n  }], [{\n    key: \"checkRequest\",\n    value: function checkRequest(request) {\n      if (request === null || request === undefined) throw new Error('Следует передать запрос для авторизации(AuthRequest)');\n      if (!(request instanceof AuthRequest)) throw new Error('Параметр должен быть подклассом AuthRequest');\n      if (!(!!request.certificate || !!request.email || !!request.password)) throw new Error('Запрос пустой');\n    }\n  }]);\n\n  return AuthHandlerBase;\n}();\n\nexport default AuthHandlerBase;","map":{"version":3,"sources":["../../../../src/application/auth/handlers/AuthHandlerBase.js"],"names":[],"mappings":";;AAAA,OAAO,WAAP,MAAwB,gBAAxB;AACA,OAAO,YAAP,MAAyB,0BAAzB;AACA,OAAO,OAAP,IAAkB,IAAlB,QAA8B,mBAA9B;;IAEM,e;;;;;;;yBAOC,O,EAAO;AACV,MAAA,eAAe,CAAC,YAAhB,CAA6B,OAA7B;AACA,MAAA,MAAM,CAAC,MAAP,CAAc,OAAd;AACD;;;8BAES,O,EAAO;AACf,MAAA,eAAe,CAAC,YAAhB,CAA6B,OAA7B;AACD;;;4BAEO,O,EAAO;AACb,UAAI,EAAE,OAAO,YAAY,eAArB,CAAJ,EAA2C;AACzC,cAAM,IAAI,KAAJ,CAAU,iDAAV,CAAN;AACD;;AACD,WAAK,IAAL,GAAY,OAAZ;AACA,aAAO,KAAK,IAAZ;AACD;;;kCAEa,O,EAAO;AACnB,UAAI,OAAO,CAAC,KAAZ,EAAmB;AACjB,YAAI,EAAE,OAAO,CAAC,KAAR,YAAyB,OAA3B,CAAJ,EAAyC;AACvC,gBAAM,IAAI,KAAJ,CAAU,8DAAV,CAAN;AACD;;AACD,eAAO,OAAO,CAAC,MAAR,CAAe,OAAO,CAAC,KAAvB,CAAP;AACD;;AACD,UAAI,KAAK,IAAT,EAAe;AACb,eAAO,KAAK,IAAL,CAAU,IAAV,CAAe,OAAf,CAAP;AACD;;AACD,aAAO,OAAO,CAAC,OAAR,CAAgB;AAAE,QAAA,OAAO,EAAE;AAAX,OAAhB,CAAP;AACD;;;oCAEe,e,EAAiB,O,EAAS,mB,EAAmB;AAC3D,aAAO,YAAY,CAAC,IAAD,EAAO,eAAP,EAAwB,OAAxB,EAAiC,mBAAjC,CAAnB;AACD;;;iCAtCmB,O,EAAO;AACzB,UAAI,OAAO,KAAK,IAAZ,IAAoB,OAAO,KAAK,SAApC,EAA+C,MAAM,IAAI,KAAJ,CAAU,sDAAV,CAAN;AAC/C,UAAI,EAAE,OAAO,YAAY,WAArB,CAAJ,EAAuC,MAAM,IAAI,KAAJ,CAAU,6CAAV,CAAN;AACvC,UAAI,EAAE,CAAC,CAAC,OAAO,CAAC,WAAV,IAAyB,CAAC,CAAC,OAAO,CAAC,KAAnC,IAA4C,CAAC,CAAC,OAAO,CAAC,QAAxD,CAAJ,EAAuE,MAAM,IAAI,KAAJ,CAAU,eAAV,CAAN;AACxE;;;;;;AAqCH,eAAe,eAAf","sourceRoot":"","sourcesContent":["import AuthRequest from '../AuthRequest';\r\nimport errorFactory from '../../error/ErrorFactory';\r\nimport DiError, { AUTH } from '../../error/Error';\r\nclass AuthHandlerBase {\r\n    static checkRequest(request) {\r\n        if (request === null || request === undefined)\r\n            throw new Error('Следует передать запрос для авторизации(AuthRequest)');\r\n        if (!(request instanceof AuthRequest))\r\n            throw new Error('Параметр должен быть подклассом AuthRequest');\r\n        if (!(!!request.certificate || !!request.email || !!request.password))\r\n            throw new Error('Запрос пустой');\r\n    }\r\n    auth(request) {\r\n        AuthHandlerBase.checkRequest(request);\r\n        Object.freeze(request);\r\n    }\r\n    canHandle(request) {\r\n        AuthHandlerBase.checkRequest(request);\r\n    }\r\n    setNext(handler) {\r\n        if (!(handler instanceof AuthHandlerBase)) {\r\n            throw new Error('Параметр должен быть подклассом AuthHandlerBase');\r\n        }\r\n        this.next = handler;\r\n        return this.next;\r\n    }\r\n    doNextHandler(request) {\r\n        if (request.error) {\r\n            if (!(request.error instanceof DiError)) {\r\n                throw new Error('Неверный тип ошибки. Создавайте ошибки через createAuthError');\r\n            }\r\n            return Promise.reject(request.error);\r\n        }\r\n        if (this.next) {\r\n            return this.next.auth(request);\r\n        }\r\n        return Promise.resolve({ success: true });\r\n    }\r\n    createAuthError(msgForDeveloper, jsError, serverErrorResponse) {\r\n        return errorFactory(AUTH, msgForDeveloper, jsError, serverErrorResponse);\r\n    }\r\n}\r\nexport default AuthHandlerBase;\r\n//# sourceMappingURL=AuthHandlerBase.js.map"]},"metadata":{},"sourceType":"module"}