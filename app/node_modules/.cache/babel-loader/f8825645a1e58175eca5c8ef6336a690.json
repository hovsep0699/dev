{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Button,ButtonKinds}from'@distate/components';import{Pagination,PaginationLimit}from'../../../../common/pagination';import{getCompanies,getCompanyInfo}from'../../store/actions';import{companiesTotalSeletor,companiesListSeletor}from'../../store/selects';import{Card}from'./card';import{Tools}from'./tools';import{ActivationButtons}from'./ActivationButtons';/** Система - Юридические лица */export var Companies=function Companies(){var _useState=useState(10),_useState2=_slicedToArray(_useState,2),limit=_useState2[0],setLimit=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),offset=_useState4[0],setOffset=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),companyId=_useState6[0],setCompanyId=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),idOpenCard=_useState8[0],setIsOpenCard=_useState8[1];var companies=useSelector(companiesListSeletor);var total=useSelector(companiesTotalSeletor);var dispatch=useDispatch();useEffect(function(){dispatch(getCompanies({offset:offset,limit:limit}));},[dispatch,offset,limit]);var onOpenCard=function onOpenCard(id){dispatch(getCompanyInfo(id));setCompanyId(id);setIsOpenCard(true);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Tools,null),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u0438\\u043C\\u044F \\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0438\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0438\\u043D\\u043D\"),/*#__PURE__*/React.createElement(\"td\",null,\"\\u0430\\u043A\\u0442\\u0438\\u0432\\u0430\\u0446\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"td\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,companies===null||companies===void 0?void 0:companies.map(function(item){var id=item.id,name=item.name,inn=item.inn,is_active=item.is_active;return/*#__PURE__*/React.createElement(\"tr\",{key:id},/*#__PURE__*/React.createElement(\"td\",null,name),/*#__PURE__*/React.createElement(\"td\",null,inn),/*#__PURE__*/React.createElement(\"td\",null,is_active?'Активирован':/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ActivationButtons,{id:id}))),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Secondary,onClick:function onClick(){return onOpenCard(id);}},\"\\u041A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0430\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:4},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(PaginationLimit,{setLimit:setLimit,limit:limit}),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',marginLeft:20}},\"\\u0412\\u0421\\u0415\\u0413\\u041E \\u0417\\u0410\\u041F\\u0418\\u0421\\u0415\\u0419: \",total)),/*#__PURE__*/React.createElement(Pagination,{listLength:total,setOffset:setOffset,limit:limit})))))),/*#__PURE__*/React.createElement(Card,{isVisible:idOpenCard,hide:function hide(){return setIsOpenCard(false);},companyId:companyId}));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/system/components/companies/Companies.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Button","ButtonKinds","Pagination","PaginationLimit","getCompanies","getCompanyInfo","companiesTotalSeletor","companiesListSeletor","Card","Tools","ActivationButtons","Companies","limit","setLimit","offset","setOffset","companyId","setCompanyId","idOpenCard","setIsOpenCard","companies","total","dispatch","onOpenCard","id","map","item","name","inn","is_active","Secondary","display","justifyContent","alignItems","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, ButtonKinds } from '@distate/components';\r\n\r\nimport { Pagination, PaginationLimit } from '../../../../common/pagination';\r\nimport { getCompanies, getCompanyInfo } from '../../store/actions';\r\nimport { companiesTotalSeletor, companiesListSeletor } from '../../store/selects';\r\nimport { Card } from './card';\r\nimport { Tools } from './tools';\r\nimport { ActivationButtons } from './ActivationButtons';\r\n\r\n/** Система - Юридические лица */\r\nexport const Companies = () => {\r\n  const [limit, setLimit] = useState(10);\r\n  const [offset, setOffset] = useState(0);\r\n\r\n  const [companyId, setCompanyId] = useState<number>();\r\n  const [idOpenCard, setIsOpenCard] = useState(false);\r\n\r\n  const companies = useSelector(companiesListSeletor);\r\n  const total = useSelector(companiesTotalSeletor);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getCompanies({ offset, limit }));\r\n  }, [dispatch, offset, limit]);\r\n\r\n  const onOpenCard = (id: number) => {\r\n    dispatch(getCompanyInfo(id));\r\n    setCompanyId(id);\r\n    setIsOpenCard(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tools />\r\n      <table className=\"table\">\r\n        <thead className=\"common-table-head\">\r\n          <tr>\r\n            <td>имя компании</td>\r\n            <td>инн</td>\r\n            <td>активация</td>\r\n            <td></td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {companies?.map((item: any) => {\r\n            const { id, name, inn, is_active } = item;\r\n\r\n            return (\r\n              <tr key={id}>\r\n                <td>{name}</td>\r\n                <td>{inn}</td>\r\n                <td>\r\n                  {is_active ? (\r\n                    'Активирован'\r\n                  ) : (\r\n                    <div>\r\n                      <ActivationButtons id={id} />\r\n                    </div>\r\n                  )}\r\n                </td>\r\n                <td align=\"right\">\r\n                  <Button kind={ButtonKinds.Secondary} onClick={() => onOpenCard(id)}>\r\n                    Карточка клиента\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr>\r\n            <td colSpan={4}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <div style={{ display: 'flex' }}>\r\n                  <PaginationLimit setLimit={setLimit} limit={limit} />\r\n                  <div style={{ display: 'flex', alignItems: 'center', marginLeft: 20 }}>\r\n                    ВСЕГО ЗАПИСЕЙ: {total}\r\n                  </div>\r\n                </div>\r\n                <Pagination listLength={total} setOffset={setOffset} limit={limit} />\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n\r\n      <Card isVisible={idOpenCard} hide={() => setIsOpenCard(false)} companyId={companyId!} />\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}