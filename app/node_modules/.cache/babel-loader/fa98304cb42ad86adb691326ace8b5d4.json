{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Hovsep\\\\Desktop\\\\local\\\\diflow_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Button,Modal,Icons,ButtonKinds}from'@distate/components';import{Pagination}from'../../../../common/pagination';import{getTariffs,changeTariff}from'../../store/actions';import{tariffsRecordsTotalSelector,tariffsRowsSelector}from'../../store/selectors';import{RadioButton}from'../../../../common/radio-button';import{TariffCard}from'./TariffCard';/** Изменить тариф */export var ChangeTariffModal=function ChangeTariffModal(props){var hide=props.hide,isVisible=props.isVisible,currentTariffId=props.currentTariffId,companyId=props.companyId;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),offset=_useState2[0],setOffset=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isCard=_useState4[0],setIsCard=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),tariffId=_useState6[0],setTariffId=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),tariffTitle=_useState8[0],setTariffTitle=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),selectedTariff=_useState10[0],setSelectedTariff=_useState10[1];var tariffs=useSelector(tariffsRowsSelector);var recordsTotal=useSelector(tariffsRecordsTotalSelector);var dispatch=useDispatch();useEffect(function(){dispatch(getTariffs({offset:offset,notStatusSystemName:'archive'}));},[dispatch,offset]);var openCard=function openCard(id,title){setTariffId(id);setTariffTitle(title);setIsCard(true);};var onChangeTariffClick=function onChangeTariffClick(){dispatch(changeTariff({id:companyId,tariffId:selectedTariff}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{hide:hide,isVisible:isVisible},/*#__PURE__*/React.createElement(Modal.Header,{title:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0442\\u0430\\u0440\\u0438\\u0444\"}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"common-table-head\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:3},\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"))),/*#__PURE__*/React.createElement(\"tbody\",null,tariffs===null||tariffs===void 0?void 0:tariffs.map(function(item){var id=item.id,title=item.title;return/*#__PURE__*/React.createElement(\"tr\",{key:id},/*#__PURE__*/React.createElement(\"td\",{colSpan:2},/*#__PURE__*/React.createElement(RadioButton,{value:id,name:\"tariff\",defaultChecked:currentTariffId===id,onChange:function onChange(){return setSelectedTariff(id);},id:id,label:title,style:{justifyContent:'left'}})),/*#__PURE__*/React.createElement(\"td\",{align:\"right\"},/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Secondary,onClick:function onClick(){return openCard(id,title);}},\"\\u041A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0430 \\u0442\\u0430\\u0440\\u0438\\u0444\\u0430\")));})),/*#__PURE__*/React.createElement(\"tfoot\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{kind:ButtonKinds.Orange,onClick:onChangeTariffClick,icon:/*#__PURE__*/React.createElement(Icons.IconCheck,{fill:\"currentColor\"})},\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0442\\u0430\\u0440\\u0438\\u0444\")),/*#__PURE__*/React.createElement(\"td\",{align:\"right\",colSpan:2},/*#__PURE__*/React.createElement(\"div\",{className:\"pagination-right\"},/*#__PURE__*/React.createElement(Pagination,{listLength:recordsTotal,setOffset:setOffset})))))))),tariffId&&/*#__PURE__*/React.createElement(TariffCard,{hide:function hide(){return setIsCard(false);},isVisible:isCard,tariffId:tariffId,title:tariffTitle}));};","map":{"version":3,"sources":["C:/Users/Hovsep/Desktop/local/diflow_react/packages/app/src/pages/finance/components/information/ChangeTariffModal.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","Button","Modal","Icons","ButtonKinds","Pagination","getTariffs","changeTariff","tariffsRecordsTotalSelector","tariffsRowsSelector","RadioButton","TariffCard","ChangeTariffModal","props","hide","isVisible","currentTariffId","companyId","offset","setOffset","isCard","setIsCard","tariffId","setTariffId","tariffTitle","setTariffTitle","selectedTariff","setSelectedTariff","tariffs","recordsTotal","dispatch","notStatusSystemName","openCard","id","title","onChangeTariffClick","map","item","justifyContent","Secondary","Orange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Modal, Icons, ButtonKinds } from '@distate/components';\r\nimport { Pagination } from '../../../../common/pagination';\r\nimport { getTariffs, changeTariff } from '../../store/actions';\r\nimport { tariffsRecordsTotalSelector, tariffsRowsSelector } from '../../store/selectors';\r\nimport { RadioButton } from '../../../../common/radio-button';\r\nimport { TariffCard } from './TariffCard';\r\n\r\ntype Props = {\r\n  hide: () => void;\r\n  isVisible: boolean;\r\n  currentTariffId: number;\r\n  companyId: number;\r\n};\r\n\r\n/** Изменить тариф */\r\nexport const ChangeTariffModal = (props: Props) => {\r\n  const { hide, isVisible, currentTariffId, companyId } = props;\r\n  const [offset, setOffset] = useState(0);\r\n  const [isCard, setIsCard] = useState(false);\r\n  const [tariffId, setTariffId] = useState<number>();\r\n  const [tariffTitle, setTariffTitle] = useState<string>();\r\n  const [selectedTariff, setSelectedTariff] = useState<number>();\r\n\r\n  const tariffs = useSelector(tariffsRowsSelector);\r\n  const recordsTotal = useSelector(tariffsRecordsTotalSelector);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getTariffs({ offset, notStatusSystemName: 'archive' }));\r\n  }, [dispatch, offset]);\r\n\r\n  const openCard = (id: number, title: string) => {\r\n    setTariffId(id);\r\n    setTariffTitle(title);\r\n    setIsCard(true);\r\n  };\r\n\r\n  const onChangeTariffClick = () => {\r\n    dispatch(changeTariff({ id: companyId, tariffId: selectedTariff }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal hide={hide} isVisible={isVisible}>\r\n        <Modal.Header title=\"Изменить тариф\" />\r\n\r\n        <Modal.Body>\r\n          <table className=\"table\">\r\n            <thead className=\"common-table-head\">\r\n              <tr>\r\n                <td colSpan={3}>Название</td>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {tariffs?.map(item => {\r\n                const { id, title } = item;\r\n                return (\r\n                  <tr key={id}>\r\n                    <td colSpan={2}>\r\n                      <RadioButton\r\n                        value={id}\r\n                        name=\"tariff\"\r\n                        defaultChecked={currentTariffId === id}\r\n                        onChange={() => setSelectedTariff(id)}\r\n                        id={id}\r\n                        label={title}\r\n                        style={{ justifyContent: 'left' }}\r\n                      />\r\n                    </td>\r\n                    <td align=\"right\">\r\n                      <Button kind={ButtonKinds.Secondary} onClick={() => openCard(id, title)}>\r\n                        Карточка тарифа\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n            <tfoot>\r\n              <tr>\r\n                <td>\r\n                  <Button\r\n                    kind={ButtonKinds.Orange}\r\n                    onClick={onChangeTariffClick}\r\n                    icon={<Icons.IconCheck fill=\"currentColor\" />}\r\n                  >\r\n                    Сменить тариф\r\n                  </Button>\r\n                </td>\r\n                <td align=\"right\" colSpan={2}>\r\n                  <div className=\"pagination-right\">\r\n                    <Pagination listLength={recordsTotal} setOffset={setOffset} />\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tfoot>\r\n          </table>\r\n        </Modal.Body>\r\n      </Modal>\r\n      {tariffId && (\r\n        <TariffCard\r\n          hide={() => setIsCard(false)}\r\n          isVisible={isCard}\r\n          tariffId={tariffId}\r\n          title={tariffTitle}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}