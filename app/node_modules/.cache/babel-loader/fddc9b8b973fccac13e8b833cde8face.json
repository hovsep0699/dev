{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React from 'react';\nimport set from 'lodash.set';\nimport get from 'lodash.get';\nimport { widgets } from '../widgets';\nimport { Context } from '../context';\nimport { isSelect, hasWidget } from '../utils';\nimport { getOptions, optionsList, dateFormat } from '../utils';\nexport var SchemaString = function SchemaString(props) {\n  var required = props.required,\n      schemaName = props.schemaName,\n      schemaPath = props.schemaPath,\n      schema = props.schema,\n      uiSchema = props.uiSchema,\n      onChange = props.onChange,\n      formData = props.formData,\n      errorSchema = props.errorSchema;\n  var title = schema.title,\n      format = schema.format;\n\n  var _React$useContext = React.useContext(Context),\n      mainFormData = _React$useContext.formData;\n\n  var enumOptions = isSelect(schema) && optionsList(schema);\n  var defautlWidget = enumOptions ? 'select' : 'text';\n\n  if (format && hasWidget(format)) {\n    defautlWidget = format;\n  }\n\n  var _a = getOptions(uiSchema),\n      _a$widget = _a.widget,\n      widget = _a$widget === void 0 ? defautlWidget : _a$widget,\n      rest = __rest(_a, [\"widget\"]);\n\n  var options = Object.assign(Object.assign({}, rest), {\n    enumOptions: enumOptions\n  });\n\n  if (!widgets.hasOwnProperty(widget)) {\n    throw new Error(\"widget list does not contain \".concat(widget));\n  }\n\n  var formDefaultValue = get(schema, 'default');\n\n  if (typeof formDefaultValue !== 'undefined' && typeof formData === 'undefined') {\n    var value;\n\n    switch (widget) {\n      case 'select':\n        value = enumOptions.find(function (_ref) {\n          var value = _ref.value;\n          return String(value) === formDefaultValue;\n        });\n        break;\n\n      case 'date':\n        var _options$format = options.format,\n            _format = _options$format === void 0 ? 'dd.MM.yyyy' : _options$format;\n\n        value = dateFormat(formDefaultValue, _format);\n        break;\n\n      default:\n        value = formDefaultValue;\n        break;\n    }\n\n    if (value) {\n      set(mainFormData, schemaPath, value);\n    }\n  }\n\n  var Widget = widgets[widget];\n  var error = get(errorSchema, 'errors');\n  return React.createElement(Widget, {\n    name: schemaName,\n    label: title,\n    error: error,\n    required: required,\n    schema: schema,\n    uiSchema: uiSchema,\n    schemaPath: schemaPath,\n    onChange: onChange,\n    formValue: formData,\n    formDefaultValue: formDefaultValue,\n    options: options\n  });\n};","map":{"version":3,"sources":["../../../src/FormSchema/schema/schema.string.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport React from 'react';\r\nimport set from 'lodash.set';\r\nimport get from 'lodash.get';\r\nimport { widgets } from '../widgets';\r\nimport { Context } from '../context';\r\nimport { isSelect, hasWidget } from '../utils';\r\nimport { getOptions, optionsList, dateFormat } from '../utils';\r\nexport const SchemaString = props => {\r\n    const { required, schemaName, schemaPath, schema, uiSchema, onChange, formData, errorSchema } = props;\r\n    const { title, format } = schema;\r\n    const { formData: mainFormData } = React.useContext(Context);\r\n    const enumOptions = isSelect(schema) && optionsList(schema);\r\n    let defautlWidget = enumOptions ? 'select' : 'text';\r\n    if (format && hasWidget(format)) {\r\n        defautlWidget = format;\r\n    }\r\n    const _a = getOptions(uiSchema), { widget = defautlWidget } = _a, rest = __rest(_a, [\"widget\"]);\r\n    const options = Object.assign(Object.assign({}, rest), { enumOptions });\r\n    if (!widgets.hasOwnProperty(widget)) {\r\n        throw new Error(`widget list does not contain ${widget}`);\r\n    }\r\n    const formDefaultValue = get(schema, 'default');\r\n    if (typeof formDefaultValue !== 'undefined' && typeof formData === 'undefined') {\r\n        let value;\r\n        switch (widget) {\r\n            case 'select':\r\n                value = enumOptions.find(({ value }) => String(value) === formDefaultValue);\r\n                break;\r\n            case 'date':\r\n                const { format = 'dd.MM.yyyy' } = options;\r\n                value = dateFormat(formDefaultValue, format);\r\n                break;\r\n            default:\r\n                value = formDefaultValue;\r\n                break;\r\n        }\r\n        if (value) {\r\n            set(mainFormData, schemaPath, value);\r\n        }\r\n    }\r\n    const Widget = widgets[widget];\r\n    const error = get(errorSchema, 'errors');\r\n    return (React.createElement(Widget, { name: schemaName, label: title, error: error, required: required, schema: schema, uiSchema: uiSchema, schemaPath: schemaPath, onChange: onChange, formValue: formData, formDefaultValue: formDefaultValue, options: options }));\r\n};\r\n//# sourceMappingURL=schema.string.js.map"]},"metadata":{},"sourceType":"module"}